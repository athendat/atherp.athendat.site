"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[845],{6845:(mt,T,r)=>{r.r(T),r.d(T,{PublicModule:()=>st});var p=r(5357),F=r(2596),Q=r(6863),C=r(6338),c=r(3075),h=r(7579),g=r(2722),N=r(1910),v=r(2491),D=r(1896),J=r(7489),U=r(4062),S=r(2112),Y=r(3005),_=r(1777),e=r(5e3),I=r(1683),P=r(2454),q=r(5620),u=r(9808),k=r(508),Z=r(7423),f=r(288),b=r(5245),x=r(7322),E=r(7531),j=r(4107),s=r(8279);let B=(()=>{class t{constructor(n,o){this.elementRef=n,this.renderer=o,this.parallaxRatio=1,this.initialTop=0,this.initialTop=n.nativeElement.getBoundingClientRect().top}onWindowScroll(n){this.elementRef.nativeElement.style.top=this.initialTop-window.scrollY*this.parallaxRatio+"px",this.elementRef.nativeElement.style.transform="scale(1,1)"}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq),e.Y36(e.Qsj))},t.\u0275dir=e.lG2({type:t,selectors:[["","appParallax2",""]],hostBindings:function(n,o){1&n&&e.NdJ("scroll",function(l){return o.onWindowScroll(l)},!1,e.Jf7)},inputs:{parallaxRatio:"parallaxRatio"}}),t})();function O(t,i){1&t&&e.GkF(0)}function H(t,i){if(1&t&&(e.TgZ(0,"div",25),e.YNc(1,O,1,0,"ng-container",26),e.qZA()),2&t){e.oxw();const n=e.MAs(36);e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function L(t,i){1&t&&e.GkF(0)}function $(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,L,1,0,"ng-container",26),e.qZA()),2&t){e.oxw();const n=e.MAs(38);e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function G(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function M(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function z(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function W(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos son obligatorio. "),e.qZA())}function K(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos deben contener entre 6 y 255 caracteres. "),e.qZA())}function V(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos no deben contener n\xfameros. "),e.qZA())}function X(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la personalidad. "),e.qZA())}function ee(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function te(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio. "),e.qZA())}function ne(t,i){if(1&t&&(e.TgZ(0,"mat-option",57)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(2),e.Oqu(n.name)}}function oe(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un producto o servicio "),e.qZA())}function ie(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de obligatoria "),e.qZA())}function re(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad debe ser mayor que 0 "),e.qZA())}function ae(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," la cantidad solo debe contener n\xfameros "),e.qZA())}function ce(t,i){if(1&t&&(e.TgZ(0,"th",70),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit,o=e.oxw(4);e.xp6(1),e.hij(" ",o.getFieldsTableHeaderNames(n)," ")}}function se(t,i){if(1&t&&(e.TgZ(0,"td",71),e._uU(1),e.qZA()),2&t){const n=i.$implicit,o=e.oxw(2).$implicit;e.xp6(1),e.hij("",n[o]," ")}}function le(t,i){1&t&&(e.TgZ(0,"td",72),e._uU(1,"Total de la solicitud "),e.qZA())}function me(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,ce,2,1,"th",68),e.YNc(2,se,2,1,"td",62),e.YNc(3,le,2,0,"td",69),e.qZA())}function de(t,i){if(1&t&&(e.TgZ(0,"th",76),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit,o=e.oxw(4);e.xp6(1),e.hij(" ",o.getFieldsTableHeaderNames(n)," ")}}function ue(t,i){if(1&t&&(e.TgZ(0,"td",77),e._uU(1),e.qZA()),2&t){const n=i.$implicit,o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",n[o]," ")}}function pe(t,i){1&t&&e._UZ(0,"td",78)}function _e(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,de,2,1,"th",73),e.YNc(2,ue,2,1,"td",74),e.YNc(3,pe,1,0,"td",75),e.qZA())}function ge(t,i){1&t&&(e.TgZ(0,"th",81),e._uU(1," Acciones "),e.qZA())}function fe(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"td",77)(1,"div",82)(2,"button",83),e.NdJ("click",function(a){const m=e.CHM(n).$implicit,d=e.oxw(6);return d.expandedElement=d.expandedElement&&d.expandedElement.goodsId===m.goodsId?null:m,a.stopPropagation(),e.KtG(d.setSelectedProductServiceDetail(m.goodsId))}),e._UZ(3,"mat-icon",84),e.qZA(),e.TgZ(4,"button",83),e.NdJ("click",function(){const l=e.CHM(n).$implicit,m=e.oxw(6);return e.KtG(m.removeGoodsField(l.goodsId))}),e._UZ(5,"mat-icon",84),e.qZA()()()}if(2&t){const n=i.$implicit,o=e.oxw(6);e.xp6(3),e.Q6J("svgIcon",o.expandedElement&&o.expandedElement.goodsId===n.goodsId?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}const xe=function(){return["CUP "]};function he(t,i){if(1&t&&(e.TgZ(0,"td",85),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&t){const n=e.oxw(6);e.xp6(1),e.hij(" ",e.xi3(2,1,n.getTotalQuantity(),e.DdM(4,xe))," ")}}function ve(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,ge,2,0,"th",79),e.YNc(2,fe,6,2,"td",74),e.YNc(3,he,3,5,"td",80),e.qZA())}function qe(t,i){if(1&t&&(e.ynx(0,67),e.YNc(1,me,4,0,"div",37),e.YNc(2,_e,4,0,"div",37),e.YNc(3,ve,4,0,"div",37),e.BQk()),2&t){const n=i.$implicit;e.s9C("matColumnDef",n),e.xp6(1),e.Q6J("ngIf","name"===n),e.xp6(1),e.Q6J("ngIf","expand"!==n&&"name"!==n),e.xp6(1),e.Q6J("ngIf","expand"===n)}}function Ze(t,i){if(1&t&&e._UZ(0,"img",93),2&t){const n=e.oxw(6);e.Q6J("alt","No tiene conexi\xf3n o esta imagen no existe")("src",n.selectedProductServiceDetail.imageUrl,e.LSH)}}function Te(t,i){1&t&&(e.TgZ(0,"div",94),e._uU(1," SIN IMAGEN "),e.qZA())}function Ce(t,i){if(1&t&&(e.TgZ(0,"div",87)(1,"div",88)(2,"div",89),e.YNc(3,Ze,1,2,"img",90),e.YNc(4,Te,2,0,"div",91),e.qZA()(),e.TgZ(5,"span",92),e._uU(6),e.qZA()()),2&t){const n=e.oxw().$implicit,o=e.oxw(4);e.Q6J("@detailExpand",o.expandedElement&&n.goodsId===o.expandedElement.goodsId?"expanded":"collapsed"),e.xp6(3),e.Q6J("ngIf",o.selectedProductServiceDetail.imageUrl),e.xp6(1),e.Q6J("ngIf",!o.selectedProductServiceDetail.imageUrl),e.xp6(2),e.Oqu(o.selectedProductServiceDetail.description)}}function Ie(t,i){if(1&t&&(e.TgZ(0,"td",71),e.YNc(1,Ce,7,4,"div",86),e.qZA()),2&t){const n=e.oxw(4);e.uIk("colspan",n.columnsToDisplayWithExpand.length),e.xp6(1),e.Q6J("ngIf",n.selectedProductServiceDetail)}}function be(t,i){1&t&&e._UZ(0,"tr",95)}function ye(t,i){if(1&t&&e._UZ(0,"tr",96),2&t){const n=i.$implicit,o=e.oxw(4);e.ekj("example-expanded-row",o.expandedElement===n)}}function Ae(t,i){1&t&&e._UZ(0,"tr",97)}function Re(t,i){1&t&&e._UZ(0,"tr",98)}const we=function(){return["expandedDetail"]};function Fe(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",58)(2,"table",59),e.YNc(3,qe,4,4,"ng-container",60),e.ynx(4,61),e.YNc(5,Ie,2,2,"td",62),e.BQk(),e.YNc(6,be,1,0,"tr",63),e.YNc(7,ye,1,2,"tr",64),e.YNc(8,Ae,1,0,"tr",65),e.YNc(9,Re,1,0,"tr",66),e.qZA()(),e.BQk()),2&t){const n=e.oxw(3);e.xp6(2),e.Q6J("dataSource",n.requestForm.get("goodsData").getRawValue()),e.xp6(1),e.Q6J("ngForOf",n.displayedColumns),e.xp6(3),e.Q6J("matHeaderRowDef",n.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",n.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(7,we)),e.xp6(1),e.Q6J("matFooterRowDef",n.displayedColumns)("matFooterRowDefSticky",!0)}}function Qe(t,i){1&t&&(e.TgZ(0,"div",99),e._uU(1," No ha agregado un producto o servicio a\xfan! "),e.qZA())}const y=function(t){return{"cursor-not-allowed":t}};function Ne(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mat-accordion",28)(1,"mat-expansion-panel",29)(2,"mat-expansion-panel-header",30)(3,"mat-panel-title",31)(4,"div",32),e._uU(5," Informaci\xf3n General "),e.qZA()()(),e.TgZ(6,"form",33)(7,"div",34)(8,"mat-form-field",35)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",36),e.YNc(12,G,2,0,"mat-error",37),e.YNc(13,M,2,0,"mat-error",37),e.YNc(14,z,2,0,"mat-error",37),e.qZA()(),e.TgZ(15,"div",34)(16,"mat-form-field",35)(17,"mat-label"),e._uU(18,"Apellidos"),e.qZA(),e._UZ(19,"input",38),e.YNc(20,W,2,0,"mat-error",37),e.YNc(21,K,2,0,"mat-error",37),e.YNc(22,V,2,0,"mat-error",37),e.qZA()(),e.TgZ(23,"div",34)(24,"mat-form-field",35)(25,"mat-label"),e._uU(26,"Personalidad"),e.qZA(),e.TgZ(27,"mat-select",39)(28,"mat-option",40),e._uU(29,"Natural"),e.qZA(),e.TgZ(30,"mat-option",41),e._uU(31,"Jur\xeddico"),e.qZA()(),e.YNc(32,X,2,0,"mat-error",37),e.qZA()(),e.TgZ(33,"div",34)(34,"mat-form-field",35)(35,"mat-label"),e._uU(36,"Correos Electr\xf3nicos"),e.qZA(),e._UZ(37,"mat-icon",42)(38,"input",43),e.YNc(39,ee,2,0,"mat-error",37),e.YNc(40,te,2,0,"mat-error",37),e.qZA()()()(),e.TgZ(41,"mat-expansion-panel",29)(42,"mat-expansion-panel-header",30)(43,"mat-panel-title",31)(44,"div",32),e._uU(45," Selecci\xf3n de Productos y Servicios "),e.qZA()()(),e.TgZ(46,"form",44)(47,"div",34)(48,"mat-form-field",35)(49,"mat-label"),e._uU(50,"Productos y servicios"),e.qZA(),e.TgZ(51,"mat-select",45),e.YNc(52,ne,3,2,"mat-option",46),e.qZA(),e.YNc(53,oe,2,0,"mat-error",37),e.qZA()(),e.TgZ(54,"div",47)(55,"mat-form-field",35)(56,"mat-label"),e._uU(57,"Cantidad"),e.qZA(),e._UZ(58,"input",48),e.YNc(59,ie,2,0,"mat-error",37),e.YNc(60,re,2,0,"mat-error",37),e.YNc(61,ae,2,0,"mat-error",37),e.qZA()(),e.TgZ(62,"div",49)(63,"button",50),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.addGoodsField())}),e._UZ(64,"mat-icon",51),e.TgZ(65,"span",52),e._uU(66,"Agregar"),e.qZA()()(),e.YNc(67,Fe,10,8,"ng-container",53),e.YNc(68,Qe,2,0,"ng-template",null,54,e.W1O),e.qZA()()(),e.TgZ(70,"div",55)(71,"button",56),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.createRequest())}),e._UZ(72,"mat-icon",51),e.TgZ(73,"span",52),e._uU(74,"Enviar"),e.qZA()()()}if(2&t){const n=e.MAs(69),o=e.oxw(2);e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(4),e.Q6J("formGroup",o.requestForm)("autocomplete","off"),e.xp6(5),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre"),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("name").hasError("maxlength")||o.requestForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastName")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("lastName").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("lastName").hasError("maxlength")||o.requestForm.get("lastName").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("lastName").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","personality"),e.xp6(5),e.Q6J("ngIf",o.requestForm.get("personality").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",o.requestForm.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",o.requestForm.get("email").hasError("required")),e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(4),e.Q6J("formGroup",o.goodsAmountTempForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","goods"),e.xp6(1),e.Q6J("ngForOf",o.productServices),e.xp6(1),e.Q6J("ngIf",o.goodsAmountTempForm.get("goods").hasError("required")),e.xp6(5),e.Q6J("type","number")("formControlName","amount")("min",3),e.xp6(1),e.Q6J("ngIf",o.goodsAmountTempForm.get("amount").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.goodsAmountTempForm.get("amount").hasError("min")),e.xp6(1),e.Q6J("ngIf",o.goodsAmountTempForm.get("amount").hasError("pattern")),e.xp6(2),e.Q6J("disabled",o.goodsAmountTempForm.invalid)("ngClass",e.VKq(47,y,o.goodsAmountTempForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(3),e.Q6J("ngIf",o.requestForm.get("goodsData").getRawValue().length>0)("ngIfElse",n),e.xp6(4),e.Q6J("disabled",o.requestForm.invalid||0===o.requestForm.get("goodsData").getRawValue().length)("ngClass",e.VKq(49,y,o.requestForm.invalid||0===o.requestForm.get("goodsData").getRawValue().length)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:paper-airplane")}}function De(t,i){1&t&&(e.TgZ(0,"div",100),e._uU(1," Cat\xe1logo de productos y servicios "),e.qZA())}const A=function(t,i){return{"font-medium":t,"text-secondary":i}};function Je(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7),e._UZ(7,"img",8),e.qZA(),e.TgZ(8,"div",9)(9,"div",10),e._uU(10),e.qZA(),e.TgZ(11,"div",11),e._uU(12),e.qZA()(),e._UZ(13,"div",12),e.TgZ(14,"div",13)(15,"div",14)(16,"span",15),e._uU(17),e.qZA(),e.TgZ(18,"span",16),e._uU(19),e.qZA()(),e.TgZ(20,"div",14)(21,"span",15),e._uU(22),e.qZA(),e.TgZ(23,"span",16),e._uU(24),e.qZA()()(),e.TgZ(25,"div",17)(26,"a",18),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.selectedPage="catalogue")}),e._uU(27," Cat\xe1logo "),e.qZA(),e.TgZ(28,"a",18),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.selectedPage="request")}),e._uU(29," Solicitud "),e.qZA()()()()(),e.TgZ(30,"div",19)(31,"div",20),e.GkF(32),e.YNc(33,H,2,1,"div",21),e.YNc(34,$,2,1,"div",22),e.qZA()(),e.YNc(35,Ne,75,51,"ng-template",null,23,e.W1O),e.YNc(37,De,2,0,"ng-template",null,24,e.W1O),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("parallaxRatio",.5)("src",n.merchant.coverUrl?n.merchant.coverUrl:"assets/images/auth/signup.jpg",e.LSH),e.xp6(4),e.Q6J("src",n.merchant.logoUrl,e.LSH),e.xp6(3),e.Oqu(n.merchant.name),e.xp6(2),e.AsE("",n.merchant.state,", ",n.merchant.city,""),e.xp6(5),e.Oqu(n.pCount),e.xp6(2),e.Oqu(1===n.pCount?"Producto":"Productos"),e.xp6(3),e.Oqu(n.sCount),e.xp6(2),e.Oqu(1===n.sCount?"Servicio":"Servicios"),e.xp6(2),e.Q6J("ngClass",e.WLB(14,A,"catalogue"===n.selectedPage,"catalogue"!==n.selectedPage)),e.xp6(2),e.Q6J("ngClass",e.WLB(17,A,"request"===n.selectedPage,"request"!==n.selectedPage)),e.xp6(5),e.Q6J("ngIf","request"===n.selectedPage),e.xp6(1),e.Q6J("ngIf","catalogue"===n.selectedPage)}}let Ue=(()=>{class t{constructor(n,o,a,l,m,d,lt){this._activatedRoute=n,this._changeDetectorRef=o,this._router=a,this._formBuilder=l,this._fuseConfirmationService=m,this._requestsService=d,this.store=lt,this.productServices=[],this.productServicesStatic=[],this.pCount=0,this.sCount=0,this.selectedPage="catalogue",this.selectedProductServiceDetail=null,this.displayedColumns=["name","type","uom","amount","price","quantity","expand"],this.columnsToDisplayWithExpand=[...this.displayedColumns],this._unsubscribeAll=new h.x}ngOnInit(){this.store.select(N.Qs).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{n||this._router.navigate(["../"]),this.merchant=n}),this.productServices$=this.store.select(Y.ZQ),this.productServices$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this.productServices=(0,J.cloneDeep)(n),this.productServicesStatic=n,this.pCount=n.filter(o=>"Producto"===o.type).length,this.sCount=n.filter(o=>"Servicio"===o.type).length,this._changeDetectorRef.markForCheck()}),this.requestForm=this._formBuilder.group({merchantId:[this.merchant._id,[c.kI.required]],name:["",[c.kI.required,c.kI.minLength(3),c.kI.maxLength(255),v.L.onlyAlphabetsWithAccentPattern()]],lastName:["",[c.kI.required,c.kI.minLength(6),c.kI.maxLength(255),v.L.onlyAlphabetsWithAccentPattern()]],email:["",[c.kI.required,c.kI.email]],personality:["",[c.kI.required]],status:[D.eJ.Nueva,[c.kI.required]],goodsData:this._formBuilder.array([]),slug:[""]}),this.goodsAmountTempForm=this._formBuilder.group({_id:[""],goods:[null,[c.kI.required]],amount:[0,[c.kI.required,c.kI.min(1),v.L.onlyNumbersPattern()]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,S.AD)())}addGoodsField(){const n=this.goodsAmountTempForm.getRawValue(),o=this._formBuilder.group({goodsId:[n.goods._id],name:[n.goods.name],type:[n.goods.type],amount:[+n.amount,[c.kI.required]],price:[n.goods.price,[c.kI.required]],quantity:[n.goods.price*n.amount,[c.kI.required]],uom:[n.goods.uomId.name],description:[n.goods.description]});this.requestForm.get("goodsData").push(o);const a=this.productServices.findIndex(l=>l._id===n.goods._id);this.productServices.splice(a,1),this.goodsAmountTempForm.reset(),this._changeDetectorRef.markForCheck()}removeGoodsField(n){const o=this.requestForm.get("goodsData").getRawValue().findIndex(m=>m.goodsId===n),a=this.productServicesStatic.find(m=>m._id===n);this.requestForm.get("goodsData").removeAt(o),this.productServices.push(Object.assign({},a)),this._changeDetectorRef.markForCheck()}createRequest(){const n=this.requestForm.getRawValue();n.slug=new U.i(n.name).slug,this._fuseConfirmationService.open({title:"Enviar solicitud",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._requestsService.createRequest(n).subscribe(l=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Su solicitud ha sido enviada. Se le enviar\xe1 un correo con una oferta. \xbfDesea enviar otra solicitud?",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"si",color:"primary"},cancel:{show:!0,label:"No"}}}).afterClosed().subscribe(d=>{"confirmed"===d?(this.requestForm.reset(),this.requestForm.get("merchantId").setValue(this.merchant._id),this.requestForm.get("status").setValue("Nueva"),this.requestForm.get("goodsData").clear(),this.productServices=[...this.productServicesStatic],this.setSelectedProductServiceDetail(null)):this._router.navigate(["../../"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()})}getTotalQuantity(){return this.requestForm.get("goodsData").getRawValue().map(n=>n.quantity).reduce((n,o)=>n+o,0)}getFieldsTableHeaderNames(n){switch(n){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}setSelectedProductServiceDetail(n){this.selectedProductServiceDetail=this.productServicesStatic.find(o=>o._id===n)}trackByFn(n,o){return o.id||n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.gz),e.Y36(e.sBO),e.Y36(p.F0),e.Y36(c.qu),e.Y36(I.R),e.Y36(P.r),e.Y36(q.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["incoming-request"]],decls:1,vars:1,consts:[["class","flex flex-col flex-auto min-w-0",4,"ngIf"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"bg-accent-200","h-40","lg:h-80","dark:bg-accent-700"],["appParallax2","","alt","No tiene conexi\xf3n o esta imagen no existe",1,"h-40","lg:h-80","object-fill","fixed","z-0",3,"parallaxRatio","src"],[1,"z-20","bg-white","bg-white","shadow"],[1,"flex","flex-col","flex-0","lg:flex-row","items-center","max-w-5xl","w-full","mx-auto","px-8","lg:h-18","bg-card"],[1,"-mt-26","lg:-mt-22","rounded-md","bg-accent-100","dark:bg-accent-700"],["alt","No tiene conexi\xf3n o esta imagen no existe",1,"w-32","h-32","rounded-md","ring-4","ring-bg-card",3,"src"],[1,"flex","flex-col","items-center","lg:items-start","mt-4","lg:mt-0","lg:ml-8"],[1,"text-lg","font-bold","leading-none"],[1,"text-secondary"],[1,"hidden","lg:flex","h-8","mx-8","border-l-2"],[1,"hidden","lg:flex","items-center","mt-6","lg:mt-0","space-x-6"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-sm","font-medium","text-secondary"],[1,"flex","items-center","mt-8","mb-4","lg:m-0","lg:ml-auto","space-x-6"],[1,"cursor-pointer",3,"ngClass","click"],[1,"light","z-10","w-full"],[1,"flex","flex-auto","justify-center","w-full","mx-auto","pt-4","pb-6","sm:p-8"],["class","w-[92%] sm:w-[90%] flex flex-col items-start",4,"ngIf"],["class","w-[90%] flex flex-col items-start",4,"ngIf"],["requestContent",""],["catalogueContent",""],[1,"w-[92%]","sm:w-[90%]","flex","flex-col","items-start"],[4,"ngTemplateOutlet"],[1,"w-[90%]","flex","flex-col","items-start"],["multi","",1,"w-full","bg-transparent"],[2,"--tw-shadow","0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important",3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-bold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pb-8","pt-8","pr-4","pl-4","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[4,"ngIf"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["id","mat-select","required","",3,"formControlName"],["value","Natural"],["value","Jur\xeddico"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","spellcheck"],[1,"grid","w-full","pt-8","pr-4","pl-4","pb-12","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"sm:col-span-2","md:col-span-1"],["matInput","","required","",3,"type","formControlName","min"],[1,"flex","justify-center","sm:justify-start","sm:col-span-2","md:col-span-1","self-center","mt-2"],["mat-stroked-button","",1,"lg:ml-4",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf","ngIfElse"],["noSelectedPS",""],[1,"w-full","mt-10","mb-2","flex","justify-start","sm:justify-end","text-right"],["mat-raised-button","",1,"ml-4","mr-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[3,"value"],["tabindex","0",1,"mt-6","sm:col-span-4","elevation-shadow","overflow-auto","max-h-80","rounded-md"],["mat-table","","multiTemplateDataRows","",1,"w-full",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium font-bold",4,"matFooterRowDef","matFooterRowDefSticky"],[3,"matColumnDef"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","truncate",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0"],["mat-cell",""],["mat-footer-cell","",1,"truncate"],["mat-header-cell","","class","text-center w-10 pr-8 pl-8 md:w-auto md:pr-0 md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"text-center","w-10","pr-8","pl-8","md:w-auto","md:pr-0","md:pl-0"],["mat-cell","",1,"text-center"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","text-center pr-8 pl-8 md:pr-6 md:pl-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"text-center","pr-8","pl-8","md:pr-6","md:pl-0"],[1,"flex","justify-center","space-x-2"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-footer-cell","",1,"text-end"],["class","overflow-hidden space-x-2 flex",4,"ngIf"],[1,"overflow-hidden","space-x-2","flex"],[1,"flex","items-center","m-2"],[1,"mr-2","relative","flex","items-center","justify-center","overflow-hidden","border","rounded","w-32","h-32","flex-0"],[3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"m-4","text-secondary"],[3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"],["mat-footer-row","",1,"font-medium","font-bold"],[1,"flex","items-center","justify-center","mt-8","sm:col-span-4","overflow-auto","h-40","border-2","border-dashed","border-gray-300","rounded-md","text-2xl","md:text-3xl","font-semibold","pl-8","pr-8","tracking-tight"],[1,"flex","items-center","justify-center","h-140","w-full","border-2","border-dashed","border-gray-300","rounded-md","text-2xl","md:text-4xl","font-semibold","pl-8","pr-8","text-secondary","tracking-tight"]],template:function(n,o){1&n&&e.YNc(0,Je,39,20,"div",0),2&n&&e.Q6J("ngIf",o.merchant)},dependencies:[u.mk,u.sg,u.O5,u.tP,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.oH,c.sg,c.u,k.ey,Z.lW,f.pp,f.ib,f.yz,f.yK,b.Hw,x.TO,x.KE,x.hX,x.qo,E.Nt,j.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.mD,s.Ke,s.ge,s.ev,s.yh,s.XQ,s.Gk,s.Q2,B,u.H9],styles:["incoming-request table{width:100%}incoming-request tr.example-detail-row{height:0}incoming-request tr.example-element-row:not(.example-expanded-row):hover{background:whitesmoke}incoming-request tr.example-element-row:not(.example-expanded-row):active{background:#efefef}incoming-request .example-element-row td{border-bottom-width:0}incoming-request .elevation-shadow{box-shadow:0 0 3px #0000001a,0 1px 2px -1px #0000001a!important}\n"],encapsulation:2,data:{animation:[(0,_.X$)("detailExpand",[(0,_.SB)("collapsed",(0,_.oB)({height:"0px",minHeight:"0"})),(0,_.SB)("expanded",(0,_.oB)({height:"*"})),(0,_.eR)("expanded <=> collapsed",(0,_.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var Se=r(4128),R=r(9851),Ye=r(2834);const Pe=[{path:":merchantId",component:Ue,resolve:{merchant:(()=>{class t{constructor(n,o,a){this._merchantService=n,this._productServices=o,this._router=a}resolve(n,o){const a=n.params.merchantId;if(a&&"new"!==a)return console.log(a),(0,Se.D)([this._merchantService.getPartialMerchantById(a),this._productServices.getActiveProductServicesByMerchantId(a)]);this._router.navigate([""])}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(R.S),e.LFG(Ye.z),e.LFG(p.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let ke=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(Pe),C.m]}),t})();var Ee=r(9641),je=r(2627),Be=r(4290),Oe=r(9602),He=r(7238);function Le(t,i){if(1&t&&(e.ynx(0),e._UZ(1,"img",15),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",n.coverUrl,e.LSH)}}function $e(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",16),e._UZ(2,"mat-icon",17),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:photograph"))}function Ge(t,i){if(1&t&&(e.ynx(0),e._UZ(1,"img",18),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("src",n.logoUrl,e.LSH)}}function Me(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",19),e._UZ(2,"mat-icon",17),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:camera"))}const ze=function(t){return[t]};function We(t,i){if(1&t&&(e.TgZ(0,"div",4)(1,"fuse-card",5)(2,"div",6),e.YNc(3,Le,2,1,"ng-container",7),e.YNc(4,$e,3,1,"ng-container",7),e.qZA(),e.TgZ(5,"div",8)(6,"div",9),e.YNc(7,Ge,2,1,"ng-container",7),e.YNc(8,Me,3,1,"ng-container",7),e.qZA()(),e.TgZ(9,"div",10),e._uU(10),e.qZA(),e.TgZ(11,"div",11),e._uU(12),e.qZA(),e.TgZ(13,"div",12),e._UZ(14,"hr",13),e.TgZ(15,"button",14),e._uU(16," Visitar "),e.qZA()()()()),2&t){const n=i.$implicit;e.xp6(3),e.Q6J("ngIf",n.coverUrl),e.xp6(1),e.Q6J("ngIf",!n.coverUrl),e.xp6(3),e.Q6J("ngIf",n.logoUrl),e.xp6(1),e.Q6J("ngIf",!n.logoUrl),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.lnq("",n.address||"",", municipio ",n.city||"",", provincia ",n.state||"",""),e.xp6(3),e.Q6J("routerLink",e.VKq(9,ze,n._id))}}function Ke(t,i){if(1&t&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,We,17,11,"div",3),e.qZA()()),2&t){const n=i.ngIf,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",n)("ngForTrackBy",o.trackByFn)}}let Ve=(()=>{class t{constructor(n,o){this._merchantServices=n,this.store=o,this._unsubscribeAll=new h.x}ngOnInit(){this.merchants$=this._merchantServices.getPublicMerchants()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(n,o){return o.id||n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(R.S),e.Y36(q.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-public"]],decls:2,vars:3,consts:[["class","w-full h-full",4,"ngIf"],[1,"w-full","h-full"],[1,"flex","flex-wrap","justify-center","items-center","space-x-4","sm:space-x-6","w-full","h-full","p-4","sm:p-20"],["style","height: fit-content;",4,"ngFor","ngForOf","ngForTrackBy"],[2,"height","fit-content"],[1,"flex","flex-col","max-w-80","w-full","mt-4","sm:mt-6","filter-info"],["matTooltip","Cover",1,"flex","h-32"],[4,"ngIf"],[1,"flex","px-8"],["matTooltip","Logo",1,"p-1","w-24","h-24","flex","items-center","justify-center","rounded-xl","bg-gray-200","-mt-12"],[1,"text-2xl","font-semibold","leading-tight","text-center","px-2","mt-8"],[1,"text-secondary","leading-tight","text-center","px-2","mt-1"],[1,"flex","flex-col","px-8","pt-2","pb-6"],[1,"w-full","border-t","mt-8","mb-0"],["mat-button","","routerLinkActive","router-link-active",1,"px-6","mt-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"routerLink"],["alt","merchants cover",1,"object-fill",3,"src"],[1,"flex","w-full","items-center","justify-center","bg-gray-100"],[1,"icon-size-7",3,"svgIcon"],["alt","merchants logo",1,"rounded-xl",3,"src"],[1,"flex","items-center","justify-center"]],template:function(n,o){1&n&&(e.YNc(0,Ke,3,2,"div",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.merchants$))},dependencies:[p.rH,p.Od,u.sg,u.O5,Oe.y,Z.lW,b.Hw,He.gM,u.Ov],encapsulation:2}),t})();var Xe=r(3294),w=r(9784),et=r(6861),tt=r(7871),nt=r(7261),ot=r(8966),it=r(5453);function rt(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"button",3),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.rejectQuotation())}),e._uU(2," Rechazar "),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.acceptQuotation())}),e._uU(4," Aceptar "),e.qZA()()}}const ct=[{path:"",component:Ve},{path:"request/:requestId",component:je.d,resolve:{request:Be.N}},{path:"quotation/:quotationId",component:(()=>{class t{constructor(n,o,a,l,m,d){this._fuseConfirmationService=n,this._changeDetectorRef=o,this._quotationService=a,this._snackBar=l,this._dialog=m,this.store=d,this.selectedQuotation$=null,this.selectedQuotation=null,this._unsubscribeAll=new h.x}ngOnInit(){this.selectedQuotation$=this.store.select(et.$i),this.selectedQuotation$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedQuotation=n,console.log(n),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}acceptQuotation(){this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"\xbfEsta seguro que desea aceptar esta oferta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._quotationService.acceptQuotation(this.selectedQuotation._id).subscribe(a=>{this._snackBar.openFromComponent(w.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}})})})}rejectQuotation(){this._dialog.open(Xe.g,{data:{title:"Rechazar Oferta",message:"\xbfEst\xe1 seguro desea Rechazar esta Oferta ?",rejectedReason:"",rejectedReasonRequired:!1},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{void 0!==o&&this._quotationService.rejectQuotation(this.selectedQuotation._id,o.reason).subscribe(l=>{this._snackBar.openFromComponent(w.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:l.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}})})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(I.R),e.Y36(e.sBO),e.Y36(tt.D),e.Y36(nt.ux),e.Y36(ot.uw),e.Y36(q.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["quotation-public-detail"]],decls:3,vars:1,consts:[[1,"w-full","flex","flex-col"],["class","flex items-center justify-around  md:justify-center  border-t px-8 py-4",4,"ngIf"],[1,"flex","items-center","justify-around","md:justify-center","border-t","px-8","py-4"],["color","warn","mat-stroked-button","",1,"mr-4",3,"click"],["color","primary","mat-flat-button","",1,"ml-4",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"quotation-details"),e.YNc(2,rt,5,0,"div",1),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf","Nueva"===o.selectedQuotation.status))},dependencies:[u.O5,Z.lW,it.i],encapsulation:2,changeDetection:0}),t})(),resolve:{request:Ee.x}}];let st=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(ct),C.m,F.o,ke,Q.K]}),t})()}}]);