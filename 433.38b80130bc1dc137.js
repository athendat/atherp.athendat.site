"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[433],{4062:(k,S,o)=>{o.d(S,{i:()=>h});class h{constructor(a){this.slug=this._slugGenerator(a)}_slugGenerator(a){return a.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("  "," ").replace(" ","-")}}},9784:(k,S,o)=>{o.d(S,{h:()=>f});var h=o(7261),m=o(5e3),a=o(9808),d=o(2494),g=o(5245);function s(l,_){if(1&l&&m._UZ(0,"mat-icon",3),2&l){const p=m.oxw();m.Q6J("svgIcon",p.svgIcon)}}let f=(()=>{class l{constructor(p){this.data=p,this.message="",this.title="",this.svgIcon="",this.type="success",this.appearance="fill",this.message=p.message,this.title=p.title,this.svgIcon=p.svgIcon,this.type=p.type,p.appearance&&(this.appearance=p.appearance)}}return l.\u0275fac=function(p){return new(p||l)(m.Y36(h.qD))},l.\u0275cmp=m.Xpm({type:l,selectors:[["ath-snackbar"]],decls:5,vars:5,consts:[[3,"type","appearance"],["class","icon-size-5","fuseAlertIcon","",3,"svgIcon",4,"ngIf"],["fuseAlertTitle",""],["fuseAlertIcon","",1,"icon-size-5",3,"svgIcon"]],template:function(p,x){1&p&&(m.TgZ(0,"fuse-alert",0),m.YNc(1,s,1,1,"mat-icon",1),m.TgZ(2,"span",2),m._uU(3),m.qZA(),m._uU(4),m.qZA()),2&p&&(m.Q6J("type",x.type)("appearance",x.appearance),m.xp6(1),m.Q6J("ngIf",x.svgIcon),m.xp6(2),m.Oqu(x.title),m.xp6(1),m.hij(" ",x.message,"\n"))},dependencies:[a.O5,d.W,g.Hw],styles:[".snack-alert-success[_ngcontent-%COMP%]{background-color:#39b54a!important;color:#fff}.snack-alert-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important;color:#fff}.snack-alert-error[_ngcontent-%COMP%]{background-color:#ff2828!important;color:#fff}"]}),l})()},2491:(k,S,o)=>{o.d(S,{L:()=>m});var h=o(3075);class m{static isEmptyInputValue(d){return null==d||0===d.length}static mustMatch(d,g){return s=>{const f=s.get(d),l=s.get(g);if(!f||!l||(l.hasError("mustMatch")&&(delete l.errors.mustMatch,l.updateValueAndValidity()),this.isEmptyInputValue(l.value)||f.value===l.value))return null;const _={mustMatch:"Las contrase\xf1a no coinciden."};return l.setErrors(_),_}}static strongPassWord(d,g,s,f,l){return _=>{const p=_.value;if(!p)return null;const x=!d||/[A-Z]+/.test(p),F=!g||/[a-z]+/.test(p),C=!s||/[0-9]+/.test(p),y=!f||!/^[a-zA-Z0-9]+$/.test(p);return x&&F&&C&&y&&p.length>=l?null:{password:"La contrase\xf1a no cumple con los est\xe1ndares de seguridad requeridos"}}}static onlyNumber(d){return g=>{const s=g.get(d);if(!s||!s.value||(s.hasError("onlyNumber")&&(delete s.errors.mustMatch,s.updateValueAndValidity()),/^[a-zA-Z0-9]+$/.test(s.value.toString())))return null;const l={onlyNumber:"Solo se admiten n\xfameros."};return s.setErrors(l),l}}static strongPasWordPattern(){return h.kI.pattern(/((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)}static emailPattern(){return h.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")}static onlyNumbersPattern(){return h.kI.pattern("^[0-9]*$")}static onlyAlphabetsWithAccentPattern(){return h.kI.pattern("^[a-zA-Z \xe1\xe9\xed\xf3\xfa\xf1\xfc]*$")}static onlyAlphabetsPattern(){return h.kI.pattern("^[a-zA-Z ]*$")}static validateIdNumber(){return d=>{if(!d)return null;let g=d.value;if(!g)return null;void 0!==d.value.idNumber&&(g=d.value.idNumber);const s=parseInt(g.substring(0,2),10),f=parseInt(g.substring(2,4),10)-1,l=parseInt(g.substring(4,6),10),_=new Date(s,f,l);if(_.getFullYear().toString().substring(2,4)===s.toString()&&_.getMonth()===f&&_.getDate()===l)return null;const x={validateIdNumber:"El n\xfamero de identidad introducido es incorrecto"};return d.setErrors(x),x}}static validFullName(d){return g=>{const s=g.get(d);if(!s||!d||(s.hasError("validFullName")&&(delete s.errors.validFullName,s.updateValueAndValidity()),this._isEmptyInputValue(s.value))||s.value.trim().split(" ").length>1)return null;const f={validFullName:"El nombre completo deber\xe1 tener al menos un nombre y un apellido"};return s.setErrors(f),f}}static _isEmptyInputValue(d){return null==d||0===d.length}}},433:(k,S,o)=>{o.r(S),o.d(S,{ProductServiceModule:()=>ze});var h=o(5357),m=o(6338),a=o(3075),d=o(6087),g=o(4847),s=o(7579),f=o(6451),l=o(2722),_=o(3900),p=o(4004),x=o(3844);class F{}var C=o(5620);const y=t=>t.productServices,O=((0,C.P1)(y,t=>t.productService),(0,C.P1)(y,t=>t.productServices));var N=o(9784),z=o(6428),D=o(8966),R=o(9646),$=o(5119),V=o(4787),W=o(1910),q=o(4062),G=o(2491),e=o(5e3),E=o(1683),J=o(520),A=o(8505),K=o(5714),j=o(2340),T=o(8383),H=o(1235);const I=j.N.API_URL;let Q=(()=>{class t{constructor(r,i,u){this._httpClient=r,this.rolesService=i,this.store=u}getProductServices(r=0,i=20,u="name",v="asc",c=""){const P=(new J.LE).append("page",r).append("size",i).append("sort",u).append("order",v).append("search",c);return this._httpClient.get(`${I}/products-services/`,{params:P}).pipe((0,A.b)(U=>{this.store.dispatch((0,K.Jr)({pagination:U.pagination})),this.store.dispatch((0,T.C5)({productServices:U.dataArr}))}))}getActiveProductServices(){return this._httpClient.get(`${I}/products-services/active`).pipe((0,A.b)(r=>{this.store.dispatch((0,T.C5)({productServices:r.dataArr}))}))}createProductService(r){return this._httpClient.post(`${I}/products-services`,r).pipe((0,A.b)(i=>{this.store.dispatch((0,T.QI)({productService:i.data}))}))}updateProductService(r){return this._httpClient.patch(`${I}/products-services/${r._id}`,r).pipe((0,A.b)(i=>{this.store.dispatch((0,T.pF)({productService:i.data}))}))}deleteProductService(r){return this._httpClient.delete(`${I}/products-services/${r}`).pipe((0,A.b)(()=>{this.store.dispatch((0,T.dY)({id:r}))}))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(J.eN),e.LFG(H.cM),e.LFG(C.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=o(7261),Z=o(9808),X=o(508),M=o(7423),w=o(5245),b=o(7322),ee=o(7531),te=o(4107),re=o(2368);function oe(t,n){1&t&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar producto o servicio"),e.qZA())}function ne(t,n){1&t&&(e.TgZ(0,"h2",7),e._uU(1,"Editar producto o servicio"),e.qZA())}function ie(t,n){1&t&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del producto o servicio"),e.qZA())}function ae(t,n){if(1&t&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e.ynx(4),e.TgZ(5,"div",12)(6,"mat-label",13),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.BQk(),e.ynx(10),e.TgZ(11,"div",12)(12,"mat-label",13),e._uU(13,"Descripci\xf3n"),e.qZA(),e.TgZ(14,"div",14),e._uU(15),e.qZA()(),e.BQk(),e.qZA()()()()),2&t){const r=e.oxw();e.xp6(9),e.Oqu(r.data.productService.name),e.xp6(6),e.Oqu(r.data.productService.description)}}function ce(t,n){if(1&t&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&t){const r=n.$implicit;e.Q6J("value",r._id),e.xp6(1),e.hij(" ",r.name," ")}}function se(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un Negocio. "),e.qZA())}function le(t,n){if(1&t&&(e.TgZ(0,"div",19)(1,"mat-form-field",20)(2,"mat-label"),e._uU(3,"Negocio"),e.qZA(),e.TgZ(4,"mat-select",21),e.YNc(5,ce,2,2,"mat-option",44),e.qZA(),e.YNc(6,se,2,0,"mat-error",6),e.TgZ(7,"mat-hint"),e._uU(8,"Seleccione el negocio al cual pertenece el producto o servicio"),e.qZA()()()),2&t){const r=n.ngIf,i=e.oxw(2);e.xp6(4),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",r)("ngForTrackBy",i.trackByFn),e.xp6(1),e.Q6J("ngIf",i.productServiceForm.get("merchantId").hasError("required"))}}function ue(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el tipo. "),e.qZA())}function de(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio es obligatorio. "),e.qZA())}function me(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio debe contener entre 3 y 255 caracteres. "),e.qZA())}function pe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la moneda. "),e.qZA())}function ge(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del producto es obligatorio. "),e.qZA())}function ve(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe de ser mayor que 0. "),e.qZA())}function fe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe contener solo n\xfameros. "),e.qZA())}function _e(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El margen comercial del producto es obligatorio "),e.qZA())}function he(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo de estar entre 1 y 10 donde 1 representa un 100% de ganancias y 10 un 1000% "),e.qZA())}function xe(t,n){1&t&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 10 donde 10 representa un 1000%"),e.qZA())}function Ze(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El impuesto del producto es obligatorio "),e.qZA())}function Se(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo de estar entre 0 y 1 "),e.qZA())}function Ce(t,n){1&t&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 1"),e.qZA())}function Ae(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El descuento del producto es obligatorio "),e.qZA())}function Te(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo de estar entre 0 y 1 "),e.qZA())}function Ie(t,n){1&t&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 1"),e.qZA())}function be(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del producto es obligatorio "),e.qZA())}function Pe(t,n){if(1&t&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17),e.YNc(3,le,9,4,"div",18),e.ALo(4,"async"),e.TgZ(5,"div",19)(6,"mat-form-field",20)(7,"mat-label"),e._uU(8,"Tipo"),e.qZA(),e.TgZ(9,"mat-select",21)(10,"mat-option",22),e._uU(11," Producto "),e.qZA(),e.TgZ(12,"mat-option",22),e._uU(13," Servicio "),e.qZA()(),e.YNc(14,ue,2,0,"mat-error",6),e.TgZ(15,"mat-hint"),e._uU(16,"Especifique si es producto o servicio"),e.qZA()()(),e.TgZ(17,"div",19)(18,"mat-form-field",20)(19,"mat-label"),e._uU(20,"Nombre"),e.qZA(),e._UZ(21,"input",23),e.YNc(22,de,2,0,"mat-error",6),e.YNc(23,me,2,0,"mat-error",6),e.qZA()(),e.TgZ(24,"div",19)(25,"mat-form-field",20)(26,"mat-label"),e._uU(27,"Moneda por defecto"),e.qZA(),e.TgZ(28,"mat-select",21)(29,"mat-option",24),e._uU(30,"CUP"),e.qZA(),e.TgZ(31,"mat-option",25),e._uU(32,"MLC"),e.qZA(),e.TgZ(33,"mat-option",26),e._uU(34,"USD"),e.qZA(),e.TgZ(35,"mat-option",27),e._uU(36,"MXN"),e.qZA()(),e._UZ(37,"mat-icon",28),e.YNc(38,pe,2,0,"mat-error",6),e.qZA()(),e.TgZ(39,"mat-form-field",19)(40,"mat-label"),e._uU(41,"Costo"),e.qZA(),e.TgZ(42,"span",29),e._uU(43,"$"),e.qZA(),e._UZ(44,"input",30,31),e.YNc(46,ge,2,0,"mat-error",6),e.YNc(47,ve,2,0,"mat-error",6),e.YNc(48,fe,2,0,"mat-error",6),e.qZA(),e.TgZ(49,"mat-form-field",19)(50,"mat-label"),e._uU(51,"Margen comercial"),e.qZA(),e.TgZ(52,"span",29),e._uU(53,"%"),e.qZA(),e._UZ(54,"input",32,33),e.YNc(56,_e,2,0,"mat-error",6),e.YNc(57,he,2,0,"mat-error",6),e.YNc(58,xe,2,0,"mat-hint",6),e.qZA(),e.TgZ(59,"mat-form-field",19)(60,"mat-label"),e._uU(61,"Impuesto"),e.qZA(),e.TgZ(62,"span",29),e._uU(63,"%"),e.qZA(),e._UZ(64,"input",34,35),e.YNc(66,Ze,2,0,"mat-error",6),e.YNc(67,Se,2,0,"mat-error",6),e.YNc(68,Ce,2,0,"mat-hint",6),e.qZA(),e.TgZ(69,"mat-form-field",19)(70,"mat-label"),e._uU(71,"Descuento"),e.qZA(),e.TgZ(72,"span",29),e._uU(73,"%"),e.qZA(),e._UZ(74,"input",34,36),e.YNc(76,Ae,2,0,"mat-error",6),e.YNc(77,Te,2,0,"mat-error",6),e.YNc(78,Ie,2,0,"mat-hint",6),e.qZA(),e.TgZ(79,"mat-form-field",19)(80,"mat-label"),e._uU(81,"Precio"),e.qZA(),e.TgZ(82,"span",29),e._uU(83,"$"),e.qZA(),e._UZ(84,"input",37),e.YNc(85,be,2,0,"mat-error",6),e.qZA(),e.TgZ(86,"div",38)(87,"mat-label"),e._uU(88,"Estado"),e.qZA(),e.TgZ(89,"mat-slide-toggle",39),e._uU(90," Activo "),e.qZA()(),e.TgZ(91,"div",40)(92,"mat-form-field",41)(93,"mat-label"),e._uU(94,"Descripci\xf3n del Producto o servicio"),e.qZA(),e._UZ(95,"mat-icon",42)(96,"textarea",43),e.qZA()()()()()),2&t){const r=e.MAs(45),i=e.MAs(55),u=e.MAs(65),v=e.MAs(75),c=e.oxw();e.xp6(2),e.Q6J("formGroup",c.productServiceForm)("autocomplete","off"),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,46,c.merchants$)),e.xp6(6),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","Producto"),e.xp6(2),e.Q6J("value","Servicio"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("type").hasError("required")),e.xp6(7),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del producto o servicio"),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("name").hasError("maxlength")||c.productServiceForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("currency").hasError("required")),e.xp6(6),e.Q6J("formControlName","cost")("min",1)("placeholder","Costo del producto o servicio"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("min")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("pattern")),e.xp6(6),e.Q6J("formControlName","margin"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("margin").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("margin").hasError("min")||c.productServiceForm.get("margin").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("margin").valid),e.xp6(6),e.Q6J("formControlName","taxPercent"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").hasError("min")||c.productServiceForm.get("taxPercent").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").valid),e.xp6(6),e.Q6J("formControlName","discount"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("discount").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("discount").hasError("min")||c.productServiceForm.get("discount").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("discount").valid),e.xp6(6),e.Q6J("formControlName","price")("value",u.value*r.value-v.value*r.value+i.value*r.value),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("price").hasError("required")),e.xp6(4),e.Q6J("value",!0)("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3)}}const B=function(t){return{"cursor-not-allowed":t}};function ye(t,n){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"button",47),e.NdJ("click",function(){e.CHM(r);const u=e.oxw(2);return e.KtG(u.updateProductService())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&t){const r=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",r.productServiceForm.invalid)("ngClass",e.VKq(4,B,r.productServiceForm.invalid))}}function Ue(t,n){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"button",47),e.NdJ("click",function(){e.CHM(r);const u=e.oxw(2);return e.KtG(u.createProductService())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&t){const r=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",r.productServiceForm.invalid)("ngClass",e.VKq(4,B,r.productServiceForm.invalid))}}function ke(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",45),e.ynx(2),e.TgZ(3,"button",46),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,ye,3,6,"ng-container",6),e.YNc(6,Ue,3,6,"ng-container",6),e.qZA(),e.BQk()),2&t){const r=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===r.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===r.data.dialogMode)}}let Fe=(()=>{class t{constructor(r,i,u,v,c,P,U,Re){this.data=r,this._activatedRoute=i,this._changeDetectorRef=u,this._formBuilder=v,this._fuseConfirmationService=c,this._hrmProductServicesService=P,this._snackBar=U,this.store=Re,this.dialogMode="view",this.user$=(0,R.of)(null),this.merchants$=null,this._unsubscribeAll=new s.x}ngOnInit(){this.user$=this.store.select(V.rk),this.user$.subscribe(r=>{this.user=r,this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(W.UV),this.productServiceForm=this._formBuilder.group({_id:[""],active:[!1],merchantId:["",[a.kI.required]],userId:[this.user._id,[a.kI.required]],type:["",[a.kI.required]],currency:[{value:"CUP",disabled:!0},[a.kI.required]],cost:[0,[a.kI.required,a.kI.min(1),G.L.onlyNumbersPattern()]],margin:[0,[a.kI.min(1),a.kI.max(10),a.kI.maxLength(9)]],taxPercent:[0,[a.kI.min(0),a.kI.max(1),a.kI.maxLength(9)]],discount:[0,[a.kI.min(0),a.kI.max(1),a.kI.maxLength(9)]],price:[{disabled:!0,value:0},[a.kI.required,a.kI.min(0),a.kI.max(999999999),a.kI.maxLength(9)]],name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],slug:[""],description:["",[a.kI.maxLength(1e3)]]}),"edit"===this.data.dialogMode&&(this.productServiceForm.patchValue(this.data.productService),this.productServiceForm.get("merchantId").setValue(this.data.productService.merchantId._id))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){let r=this.productServiceForm.getRawValue();r.price=r.taxPercent*r.cost-r.discount*r.cost+r.margin*r.cost,r=(0,$.Z)(r,"_id"),r.slug=new q.i(r.name).slug,this._fuseConfirmationService.open({title:"Crear Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._hrmProductServicesService.createProductService(r).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateProductService(){const r=this.productServiceForm.getRawValue();r.price=r.taxPercent*r.cost-r.discount*r.cost+r.margin*r.cost,r.slug=new q.i(r.name).slug,this._fuseConfirmationService.open({title:"Actualizar Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._hrmProductServicesService.updateProductService(r).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(r,i){return i.id||r}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(D.WI),e.Y36(h.gz),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(E.R),e.Y36(Q),e.Y36(Y.ux),e.Y36(C.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ser-detail"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"flex","sm:items-center"],[1,"min-w-56","font-semibold"],[1,"leading-6"],[1,"w-full","overflow-hidden"],[1,"pt-5"],[1,"grid","grid-cols-2","gap-y-3","gap-x-4","w-full","mt-1",3,"formGroup","autocomplete"],["class","col-span-2 sm:col-span-1",4,"ngIf"],[1,"col-span-2","sm:col-span-1"],[1,"w-full"],["required","",3,"formControlName"],[3,"value"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","min","placeholder"],["costoField",""],["matInput","","type","number","step","0.01","min","0","max","10","maxlength","9","required","",3,"formControlName"],["margenField",""],["type","number","matInput","","step","0.01","min","0","max","1","maxlength","9","required","",3,"formControlName"],["impuestoField",""],["descuentoField",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","value"],[1,"col-span-2","sm:col-span-1","flex","flex-col"],[1,"pt-4","mb-2",3,"value","color","formControlName"],[1,"col-span-2","pt-4","sm:col-span-2"],[1,"w-full","fuse-mat-textarea","flex-auto"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","maxlength"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,oe,2,0,"h2",2),e.YNc(4,ne,2,0,"h2",2),e.YNc(5,ie,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,ae,16,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,Pe,97,48,"div",5),e.BQk(),e.qZA(),e.YNc(11,ke,7,3,"ng-container",6),e.qZA()),2&r&&(e.xp6(3),e.Q6J("ngIf",null===i.data.productService._id&&"add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.productService._id&&"edit"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.productService._id&&"view"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[Z.mk,Z.sg,Z.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.qQ,a.Fd,a.sg,a.u,X.ey,M.lW,D.ZT,w.Hw,b.TO,b.KE,b.bx,b.hX,b.qo,ee.Nt,te.gD,re.Rr,Z.Ov],encapsulation:2,changeDetection:0}),t})();var Ne=o(393);function De(t,n){1&t&&(e.ynx(0),e._UZ(1,"mat-icon",36),e.BQk()),2&t&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Qe(t,n){1&t&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&t&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const qe=function(t){return[t]};function Ee(t,n){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"div",29)(2,"div",30),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA(),e.TgZ(6,"div",30),e._uU(7),e.qZA(),e.TgZ(8,"div",31),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",32),e.YNc(12,De,2,1,"ng-container",19),e.YNc(13,Qe,2,1,"ng-container",19),e.qZA(),e.TgZ(14,"div",33)(15,"button",34),e.NdJ("click",function(){const v=e.CHM(r).$implicit,c=e.oxw(4);return e.KtG(c.editProductService(v))}),e._UZ(16,"mat-icon",35),e.qZA(),e.TgZ(17,"button",34),e.NdJ("click",function(){const v=e.CHM(r).$implicit,c=e.oxw(4);return e.KtG(c.deleteProductService(v))}),e._UZ(18,"mat-icon",35),e.qZA()()(),e.BQk()}if(2&t){const r=n.$implicit;e.xp6(3),e.hij(" ",r.merchantId.name," "),e.xp6(2),e.hij(" ",r.name," "),e.xp6(2),e.hij(" ",r.type," "),e.xp6(2),e.hij(" ",e.xi3(10,8,r.cost,e.VKq(11,qe,r.currency+" "))," "),e.xp6(3),e.Q6J("ngIf",r.active),e.xp6(1),e.Q6J("ngIf",!r.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Je(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Ee,19,13,"ng-container",28),e.BQk()),2&t){const r=n.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",r)("ngForTrackBy",i.trackByFn)}}const Ye=function(t){return{"pointer-events-none":t}},Me=function(){return[10,25,50,100]};function we(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div"),e._uU(4," Negocio "),e.qZA(),e.TgZ(5,"div",24),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",24),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",24),e._uU(10," Costo "),e.qZA(),e.TgZ(11,"div",25),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",26),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,Je,2,2,"ng-container",19),e.ALo(16,"async"),e._UZ(17,"mat-paginator",27),e.qZA(),e.BQk()),2&t){const r=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","type"),e.xp6(2),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,11,r.productServices$)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Ye,r.isLoading))("length",r.pagination.length)("pageIndex",r.pagination.page)("pageSize",r.pagination.size)("pageSizeOptions",e.DdM(15,Me))("showFirstLastButtons",!0)}}function Be(t,n){if(1&t&&(e.ynx(0),e.YNc(1,we,18,16,"ng-container",21),e.BQk()),2&t){const r=n.ngIf;e.oxw();const i=e.MAs(30);e.xp6(1),e.Q6J("ngIf",r.length>0)("ngIfElse",i)}}function Le(t,n){1&t&&(e.TgZ(0,"div",38),e._uU(1,"No ha creado ning\xfan producto o servicio a\xfan!"),e.qZA())}const Oe=[{path:"",component:(()=>{class t{constructor(r,i,u,v,c,P){this._changeDetectorRef=r,this._fuseConfirmationService=i,this._productServiceService=u,this._snackBar=v,this.dialog=c,this.store=P,this.merchantId="",this.productService=new F,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new a.NI,this._unsubscribeAll=new s.x}ngOnInit(){this.productServices$=this.store.select(O),this.store.select(z.B).pipe((0,l.R)(this._unsubscribeAll)).subscribe(r=>{this.pagination=r,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(setTimeout(()=>{this._sort.sort({id:"active",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck()},2e3),this._sort.sortChange.pipe((0,l.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,f.T)(this._sort.sortChange,this._paginator.page).pipe((0,_.w)(()=>(this.isLoading=!0,this._productServiceService.getProductServices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,p.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){this._openDialog(this.productService,"add")}editProductService(r){this._openDialog(r,"edit")}deleteProductService(r){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar el departamento ${r.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._productServiceService.deleteProductService(r._id).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}showFlashMessage(r){this.flashMessage=r,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(r,i){return i.id||r}_openDialog(r,i){this.dialog.open(Fe,{width:"600px",height:"98%",data:{productService:r,dialogMode:i},panelClass:"ath-dialog-panel"})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(e.sBO),e.Y36(E.R),e.Y36(Q),e.Y36(Y.ux),e.Y36(D.uw),e.Y36(C.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hrm-productServices"]],viewQuery:function(r,i){if(1&r&&(e.Gf(d.NW,5),e.Gf(g.YE,5)),2&r){let u;e.iGM(u=e.CRH())&&(i._paginator=u.first),e.iGM(u=e.CRH())&&(i._sort=u.first)}},decls:31,vars:7,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent","overflow-hidden","sm:overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noProductServices",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","productServices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","text-center","md:block",3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","productServices-table","md:px-8"],[1,"truncate"],[1,""],[1,"hidden","text-center","md:block"],[1,"flex","flex-col","justify-center","gap-2","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Productos o Servicio"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Productos o Servicio "),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return i.createProductService()}),e._UZ(22,"mat-icon",15),e.TgZ(23,"span",16),e._uU(24,"Nuevo"),e.qZA()()()(),e.TgZ(25,"div",17)(26,"div",18),e.YNc(27,Be,2,2,"ng-container",19),e.ALo(28,"async"),e.YNc(29,Le,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&r&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(28,5,i.productServices$)))},dependencies:[h.yS,Z.mk,Z.sg,Z.O5,Ne.PQ,M.lW,w.Hw,d.NW,g.YE,g.nU,Z.Ov,Z.H9],encapsulation:2,data:{animation:x.L},changeDetection:0}),t})(),resolve:{prodS:(()=>{class t{constructor(r){this._productServicesService=r}resolve(r,i){return this._productServicesService.getProductServices()}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(Q))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let ze=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(Oe),m.m]}),t})()}}]);