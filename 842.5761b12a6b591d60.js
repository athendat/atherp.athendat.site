"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[842],{5842:(_o,J,m)=>{m.r(J),m.d(J,{CrmModule:()=>mo});var h=m(5357),K=m(6338),V=m(2004),r=m(3075),F=m(7579),Q=m(9300),g=m(2722),D=m(7489),E=m(814),w=m(4787),l=m(2491),x=m(9784),v=m(4062),W=m(1910),C=m(8966),L=m(9646),X=m(8372),ee=m(8675),B=m(3900),te=m(5119),e=m(5e3),Y=m(1158),oe=m(3967),Z=m(5620),p=m(9808),R=m(1079),A=m(508),y=m(7423),q=m(5245),_=m(7322),S=m(7531),b=m(4107),M=m(7238);function ne(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar contacto"),e.qZA())}function re(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Editar contacto"),e.qZA())}function ie(o,i){if(1&o&&(e.TgZ(0,"mat-option",15)(1,"div",16),e._uU(2),e.qZA()()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(2),e.gL8(" ",t.name," ",t.lastname1," ",t.lastname2," | ",t.phoneNumbers[0].phoneNumber," | ",t.emails[0].email," | ",t.idNumber," ")}}function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9),e._UZ(2,"input",10)(3,"mat-icon",11),e.TgZ(4,"mat-autocomplete",12,13),e.NdJ("optionSelected",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.fillContactForm(a))}),e.YNc(6,ie,3,7,"mat-option",14),e.ALo(7,"async"),e.qZA()()()}if(2&o){const t=e.MAs(5),n=e.oxw();e.xp6(2),e.Q6J("formControl",n.searchInputControl)("matAutocomplete",t)("maxlength",255)("placeholder","Busque por los campos, seleccione y rellene el formulario"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,7,n.filteredContacts))}}function se(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function ce(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function me(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function le(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function ue(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function ge(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function pe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function de(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function _e(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function he(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto es obligatorio. "),e.qZA())}function fe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto debe contener entre 3 y 255 caracteres. "),e.qZA())}function xe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function Ce(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function ve(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function Ze(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",15)(2,"span",43),e._UZ(3,"span",45),e.TgZ(4,"span",46),e._uU(5),e.qZA(),e.TgZ(6,"span",47),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function be(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function Ie(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function Te(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function ke(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.qZA())}const P=function(o){return{"mt-6":o}};function Fe(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",31),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,P,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ae(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",39)(2,"mat-form-field",40),e.YNc(3,ve,2,0,"mat-label",6),e._UZ(4,"input",41),e.TgZ(5,"mat-select",42)(6,"mat-select-trigger")(7,"span",43)(8,"span",44),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",15)(11,"span",43),e._UZ(12,"span",45),e.TgZ(13,"span",46),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",47),e._uU(17),e.qZA()()(),e.YNc(18,Ze,8,3,"ng-container",29),e.qZA(),e.YNc(19,be,2,0,"mat-error",6),e.YNc(20,Ie,2,0,"mat-error",6),e.YNc(21,Te,2,0,"mat-error",6),e.YNc(22,ke,2,0,"mat-error",6),e.qZA(),e.YNc(23,Fe,4,4,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=i.$implicit,n=i.index,a=i.first,c=i.last,s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.contactForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,18,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("required")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function ye(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function qe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function Ne(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio "),e.qZA())}function Ue(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",31),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,P,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Je(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",50)(2,"mat-form-field",40),e.YNc(3,ye,2,0,"mat-label",6),e._UZ(4,"mat-icon",26)(5,"input",51),e.YNc(6,qe,2,0,"mat-error",6),e.YNc(7,Ne,2,0,"mat-error",6),e.qZA(),e.YNc(8,Ue,4,4,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=i.$implicit,n=i.first,a=i.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function Qe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function De(o,i){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ee(o,i){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}const we=function(o,i){return{"mt-8":o,"mt-4":i}};function Le(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"form",19)(3,"span",20),e._uU(4,"Informaci\xf3n General "),e.qZA(),e.TgZ(5,"div",21)(6,"div",22)(7,"mat-form-field",23)(8,"mat-label"),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",24),e.YNc(11,se,2,0,"mat-error",6),e.YNc(12,ce,2,0,"mat-error",6),e.YNc(13,me,2,0,"mat-error",6),e.qZA()(),e.TgZ(14,"div",22)(15,"mat-form-field",23)(16,"mat-label"),e._uU(17,"Primer Apellido"),e.qZA(),e._UZ(18,"input",25),e.YNc(19,le,2,0,"mat-error",6),e.YNc(20,ue,2,0,"mat-error",6),e.YNc(21,ge,2,0,"mat-error",6),e.qZA()(),e.TgZ(22,"div",22)(23,"mat-form-field",23)(24,"mat-label"),e._uU(25,"Segundo Apellido"),e.qZA(),e._UZ(26,"input",25),e.YNc(27,pe,2,0,"mat-error",6),e.YNc(28,de,2,0,"mat-error",6),e.YNc(29,_e,2,0,"mat-error",6),e.qZA()(),e.TgZ(30,"div",22)(31,"mat-form-field",23)(32,"mat-label"),e._uU(33,"Cargo"),e.qZA(),e._UZ(34,"input",25),e.YNc(35,he,2,0,"mat-error",6),e.YNc(36,fe,2,0,"mat-error",6),e.qZA()(),e.TgZ(37,"div",22)(38,"mat-form-field",23)(39,"mat-label"),e._uU(40,"N\xfamero de identidad"),e.qZA(),e._UZ(41,"mat-icon",26)(42,"input",27),e.YNc(43,xe,2,0,"mat-error",6),e.YNc(44,Ce,2,0,"mat-error",6),e.qZA()()(),e.TgZ(45,"span",20),e._uU(46,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(47,"div",21)(48,"div",22)(49,"div",28),e.YNc(50,Ae,24,20,"ng-container",29),e.qZA(),e.TgZ(51,"div",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(52,"mat-icon",31),e.TgZ(53,"span",32),e._uU(54,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(55,"div",22)(56,"div",28),e.YNc(57,Je,9,7,"ng-container",29),e.qZA(),e.TgZ(58,"div",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(59,"mat-icon",31),e.TgZ(60,"span",32),e._uU(61,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(62,"span",20),e._uU(63,"Domicilio"),e.qZA(),e.TgZ(64,"div",21)(65,"div",22)(66,"mat-form-field",23)(67,"mat-label"),e._uU(68,"Direcci\xf3n"),e.qZA(),e._UZ(69,"mat-icon",26)(70,"input",33),e.YNc(71,Qe,2,0,"mat-error",6),e.qZA()(),e.TgZ(72,"div",22)(73,"mat-form-field",23)(74,"mat-label"),e._uU(75,"Provincia"),e.qZA(),e.TgZ(76,"mat-select",34),e.YNc(77,De,2,2,"mat-option",35),e.qZA(),e._UZ(78,"mat-icon",36),e.qZA()(),e.TgZ(79,"div",22)(80,"mat-form-field",37)(81,"mat-label"),e._uU(82,"Municipio"),e.qZA(),e.TgZ(83,"mat-select",34),e.YNc(84,Ee,2,2,"mat-option",35),e.qZA(),e._UZ(85,"mat-icon",36),e.qZA()(),e.TgZ(86,"div",22)(87,"mat-form-field",37)(88,"mat-label"),e._uU(89,"Pa\xeds"),e.qZA(),e.TgZ(90,"mat-select",34)(91,"mat-option",38),e._uU(92,"Cuba"),e.qZA()(),e._UZ(93,"mat-icon",36),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(60,we,"add"!==t.data.dialogMode,"add"===t.data.dialogMode))("formGroup",t.contactForm)("autocomplete","off"),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("maxlength")||t.contactForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","charge")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("charge")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("maxlength")||t.contactForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("pattern")),e.xp6(6),e.Q6J("ngForOf",t.contactForm.get("phoneNumbers").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",t.contactForm.get("emails").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("address").hasError("maxlength")||t.contactForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",t.states)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",t.cities)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe")}}const O=function(o){return{"cursor-not-allowed":o}};function Be(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateContact())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.contactForm.invalid)("ngClass",e.VKq(4,O,t.contactForm.invalid))}}function Ye(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createContact())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.contactForm.invalid)("ngClass",e.VKq(4,O,t.contactForm.invalid))}}function Re(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",53),e.ynx(2),e.TgZ(3,"button",54),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Be,3,6,"ng-container",6),e.YNc(6,Ye,3,6,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Se=(()=>{class o{constructor(t,n,a,c,s,d,u){this.data=t,this._dialogRef=n,this._changeDetectorRef=a,this._formBuilder=c,this._locationService=s,this._contactService=d,this.store=u,this.dialogMode="view",this.cities=[],this.user$=(0,L.of)(null),this.states=[],this.statesCodes=[],this.searchInputControl=new r.p4,this._unsubscribeAll=new F.x}ngOnInit(){this.user$=this.store.select(w.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.filteredContacts=this.searchInputControl.valueChanges.pipe((0,g.R)(this._unsubscribeAll),(0,X.b)(300),(0,ee.O)(""),(0,B.w)(t=>t&&t.length>5?this._contactService.searchContacts(t):(0,L.of)([]))),this.contactForm=this._formBuilder.group({_id:[""],merchantId:["000000000000000000000000",[r.kI.required]],userId:[this.user._id,[r.kI.required]],name:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[r.kI.maxLength(11),r.kI.minLength(11),l.L.onlyNumbersPattern()]],charge:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[r.kI.minLength(3),r.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0}],state:[""],city:[""]}),this.contactForm.get("state").valueChanges.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this.fillForm(this.data.dialogMode,this.data.contact)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[r.kI.required,r.kI.email,r.kI.maxLength(255)]]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[r.kI.required]],phoneNumber:["",[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}fillContactForm(t){const n=t.option.value;this.contactForm.patchValue(n),this.contactForm.get("merchantId").setValue(n.merchantId._id),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear();const a=[];n.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[r.kI.required,r.kI.email,r.kI.maxLength(255)]]}))}),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];n.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[r.kI.required]],phoneNumber:[s.phoneNumber,[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]}))}),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)}),this._changeDetectorRef.markForCheck()}createContact(){let t=this.contactForm.getRawValue();t=(0,te.Z)(t,"_id"),t.slug=new v.i(t.name).slug,this.closeDialog(t)}updateContact(){const t=this.contactForm.getRawValue();t.slug=new v.i(t.name).slug,this.closeDialog(t)}trackByFn(t,n){return n.id||t}displayFn(t){return(t&&t.name?t.name+" "+(t.lastname1?t.lastname1:"")+" "+(t.lastname2?t.lastname2:""):"").trim()}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t,n){if("add"===t){const a=[];a.push(this._formBuilder.group({email:["",[r.kI.required,r.kI.email,r.kI.maxLength(255)]]})),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];c.push(this._formBuilder.group({stateCode:["+535",[r.kI.required]],phoneNumber:["",[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]})),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)})}else{this._getCitiesByState(n.state),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(n),this.contactForm.get("merchantId").setValue(n.merchantId);const a=[];n.emails.length>0?n.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[r.kI.required,r.kI.email,r.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({email:["",[r.kI.required,r.kI.email,r.kI.maxLength(255)]]})),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];n.phoneNumbers.length>0?n.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[r.kI.required]],phoneNumber:[s.phoneNumber,[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]}))}):c.push(this._formBuilder.group({stateCode:["+535",[r.kI.required]],phoneNumber:["",[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]})),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)}),this._changeDetectorRef.markForCheck()}}closeDialog(t){this._dialogRef.close(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.WI),e.Y36(C.so),e.Y36(e.sBO),e.Y36(r.qu),e.Y36(Y.a),e.Y36(oe.P),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contact-dialog"]],decls:10,vars:5,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],["class","w-full flex justify-center  mt-4 mb-4 sm:mt-8 sm:mb-8",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","w-full overflow-y-auto",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"w-full","flex","justify-center","mt-4","mb-4","sm:mt-8","sm:mb-8"],[1,"fuse-mat-no-subscript","fuse-mat-rounded","fuse-mat-bold","w-full","max-w-[80%]","sm:max-w-120"],["matInput","",3,"formControl","matAutocomplete","maxlength","placeholder"],["matPrefix","",3,"svgIcon"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"overflow-x-auto"],[1,"w-full","overflow-y-auto"],[1,"flex"],[1,"w-full",3,"ngClass","formGroup","autocomplete"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName","maxlength","minlength"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"type","formControlName","minLength","maxlength"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","fuse-mat-no-subscript"],["value","Cuba"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ne,2,0,"h2",2),e.YNc(4,re,2,0,"h2",2),e.qZA(),e.BQk(),e.YNc(5,ae,8,9,"div",3),e.TgZ(6,"div",4),e.ynx(7),e.YNc(8,Le,94,63,"div",5),e.BQk(),e.qZA(),e.YNc(9,Re,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[p.mk,p.sg,p.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.wO,r.nD,r.oH,r.sg,r.u,R.XC,R.ZL,A.ey,y.lW,C.ZT,q.Hw,_.TO,_.KE,_.hX,_.qo,S.Nt,b.gD,b.$L,M.gM,p.Ov,p.rS],encapsulation:2,changeDetection:0}),o})();var I=m(5600),G=m(1683),Me=m(7231),$=m(7261),z=m(393),N=m(6856),T=m(288),Pe=m(2368),Oe=m(1235);function Ge(o,i){1&o&&(e.TgZ(0,"a",75),e._uU(1,"Nuevo"),e.qZA())}function $e(o,i){if(1&o&&(e.TgZ(0,"a",75),e._uU(1),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.selectedCustomer$).name)}}function ze(o,i){1&o&&(e.TgZ(0,"div",76),e._uU(1," Nuevo Cliente "),e.qZA())}function je(o,i){if(1&o&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Informaci\xf3n de ",e.lcZ(2,1,t.selectedCustomer$).name," ")}}const k=function(o){return{"cursor-not-allowed":o}};function He(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._UZ(1,"mat-icon",80),e.TgZ(2,"span",81),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,k,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Ke(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._UZ(1,"mat-icon",80),e.TgZ(2,"span",81),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,k,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Ve(o,i){if(1&o&&(e.TgZ(0,"div",77),e.YNc(1,He,4,5,"button",78),e.YNc(2,Ke,4,5,"button",78),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}function We(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio es obligatorio. "),e.qZA())}function Xe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio debe contener entre 3 y 255 caracteres. "),e.qZA())}function et(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas no deben superar los 10 caracteres. "),e.qZA())}function tt(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function ot(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function nt(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function rt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un sector. "),e.qZA())}function it(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria debe superar los 15 caracteres. "),e.qZA())}function at(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un moneda. "),e.qZA())}function st(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function ct(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function mt(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function lt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function ut(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function gt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function pt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function dt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function _t(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal es obligatorio. "),e.qZA())}function ht(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function ft(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",30)(2,"span",20),e._UZ(3,"span",87),e.TgZ(4,"span",88),e._uU(5),e.qZA(),e.TgZ(6,"span",89),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function xt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function Ct(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function vt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}const j=function(o){return{"mt-6":o}};function Zt(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",90)(2,"button",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw();return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",56),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,j,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function bt(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",82)(2,"mat-form-field",83),e.YNc(3,ht,2,0,"mat-label",26),e._UZ(4,"input",84),e.TgZ(5,"mat-select",85)(6,"mat-select-trigger")(7,"span",20)(8,"span",86),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",30)(11,"span",20),e._UZ(12,"span",87),e.TgZ(13,"span",88),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",89),e._uU(17),e.qZA()()(),e.YNc(18,ft,8,3,"ng-container",54),e.qZA(),e.YNc(19,xt,2,0,"mat-error",26),e.YNc(20,Ct,2,0,"mat-error",26),e.YNc(21,vt,2,0,"mat-error",26),e.qZA(),e.YNc(22,Zt,4,4,"ng-container",26),e.qZA(),e.BQk()),2&o){const t=i.$implicit,n=i.index,a=i.first,c=i.last,s=e.oxw();e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("minlength",7)("maxlength",8)("placeholder","Tel\xe9fono"),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.customerForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,17,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function It(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function Tt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function kt(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",90)(2,"button",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw();return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",56),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,j,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ft(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",92)(2,"mat-form-field",83),e.YNc(3,It,2,0,"mat-label",26),e._UZ(4,"mat-icon",46)(5,"input",93),e.YNc(6,Tt,2,0,"mat-error",26),e.qZA(),e.YNc(7,kt,4,4,"ng-container",26),e.qZA(),e.BQk()),2&o){const t=i.$implicit,n=i.first,a=i.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function At(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",92)(2,"div",95)(3,"span",96),e._uU(4,"Nombre:"),e.qZA(),e.TgZ(5,"span",97),e._uU(6),e.qZA(),e.TgZ(7,"span",98),e._uU(8,"Cargo:"),e.qZA(),e.TgZ(9,"span",99),e._uU(10),e.qZA(),e.TgZ(11,"span",100),e._uU(12,"Tel\xe9fono:"),e.qZA(),e.TgZ(13,"span",101),e._uU(14),e.qZA(),e.TgZ(15,"span",102),e._uU(16,"Correo electr\xf3nico:"),e.qZA(),e.TgZ(17,"span",103),e._uU(18),e.qZA()(),e.TgZ(19,"div",104)(20,"div",105)(21,"span",106),e._uU(22,"Nombre:"),e.qZA(),e.TgZ(23,"span"),e._uU(24),e.qZA()(),e.TgZ(25,"div",105)(26,"span",107),e._uU(27,"Cargo:"),e.qZA(),e.TgZ(28,"span",108),e._uU(29),e.qZA()(),e.TgZ(30,"div",105)(31,"span",109),e._uU(32,"Tel\xe9fono:"),e.qZA(),e.TgZ(33,"span",110),e._uU(34),e.qZA()(),e.TgZ(35,"div",105)(36,"span",111),e._uU(37,"Correo electr\xf3nico:"),e.qZA(),e.TgZ(38,"span",112),e._uU(39),e.qZA()()(),e.ynx(40),e.TgZ(41,"div",113)(42,"button",94),e.NdJ("click",function(){const c=e.CHM(t).index,s=e.oxw();return e.KtG(s.removeContactField(c))}),e._UZ(43,"mat-icon",56),e.qZA(),e.TgZ(44,"button",114),e.NdJ("click",function(){const a=e.CHM(t),c=a.$implicit,s=a.index,d=e.oxw();return e.KtG(d._openDialog(c.getRawValue(),"edit",s))}),e._UZ(45,"mat-icon",56),e.qZA()(),e.BQk(),e.qZA(),e.BQk()}if(2&o){const t=i.$implicit;e.xp6(6),e.Oqu(t.get("name").value),e.xp6(4),e.Oqu(t.get("charge").value),e.xp6(4),e.Oqu(t.get("phoneNumbers").controls[0].get("phoneNumber").value),e.xp6(4),e.Oqu(t.get("emails").controls[0].get("email").value),e.xp6(6),e.Oqu(t.get("name").value),e.xp6(5),e.Oqu(t.get("charge").value),e.xp6(5),e.Oqu(t.get("phoneNumbers").controls[0].get("phoneNumber").value),e.xp6(5),e.Oqu(t.get("emails").controls[0].get("email").value),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil")}}function yt(o,i){if(1&o&&e._UZ(0,"img",115),2&o){const t=e.oxw();e.Q6J("src",t.customerForm.get("logoUrl").value,e.LSH)}}function qt(o,i){1&o&&(e.TgZ(0,"div",116),e._uU(1,"Logo"),e.qZA())}function Nt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",118,119),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files,"logoUrl"))}),e.qZA(),e.TgZ(3,"label",120),e._UZ(4,"mat-icon",80),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function Ut(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",121),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage("logoUrl"))}),e._UZ(2,"mat-icon",80),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function Jt(o,i){if(1&o&&(e.TgZ(0,"div",117),e.YNc(1,Nt,5,3,"div",26),e.YNc(2,Ut,3,1,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",t.customerForm.get("logoUrl").value)}}function Qt(o,i){if(1&o&&e._UZ(0,"img",122),2&o){const t=e.oxw();e.Q6J("src",t.customerForm.get("coverUrl").value,e.LSH)}}function Dt(o,i){1&o&&(e.TgZ(0,"div",116),e._uU(1,"Cover"),e.qZA())}function Et(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",123,124),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files,"coverUrl"))}),e.qZA(),e.TgZ(3,"label",125),e._UZ(4,"mat-icon",80),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function wt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",121),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage("coverUrl"))}),e._UZ(2,"mat-icon",80),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function Lt(o,i){if(1&o&&(e.TgZ(0,"div",117),e.YNc(1,Et,5,3,"div",26),e.YNc(2,wt,3,1,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",t.customerForm.get("coverUrl").value)}}function Bt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._UZ(1,"mat-icon",127),e.TgZ(2,"span",81),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,k,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Yt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._UZ(1,"mat-icon",127),e.TgZ(2,"span",81),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,k,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Rt(o,i){if(1&o&&(e.TgZ(0,"div",126),e.YNc(1,Bt,4,5,"button",78),e.YNc(2,Yt,4,5,"button",78),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}const St=function(){return["/modules/customers"]},f=function(){return["Ejecutivo"]};let Mt=(()=>{class o{constructor(t,n,a,c,s,d,u,lo,uo,go,po){this._activatedRoute=t,this._customersService=n,this._changeDetectorRef=a,this._formBuilder=c,this._fuseConfirmationService=s,this._imagesService=d,this._locationService=u,this._router=lo,this._snackBar=uo,this.dialog=go,this.store=po,this.customerId=null,this.selectedCustomer=null,this.selectedCustomer$=null,this.cities=[],this.domainCode="",this.domains=[],this.editMode=!1,this.stateCode="",this.states=[],this.statesCodes=[],this.stateSelected="",this.merchants$=null,this._unsubscribeAll=new F.x}ngOnInit(){this.store.select(w.rk).pipe((0,Q.h)(t=>null!==t)).subscribe(t=>this._user=t),this.selectedCustomer$=this.store.select(E.H5),this.merchants$=this.store.select(W.UV),this._customersService.domains$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.domains=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.customerForm=this._formBuilder.group({_id:[null],userId:[this._user._id,[r.kI.required]],merchantId:["",[r.kI.required]],active:[!0],owner:[this._user._id,[r.kI.required]],name:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255)]],abbr:["",[r.kI.maxLength(10)]],domain:["",[r.kI.required]],customerType:[{value:"comercio",disabled:!0},[r.kI.required]],foundationDate:[""],nif:["",r.kI.maxLength(255)],bankAccount:["",[r.kI.minLength(16),r.kI.maxLength(24)]],currency:["",[r.kI.required]],address:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255)]],state:["",[r.kI.required]],city:["",[r.kI.required]],country:["",[r.kI.required]],postalCode:[0,[r.kI.max(99999),r.kI.min(9999)]],phoneNumbers:this._formBuilder.array([]),emails:this._formBuilder.array([]),contacts:this._formBuilder.array([]),website:["",[r.kI.maxLength(255)]],description:["",[r.kI.maxLength(1e3)]],logoUrl:[""],coverUrl:[""],code:[""]}),this.customerForm.get("state").valueChanges.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({customerId:t})=>{this.customerId=t,"new"!==this.customerId&&(this.editMode=!0,this._getCustomerById(t)),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeContactField(t){this._fuseConfirmationService.open({title:"Quitar contacto",message:"\xbfEsta seguro que desea quitar este contacto de la lista?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&(this.customerForm.get("contacts").removeAt(t),this._changeDetectorRef.markForCheck())})}addEmailField(){const t=this._formBuilder.group({email:["",[r.kI.email,r.kI.maxLength(255)]]});this.customerForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.customerForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[r.kI.required]],phoneNumber:["",[r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]});this.customerForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.customerForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createCustomer(){const t=`${this.stateCode}-${this.domainCode}-${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.customerForm.get("code").setValue(t);let n=this.customerForm.getRawValue();n.slug=new v.i(n.name).slug,n=(0,D.omit)(n,"_id"),this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._customersService.createCustomer(n).subscribe(s=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"border",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/crm/customers"),this._changeDetectorRef.markForCheck()},s=>{console.log(s.error.message)}),this._changeDetectorRef.markForCheck()})}updateCustomer(){const t=this.customerForm.getRawValue();t.slug=new v.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar datos del negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customersService.updateCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Negocio actualizado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"border",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/crm/customers"),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)}),this._changeDetectorRef.markForCheck()})}uploadImage(t,n="logoUrl"){if(!t.length)return;const c=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(c.type)||this._imagesService.uploadImage("Customer",c).subscribe(s=>{switch(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===n?" logo ":" cover "} cargada correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"border",svgIcon:"heroicons_solid:check"}}),this.customerForm.get(n).setValue(s.imageUrl),n){case"logoUrl":this.selectedCustomer.logoUrl=s.imageUrl;break;case"coverUrl":this.selectedCustomer.coverUrl=s.imageUrl}this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}removeImage(t="logoUrl"){const n=this.customerForm.get(t).value;switch(t){case"logoUrl":this.selectedCustomer.logoUrl=null;break;case"coverUrl":this.selectedCustomer.coverUrl=null}this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la imagen del  ${"logoUrl"===t?" logo":" cover"}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,g.R)(this._unsubscribeAll)).subscribe(c=>{"confirmed"===c&&(this._changeDetectorRef.markForCheck(),this._imagesService.removeImage("Customer",n).subscribe(d=>{this.customerForm.get(t).setValue(null),this._customersService.updateCustomer(this.selectedCustomer).pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===t?" logo ":" cover "} actualizada correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"border",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()},u=>{console.log(u)})}))})}_openDialog(t,n,a=-1){this.dialog.open(Se,{width:"600px",height:"98%",data:{contact:t,dialogMode:n},panelClass:"ath-dialog-panel"}).afterClosed().pipe((0,g.R)(this._unsubscribeAll)).subscribe(s=>{s&&"cancelled"!==s&&("add"===n&&this.addContactField(s),"edit"===n&&this.editContactField(s,a))})}trackByFn(t,n){return n.id||t}_getCustomerById(t){if("new"===t){this.editMode=!1;const n=[];n.push(this._formBuilder.group({email:["",[r.kI.email,r.kI.maxLength(255)]]})),n.forEach(c=>{this.customerForm.get("emails").push(c)});const a=[];return a.push(this._formBuilder.group({stateCode:["+535",[r.kI.required]],phoneNumber:["",[r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]})),void a.forEach(c=>{this.customerForm.get("phoneNumbers").push(c)})}this.selectedCustomer$.pipe((0,g.R)(this._unsubscribeAll),(0,Q.h)(n=>null!==n||void 0)).subscribe(n=>{this.selectedCustomer=(0,D.cloneDeep)(n),this._getCitiesByState(this.selectedCustomer.state),this.customerForm.get("emails").clear(),this.customerForm.get("phoneNumbers").clear(),this.customerForm.patchValue(n),this.customerForm.get("merchantId").setValue(n.merchantId._id);const a=[];n.emails.length>0?n.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[r.kI.email,r.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({email:["",[r.kI.email,r.kI.maxLength(255)]]})),a.forEach(s=>{this.customerForm.get("emails").push(s)});const c=[];n.phoneNumbers.length>0?n.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[r.kI.required]],phoneNumber:[s.phoneNumber,[r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]}))}):c.push(this._formBuilder.group({stateCode:["+535",[r.kI.required]],phoneNumber:["",[r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]})),c.forEach(s=>{this.customerForm.get("phoneNumbers").push(s)}),this.updateContactsFields(n.contacts),this._changeDetectorRef.markForCheck()})}_getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}_getStateFiltered(t){t!==this.stateSelected&&this._locationService.getStateFiltered(t).subscribe(n=>{this.stateCode=n[0].abbr,this._changeDetectorRef.markForCheck()})}_getDomainFiltered(t){this._customersService.getDomainFiltered(t).subscribe(n=>{this.domainCode=n[0].code,this._changeDetectorRef.markForCheck()})}addContactField(t){const n=this._formBuilder.group({_id:[""],merchantId:["",[r.kI.required]],userId:["",[r.kI.required]],name:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[r.kI.maxLength(11),r.kI.minLength(11),l.L.onlyNumbersPattern()]],charge:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[r.kI.minLength(3),r.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0}],state:[""],city:[""]});n.patchValue(t);const a=[];t.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[r.kI.required,r.kI.email,r.kI.maxLength(255)]]}))}),a.forEach(s=>{n.get("emails").push(s)});const c=[];t.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[r.kI.required]],phoneNumber:[s.phoneNumber,[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]}))}),c.forEach(s=>{n.get("phoneNumbers").push(s)}),this.customerForm.get("contacts").push(n),this._changeDetectorRef.markForCheck()}editContactField(t,n){const a=this.customerForm.get("contacts").getRawValue();a[n]=t,this.updateContactsFields(a),this._changeDetectorRef.markForCheck()}updateContactsFields(t){const n=[];t.forEach(a=>{const c=this._formBuilder.group({_id:[a._id],merchantId:[a.merchantId,[r.kI.required]],userId:[a.userId,[r.kI.required]],name:[a.name,[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname1:[a.lastname1,[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],lastname2:[a.lastname2,[r.kI.minLength(3),r.kI.maxLength(255),l.L.onlyAlphabetsWithAccentPattern()]],idNumber:[a.idNumber,[r.kI.maxLength(11),r.kI.minLength(11),l.L.onlyNumbersPattern()]],charge:[a.charge,[r.kI.required,r.kI.minLength(3),r.kI.maxLength(255)]],slug:[a.slug],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:[a.address,[r.kI.minLength(3),r.kI.maxLength(255)]],country:[{value:a.country,disabled:!0}],state:[a.state],city:[a.city]}),s=[];a.emails.forEach(u=>{s.push(this._formBuilder.group({email:[u.email,[r.kI.required,r.kI.email,r.kI.maxLength(255)]]}))}),s.forEach(u=>{c.get("emails").push(u)});const d=[];a.phoneNumbers.forEach(u=>{d.push(this._formBuilder.group({stateCode:[u.stateCode,[r.kI.required]],phoneNumber:[u.phoneNumber,[r.kI.required,r.kI.minLength(7),r.kI.maxLength(8),l.L.onlyNumbersPattern()]]}))}),d.forEach(u=>{c.get("phoneNumbers").push(u)}),n.push(c)}),this.customerForm.get("contacts").clear(),n.forEach(a=>{this.customerForm.get("contacts").push(a)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(I.v),e.Y36(e.sBO),e.Y36(r.QS),e.Y36(G.R),e.Y36(Me.C),e.Y36(Y.a),e.Y36(h.F0),e.Y36($.ux),e.Y36(C.uw),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-customer-details"]],decls:225,vars:116,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["class","ml-1 text-primary-500",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],["class","mt-2 text-3xl font-extrabold leading-tight tracking-tight sm:text-3xl",4,"ngIf"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex-auto","p-6","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],["autocomplete","off",3,"formGroup"],["multi","",1,"w-full","bg-transparent"],[2,"border-top-left-radius","0.5rem !important","border-top-right-radius","0.5rem !important",3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-y-3","gap-x-6","p-8","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[4,"ngIf"],["matInput","",3,"type","formControlName","maxlength"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"w-full","fuse-mat-no-subscript"],["matPrefix","",3,"for"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName","minLength","maxLength"],[3,"formControlName"],["value","cup"],["value","mlc"],["value","usd"],["value","mxn"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","sm:col-span-2"],[1,"items-start","font-medium"],[1,"mt-1","sm:mt-3",3,"color","formControlName"],[1,"sm:col-span-4"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],[3,"expanded"],["matInput","","required","",3,"type","formControlName","minLength","maxlength"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","number","matInput","","required","",3,"formControlName","min","max"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"type","formControlName"],[1,"w-full","p-8","pt-10","border-t-2"],[1,"space-y-4","w-full"],[2,"border-bottom-left-radius","0.5rem !important","border-bottom-right-radius","0.5rem !important",3,"expanded"],[1,"grid","w-full","gap-y-3","gap-x-6","p-8","pt-10","border-t-2","sm:grid-cols-4"],[1,""],[1,"flex","items-end","flex-auto"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-xl","ring-4","ring-bg-card"],["class","object-cover rounded bg-hover","alt","IMAGEN",3,"src",4,"ngIf"],[1,"absolute","inset-0","z-10","flex","items-center","justify-center","text-white","bg-black","bg-opacity-50"],["class","text-xl mt-15",4,"ngxPermissionsExcept"],["class","absolute inset-0 z-20 flex items-center justify-center",4,"ngxPermissionsExcept"],[1,"sm:col-span-3"],[1,"relative","flex","items-center","justify-center","h-64","overflow-hidden","w-256","rounded-xl","ring-4","ring-bg-card"],["class","object-fill h-full rounded w-256 bg-hover","alt","IMAGEN",3,"src",4,"ngIf"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],["class","flex items-center flex-shrink-0 mt-6 text-right sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"ml-1","text-primary-500"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white rounded-full bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","ngClass","click",4,"ngIf"],["mat-raised-button","",1,"ml-4","text-white","rounded-full","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[1,"relative","flex"],[1,"flex-auto"],["matInput","",3,"type","formControl","minlength","maxlength","placeholder"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"hidden","md:grid","w-[90%]","grid","grid-cols-4","rounded-md","border-2","border-gray-200","content-center","pl-5","pr-5",2,"grid-template-rows","repeat(2, minmax(0, 0.4fr)) !important"],[1,"truncate","font-medium","text-secondary"],[1,"truncate","row-start-2"],[1,"truncate","col-start-2","font-medium","text-secondary"],[1,"truncate","row-start-2","col-start-2"],[1,"truncate","col-start-3","font-medium","text-secondary"],[1,"truncate","row-start-2","col-start-3"],[1,"truncate","col-start-4","font-medium","text-secondary"],[1,"truncaterow-start-2","col-start-4"],[1,"md:hidden","flex","flex-wrap","justify-between","w-[90%]","rounded-md","border-2","border-gray-200","pl-5","pr-5"],[1,"flex","flex-col","mt-2"],[1,"font-medium","text-secondary"],[1,"col-start-2","font-medium","text-secondary"],[1,"row-start-2","col-start-2"],[1,"col-start-3","font-medium","text-secondary"],[1,"row-start-2","col-start-3"],[1,"col-start-4","font-medium","text-secondary"],[1,"row-start-2","col-start-4"],[1,"flex","flex-col","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Editar",1,"w-8","h-8","min-h-8",3,"click"],["alt","IMAGEN",1,"object-cover","rounded","bg-hover",3,"src"],[1,"text-xl","mt-15"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","logo-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["logoFileInput",""],["for","logo-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],["mat-icon-button","",3,"click"],["alt","IMAGEN",1,"object-fill","h-full","rounded","w-256","bg-hover",3,"src"],["id","cover-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["coverFileInput",""],["for","cover-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[3,"svgIcon"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7," Mis Clientes "),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.YNc(10,Ge,2,0,"a",7),e.YNc(11,$e,3,3,"a",7),e.qZA()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11),e.YNc(18,ze,2,0,"div",12),e.YNc(19,je,3,3,"div",12),e.qZA()(),e.YNc(20,Ve,3,2,"div",13),e.qZA(),e.TgZ(21,"div",14)(22,"div",15)(23,"form",16)(24,"mat-accordion",17)(25,"mat-expansion-panel",18)(26,"mat-expansion-panel-header",19)(27,"mat-panel-title",20)(28,"div",21),e._uU(29," Informaci\xf3n General "),e.qZA()()(),e.TgZ(30,"div",22)(31,"div",23)(32,"mat-form-field",24)(33,"mat-label"),e._uU(34,"Nombre"),e.qZA(),e._UZ(35,"input",25),e.YNc(36,We,2,0,"mat-error",26),e.YNc(37,Xe,2,0,"mat-error",26),e.qZA()(),e.TgZ(38,"div",23)(39,"mat-form-field",24)(40,"mat-label"),e._uU(41,"Siglas"),e.qZA(),e._UZ(42,"input",27),e.YNc(43,et,2,0,"mat-error",26),e.qZA()(),e.TgZ(44,"div",23)(45,"mat-form-field",24)(46,"mat-label"),e._uU(47,"Negocio"),e.qZA(),e.TgZ(48,"mat-select",28),e.YNc(49,tt,2,2,"mat-option",29),e.ALo(50,"async"),e.qZA(),e.YNc(51,ot,2,0,"mat-error",26),e.TgZ(52,"mat-hint"),e._uU(53,"Negocio al cual pertenece el Cliente"),e.qZA()()(),e.TgZ(54,"div",23)(55,"mat-form-field",24)(56,"mat-label"),e._uU(57,"Sector"),e.qZA(),e.TgZ(58,"mat-select",28),e.YNc(59,nt,2,2,"mat-option",29),e.qZA(),e.TgZ(60,"mat-hint"),e._uU(61,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.qZA(),e.YNc(62,rt,2,0,"mat-error",26),e.qZA()(),e.TgZ(63,"div",23)(64,"mat-form-field",24)(65,"mat-label"),e._uU(66,"Tipo de Negocio"),e.qZA(),e.TgZ(67,"mat-select",28)(68,"mat-option",30),e._uU(69,"Comercio"),e.qZA()(),e.TgZ(70,"mat-hint"),e._uU(71,"Escoja su tipo de negocio"),e.qZA()()(),e.TgZ(72,"div",23)(73,"mat-form-field",31)(74,"mat-label"),e._uU(75,"Fecha de Constituci\xf3n"),e.qZA(),e._UZ(76,"mat-datepicker-toggle",32)(77,"mat-datepicker",null,33)(79,"input",34),e.qZA()(),e.TgZ(80,"div",23)(81,"mat-form-field",24)(82,"mat-label"),e._uU(83,"NIF"),e.qZA(),e._UZ(84,"input",27),e.TgZ(85,"mat-hint"),e._uU(86,"N\xfamero de Identificaci\xf3n Fiscal"),e.qZA()()(),e.TgZ(87,"div",23)(88,"mat-form-field",24)(89,"mat-label"),e._uU(90,"Cuenta bancaria"),e.qZA(),e._UZ(91,"input",35),e.YNc(92,it,2,0,"mat-error",26),e.qZA()(),e.TgZ(93,"div",23)(94,"mat-form-field",24)(95,"mat-label"),e._uU(96,"Moneda por defecto"),e.qZA(),e.TgZ(97,"mat-select",36)(98,"mat-option",37),e._uU(99,"CUP"),e.qZA(),e.TgZ(100,"mat-option",38),e._uU(101,"MLC"),e.qZA(),e.TgZ(102,"mat-option",39),e._uU(103,"USD"),e.qZA(),e.TgZ(104,"mat-option",40),e._uU(105,"MXN"),e.qZA()(),e._UZ(106,"mat-icon",41),e.YNc(107,at,2,0,"mat-error",26),e.qZA()(),e.TgZ(108,"div",42)(109,"span",43),e._uU(110,"Estado"),e.qZA(),e.TgZ(111,"mat-slide-toggle",44),e._uU(112," Activo "),e.qZA()(),e.TgZ(113,"div",45)(114,"mat-form-field",31)(115,"mat-label"),e._uU(116,"Descripci\xf3n del Negocio"),e.qZA(),e._UZ(117,"mat-icon",46)(118,"textarea",47),e.qZA()()()(),e.TgZ(119,"mat-expansion-panel",48)(120,"mat-expansion-panel-header",19)(121,"mat-panel-title",20)(122,"div",21),e._uU(123," Domicilio del Negocio "),e.qZA()()(),e.TgZ(124,"div",22)(125,"div",23)(126,"mat-form-field",24)(127,"mat-label"),e._uU(128,"Direcci\xf3n"),e.qZA(),e._UZ(129,"mat-icon",46)(130,"input",49),e.YNc(131,st,2,0,"mat-error",26),e.YNc(132,ct,2,0,"mat-error",26),e.qZA()(),e.TgZ(133,"div",23)(134,"mat-form-field",24)(135,"mat-label"),e._uU(136,"Provincia"),e.qZA(),e._UZ(137,"mat-icon",41),e.TgZ(138,"mat-select",28),e.YNc(139,mt,2,2,"mat-option",29),e.qZA(),e.YNc(140,lt,2,0,"mat-error",26),e.qZA()(),e.TgZ(141,"div",23)(142,"mat-form-field",24)(143,"mat-label"),e._uU(144,"Municipio"),e.qZA(),e._UZ(145,"mat-icon",41),e.TgZ(146,"mat-select",28),e.YNc(147,ut,2,2,"mat-option",29),e.qZA(),e.YNc(148,gt,2,0,"mat-error",26),e.qZA()(),e.TgZ(149,"div",23)(150,"mat-form-field",24)(151,"mat-label"),e._uU(152,"Pa\xeds"),e.qZA(),e.TgZ(153,"mat-select",28)(154,"mat-option",50),e._uU(155,"Cuba"),e.qZA()(),e._UZ(156,"mat-icon",41),e.YNc(157,pt,2,0,"mat-error",26),e.qZA()(),e.TgZ(158,"div",23)(159,"mat-form-field",51)(160,"mat-label"),e._uU(161,"C\xf3digo Postal"),e.qZA(),e._UZ(162,"input",52),e.YNc(163,dt,2,0,"mat-error",26),e.YNc(164,_t,2,0,"mat-error",26),e.qZA()()()(),e.TgZ(165,"mat-expansion-panel",48)(166,"mat-expansion-panel-header",19)(167,"mat-panel-title",20)(168,"div",21),e._uU(169," Informaci\xf3n de contacto "),e.qZA()()(),e.TgZ(170,"div",22)(171,"div",23)(172,"div",53),e.YNc(173,bt,23,19,"ng-container",54),e.qZA(),e.TgZ(174,"div",55),e.NdJ("click",function(){return n.addPhoneNumberField()}),e._UZ(175,"mat-icon",56),e.TgZ(176,"span",57),e._uU(177,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(178,"div",23)(179,"div",53),e.YNc(180,Ft,8,6,"ng-container",54),e.qZA(),e.TgZ(181,"div",55),e.NdJ("click",function(){return n.addEmailField()}),e._UZ(182,"mat-icon",56),e.TgZ(183,"span",57),e._uU(184,"Agregar correo electr\xf3nico"),e.qZA()()(),e.TgZ(185,"div",23)(186,"mat-form-field",31)(187,"mat-label"),e._uU(188,"P\xe1gina Web"),e.qZA(),e._UZ(189,"mat-icon",46)(190,"input",58),e.qZA()()()(),e.TgZ(191,"mat-expansion-panel",48)(192,"mat-expansion-panel-header",19)(193,"mat-panel-title",20)(194,"div",21),e._uU(195," Contactos "),e.qZA()()(),e.TgZ(196,"div",59)(197,"div",60),e.YNc(198,At,46,10,"ng-container",54),e.qZA(),e.TgZ(199,"div",55),e.NdJ("click",function(){return n._openDialog(null,"add")}),e._UZ(200,"mat-icon",56),e.TgZ(201,"span",57),e._uU(202,"Agregar Contacto"),e.qZA()()()(),e.TgZ(203,"mat-expansion-panel",61)(204,"mat-expansion-panel-header",19)(205,"mat-panel-title",20)(206,"div",21),e._uU(207," Im\xe1genes "),e.qZA()()(),e.TgZ(208,"div",62)(209,"div",63)(210,"div",64)(211,"div",65),e.YNc(212,yt,1,1,"img",66),e.TgZ(213,"div",67),e.YNc(214,qt,2,0,"div",68),e.qZA(),e.YNc(215,Jt,3,2,"div",69),e.qZA()()(),e.TgZ(216,"div",70)(217,"div",64)(218,"div",71),e.YNc(219,Qt,1,1,"img",72),e.TgZ(220,"div",67),e.YNc(221,Dt,2,0,"div",68),e.qZA(),e.YNc(222,Lt,3,2,"div",69),e.qZA()()()()()()()()(),e.TgZ(223,"div",73),e.YNc(224,Rt,3,2,"div",74),e.qZA()()),2&t){const a=e.MAs(78);e.xp6(6),e.Q6J("routerLink",e.DdM(109,St)),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("ngIf",n.editMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(4),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("ngIf",n.editMode),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(110,f)),e.xp6(3),e.Q6J("formGroup",n.customerForm),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("maxlength")||n.customerForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("type","text")("formControlName","abbr")("maxlength",10),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("abbr").hasError("maxlength")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(50,107,n.merchants$))("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("ngIf",n.customerForm.get("merchantId").hasError("required")),e.xp6(7),e.Q6J("formControlName","domain"),e.xp6(1),e.Q6J("ngForOf",n.domains)("ngForTrackBy",n.trackByFn),e.xp6(3),e.Q6J("ngIf",n.customerForm.get("domain").hasError("required")),e.xp6(5),e.Q6J("formControlName","customerType"),e.xp6(1),e.Q6J("value","comercio"),e.xp6(8),e.Q6J("for",a),e.xp6(3),e.Q6J("matDatepicker",a)("formControlName","foundationDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("type","text")("formControlName","nif")("maxlength",255),e.xp6(7),e.Q6J("type","text")("formControlName","bankAccount")("minLength",16)("maxLength",24),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("bankAccount").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("currency").hasError("required")),e.xp6(4),e.Q6J("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("maxlength")||n.customerForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",n.states)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("state").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",n.cities)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("country").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("min",9999)("max",99999),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("min")||n.customerForm.get("postalCode").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("required")),e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(7),e.Q6J("ngForOf",n.customerForm.get("phoneNumbers").controls)("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",n.customerForm.get("emails").controls)("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:globe-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","website"),e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(6),e.Q6J("ngForOf",n.customerForm.get("contacts").controls)("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(3),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(8),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(111,f)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(112,f)),e.xp6(4),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(113,f)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(114,f)),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(115,f))}},dependencies:[h.yS,p.mk,p.sg,p.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.wO,r.nD,r.qQ,r.Fd,r.oH,r.sg,r.u,z.PQ,A.ey,y.lW,N.Mq,N.hl,N.nW,T.pp,T.ib,T.yz,T.yK,q.Hw,_.TO,_.KE,_.bx,_.hX,_.qo,S.Nt,A.wG,b.gD,b.$L,Pe.Rr,M.gM,Oe.gE,p.Ov,p.rS],encapsulation:2,changeDetection:0}),o})();var H=m(6087),U=m(4847),Pt=m(6451),Ot=m(4004),Gt=m(8288),$t=m(6428);function zt(o,i){if(1&o&&e._UZ(0,"img",40),2&o){const t=e.oxw().$implicit;e.Q6J("alt","Foto")("src",t.logoUrl,e.LSH)}}function jt(o,i){1&o&&(e.TgZ(0,"div",41),e._uU(1," SIN FOTO "),e.qZA())}function Ht(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",42),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Kt(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",43),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Vt(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",31)(2,"div",32)(3,"div",33),e.YNc(4,zt,1,2,"img",34),e.YNc(5,jt,2,0,"div",35),e.qZA()(),e.TgZ(6,"div",36),e._uU(7),e.qZA(),e.TgZ(8,"div",36),e._uU(9),e.qZA(),e.TgZ(10,"div",27),e._uU(11),e.qZA(),e.TgZ(12,"div",25),e.YNc(13,Ht,2,1,"ng-container",20),e.YNc(14,Kt,2,1,"ng-container",20),e.qZA(),e.TgZ(15,"div",37)(16,"button",38),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.editCustomer(c))}),e._UZ(17,"mat-icon",39),e.qZA(),e.TgZ(18,"button",38),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.deleteCustomer(c._id))}),e._UZ(19,"mat-icon",39),e.qZA()()(),e.BQk()}if(2&o){const t=i.$implicit;e.xp6(4),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.domain," "),e.xp6(2),e.hij(" ",t.merchantId.name," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Wt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Vt,20,9,"ng-container",30),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const Xt=function(o){return{"pointer-events-none":o}},eo=function(){return[10,25,50,100]};function to(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25)(4,"mat-icon"),e._uU(5,"image"),e.qZA()(),e.TgZ(6,"div",26),e._uU(7," Nombre "),e.qZA(),e.TgZ(8,"div"),e._uU(9," Sector "),e.qZA(),e.TgZ(10,"div",27),e._uU(11," Negocio "),e.qZA(),e.TgZ(12,"div",28),e._uU(13," Activo "),e.qZA(),e.TgZ(14,"div",25),e._uU(15," Acciones "),e.qZA()(),e.YNc(16,Wt,2,2,"ng-container",20),e.ALo(17,"async"),e._UZ(18,"mat-paginator",29),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(6),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(17,9,t.customers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Xt,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,eo))("showFirstLastButtons",!0)}}function oo(o,i){if(1&o&&(e.ynx(0),e.YNc(1,to,19,14,"ng-container",22),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(34);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function no(o,i){1&o&&(e.TgZ(0,"div",44),e._uU(1,"No ha creado ning\xfan cliente a\xfan!"),e.qZA())}let ro=(()=>{class o{constructor(t,n,a,c,s,d,u){this._changeDetectorRef=t,this._dialog=n,this._customerService=a,this._fuseConfirmationService=c,this._router=s,this._snackBar=d,this.store=u,this.merchantId="",this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new r.NI,this.selectedCustomer=null,this._unsubscribeAll=new F.x}ngOnInit(){this.customers$=this.store.select(E.p6),this.store.select($t.B).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"active",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Pt.T)(this._sort.sortChange,this._paginator.page).pipe((0,B.w)(()=>(this.isLoading=!0,this._customerService.getCustomers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,""))),(0,Ot.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createCustomer(){this._router.navigate(["/modules/crm/customers/new"])}editCustomer(t){this._router.navigateByUrl(`/modules/crm/customers/${t._id}`)}deleteCustomer(t){this._fuseConfirmationService.open({title:"Eliminar Cliente",message:"\xbfEsta seguro que desea Eliminar el Cliente? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customerService.deleteCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",appearance:"border",type:"success"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(C.uw),e.Y36(I.v),e.Y36(G.R),e.Y36(h.F0),e.Y36($.ux),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["crm-customers"]],viewQuery:function(t,n){if(1&t&&(e.Gf(H.NW,5),e.Gf(U.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._paginator=a.first),e.iGM(a=e.CRH())&&(n._sort=a.first)}},decls:35,vars:8,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-hidden","sm:overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/crm/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noCustomers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","customers-table"],[1,"text-center"],[3,"mat-sort-header"],[1,""],[1,"text-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","customers-table"],[1,"items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"CRM"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Clientes"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Clientes "),e.qZA()()(),e.TgZ(24,"div",14)(25,"button",15),e.NdJ("click",function(){return n.createCustomer()}),e._UZ(26,"mat-icon",16),e.TgZ(27,"span",17),e._uU(28,"Nuevo"),e.qZA()()()(),e.TgZ(29,"div",18)(30,"div",19),e.YNc(31,oo,2,2,"ng-container",20),e.ALo(32,"async"),e.YNc(33,no,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(32,6,n.customers$)))},dependencies:[h.yS,p.mk,p.sg,p.O5,z.PQ,y.lW,q.Hw,H.NW,U.YE,U.nU,p.Ov],encapsulation:2,data:{animation:Gt.L},changeDetection:0}),o})();var io=m(4128);const co=[{path:"",component:V.f},{path:"customers",component:ro,resolve:{customers:(()=>{class o{constructor(t,n){this._customersService=t,this.store=n}resolve(t,n){return this._customersService.getCustomers()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(I.v),e.LFG(Z.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}},{path:"customers/:customerId",component:Mt,resolve:{customer:(()=>{class o{constructor(t){this._customersService=t}resolve(t,n){const a=t.params.customerId;return"new"===a?this._customersService.getDomains():(0,io.D)([this._customersService.getCustomerById(a),this._customersService.getDomains()])}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(I.v))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];let mo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(co),K.m]}),o})()}}]);