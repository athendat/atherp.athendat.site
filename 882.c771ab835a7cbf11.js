"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[882],{4062:(U,Z,o)=>{o.d(Z,{i:()=>h});class h{constructor(c){this.slug=this._slugGenerator(c)}_slugGenerator(c){return c.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("  "," ").replace(" ","-")}}},9784:(U,Z,o)=>{o.d(Z,{h:()=>g});var h=o(7261),d=o(5e3),c=o(9808),l=o(2494),p=o(5245);function a(s,f){if(1&s&&d._UZ(0,"mat-icon",3),2&s){const m=d.oxw();d.Q6J("svgIcon",m.svgIcon)}}let g=(()=>{class s{constructor(m){this.data=m,this.message="",this.title="",this.svgIcon="",this.type="success",this.appearance="fill",this.message=m.message,this.title=m.title,this.svgIcon=m.svgIcon,this.type=m.type,m.appearance&&(this.appearance=m.appearance)}}return s.\u0275fac=function(m){return new(m||s)(d.Y36(h.qD))},s.\u0275cmp=d.Xpm({type:s,selectors:[["ath-snackbar"]],decls:5,vars:5,consts:[[3,"type","appearance"],["class","icon-size-5","fuseAlertIcon","",3,"svgIcon",4,"ngIf"],["fuseAlertTitle",""],["fuseAlertIcon","",1,"icon-size-5",3,"svgIcon"]],template:function(m,_){1&m&&(d.TgZ(0,"fuse-alert",0),d.YNc(1,a,1,1,"mat-icon",1),d.TgZ(2,"span",2),d._uU(3),d.qZA(),d._uU(4),d.qZA()),2&m&&(d.Q6J("type",_.type)("appearance",_.appearance),d.xp6(1),d.Q6J("ngIf",_.svgIcon),d.xp6(2),d.Oqu(_.title),d.xp6(1),d.hij(" ",_.message,"\n"))},dependencies:[c.O5,l.W,p.Hw],styles:[".snack-alert-success[_ngcontent-%COMP%]{background-color:#39b54a!important;color:#fff}.snack-alert-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important;color:#fff}.snack-alert-error[_ngcontent-%COMP%]{background-color:#ff2828!important;color:#fff}"]}),s})()},2491:(U,Z,o)=>{o.d(Z,{L:()=>d});var h=o(3075);class d{static isEmptyInputValue(l){return null==l||0===l.length}static mustMatch(l,p){return a=>{const g=a.get(l),s=a.get(p);if(!g||!s||(s.hasError("mustMatch")&&(delete s.errors.mustMatch,s.updateValueAndValidity()),this.isEmptyInputValue(s.value)||g.value===s.value))return null;const f={mustMatch:"Las contrase\xf1a no coinciden."};return s.setErrors(f),f}}static strongPassWord(l,p,a,g,s){return f=>{const m=f.value;if(!m)return null;const _=!l||/[A-Z]+/.test(m),D=!p||/[a-z]+/.test(m),C=!a||/[0-9]+/.test(m),T=!g||!/^[a-zA-Z0-9]+$/.test(m);return _&&D&&C&&T&&m.length>=s?null:{password:"La contrase\xf1a no cumple con los est\xe1ndares de seguridad requeridos"}}}static onlyNumber(l){return p=>{const a=p.get(l);if(!a||!a.value||(a.hasError("onlyNumber")&&(delete a.errors.mustMatch,a.updateValueAndValidity()),/^[a-zA-Z0-9]+$/.test(a.value.toString())))return null;const s={onlyNumber:"Solo se admiten n\xfameros."};return a.setErrors(s),s}}static strongPasWordPattern(){return h.kI.pattern(/((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)}static emailPattern(){return h.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")}static onlyNumbersPattern(){return h.kI.pattern("^[0-9]*$")}static onlyAlphabetsWithAccentPattern(){return h.kI.pattern("^[a-zA-Z \xe1\xe9\xed\xf3\xfa\xf1\xfc]*$")}static onlyAlphabetsPattern(){return h.kI.pattern("^[a-zA-Z ]*$")}static validateIdNumber(){return l=>{if(!l)return null;let p=l.value;if(!p)return null;void 0!==l.value.idNumber&&(p=l.value.idNumber);const a=parseInt(p.substring(0,2),10),g=parseInt(p.substring(2,4),10)-1,s=parseInt(p.substring(4,6),10),f=new Date(a,g,s);if(f.getFullYear().toString().substring(2,4)===a.toString()&&f.getMonth()===g&&f.getDate()===s)return null;const _={validateIdNumber:"El n\xfamero de identidad introducido es incorrecto"};return l.setErrors(_),_}}static validFullName(l){return p=>{const a=p.get(l);if(!a||!l||(a.hasError("validFullName")&&(delete a.errors.validFullName,a.updateValueAndValidity()),this._isEmptyInputValue(a.value))||a.value.trim().split(" ").length>1)return null;const g={validFullName:"El nombre completo deber\xe1 tener al menos un nombre y un apellido"};return a.setErrors(g),g}}static _isEmptyInputValue(l){return null==l||0===l.length}}},9882:(U,Z,o)=>{o.r(Z),o.d(Z,{ProductServiceModule:()=>Fe});var h=o(5357),d=o(6338),c=o(3075),l=o(6087),p=o(4847),a=o(7579),g=o(6451),s=o(2722),f=o(3900),m=o(4004),_=o(3844);class D{}var C=o(5620);const T=r=>r.productServices,O=((0,C.P1)(T,r=>r.productService),(0,C.P1)(T,r=>r.productServices));var N=o(9784),z=o(6428),Q=o(8966),R=o(9646),$=o(5119),V=o(4787),W=o(1910),J=o(4062),G=o(2491),e=o(5e3),E=o(1683),q=o(520),b=o(8505),K=o(5714),j=o(2340),A=o(5397),H=o(1235);const y=j.N.API_URL;let F=(()=>{class r{constructor(t,n,u){this._httpClient=t,this.rolesService=n,this.store=u}getProductServices(t=0,n=20,u="name",v="asc",S=""){const I=(new q.LE).append("page",t).append("size",n).append("sort",u).append("order",v).append("search",S);return this._httpClient.get(`${y}/products-services/`,{params:I}).pipe((0,b.b)(k=>{this.store.dispatch((0,K.Jr)({pagination:k.pagination})),this.store.dispatch((0,A.C5)({productServices:k.dataArr}))}))}getActiveProductServices(){return this._httpClient.get(`${y}/products-services/active`).pipe((0,b.b)(t=>{this.store.dispatch((0,A.C5)({productServices:t.dataArr}))}))}createProductService(t){return this._httpClient.post(`${y}/products-services`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,A.QI)({productService:n.data}))}))}updateProductService(t){return this._httpClient.patch(`${y}/products-services/${t._id}`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,A.pF)({productService:n.data}))}))}deleteProductService(t){return this._httpClient.delete(`${y}/products-services/${t}`).pipe((0,b.b)(()=>{this.store.dispatch((0,A.dY)({id:t}))}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(q.eN),e.LFG(H.cM),e.LFG(C.yh))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var M=o(7261),x=o(9808),X=o(508),Y=o(7423),w=o(5245),P=o(7322),ee=o(7531),te=o(4107),re=o(2368);function oe(r,i){1&r&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar producto o servicio"),e.qZA())}function ne(r,i){1&r&&(e.TgZ(0,"h2",7),e._uU(1,"Editar producto o servicio"),e.qZA())}function ie(r,i){1&r&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del producto o servicio"),e.qZA())}function ce(r,i){if(1&r&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e.ynx(4),e.TgZ(5,"div",12)(6,"mat-label",13),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.BQk(),e.ynx(10),e.TgZ(11,"div",12)(12,"mat-label",13),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"div",14),e._uU(15),e.qZA()(),e.BQk(),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(9),e.Oqu(t.data.productService.name),e.xp6(6),e.Oqu(t.data.productService.description)}}function ae(r,i){if(1&r&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function se(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un Negocio. "),e.qZA())}function le(r,i){if(1&r&&(e.TgZ(0,"div",19)(1,"mat-form-field",20)(2,"mat-label"),e._uU(3,"Negocio"),e.qZA(),e.TgZ(4,"mat-select",21),e.YNc(5,ae,2,2,"mat-option",36),e.qZA(),e.YNc(6,se,2,0,"mat-error",6),e.TgZ(7,"mat-hint"),e._uU(8,"Seleccione el negocio al cual pertenece el producto o servicio"),e.qZA()()()),2&r){const t=i.ngIf,n=e.oxw(2);e.xp6(4),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("merchantId").hasError("required"))}}function ue(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el typo. "),e.qZA())}function de(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio es obligatorio. "),e.qZA())}function me(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio debe contener entre 3 y 255 caracteres. "),e.qZA())}function pe(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la moneda. "),e.qZA())}function ge(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," El costo es obligatorio. "),e.qZA())}function ve(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe de ser mayor que 0. "),e.qZA())}function fe(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe contener solo n\xfameros. "),e.qZA())}function he(r,i){if(1&r&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17),e.YNc(3,le,9,4,"div",18),e.ALo(4,"async"),e.TgZ(5,"div",19)(6,"mat-form-field",20)(7,"mat-label"),e._uU(8,"Tipo"),e.qZA(),e.TgZ(9,"mat-select",21)(10,"mat-option",22),e._uU(11," Producto "),e.qZA(),e.TgZ(12,"mat-option",22),e._uU(13," Servicio "),e.qZA()(),e.YNc(14,ue,2,0,"mat-error",6),e.TgZ(15,"mat-hint"),e._uU(16,"Especifique si es producto o servicio"),e.qZA()()(),e.TgZ(17,"div",19)(18,"mat-form-field",20)(19,"mat-label"),e._uU(20,"Nombre"),e.qZA(),e._UZ(21,"input",23),e.YNc(22,de,2,0,"mat-error",6),e.YNc(23,me,2,0,"mat-error",6),e.qZA()(),e.TgZ(24,"div",19)(25,"mat-form-field",20)(26,"mat-label"),e._uU(27,"Moneda por defecto"),e.qZA(),e.TgZ(28,"mat-select",21)(29,"mat-option",24),e._uU(30,"CUP"),e.qZA(),e.TgZ(31,"mat-option",25),e._uU(32,"MLC"),e.qZA(),e.TgZ(33,"mat-option",26),e._uU(34,"USD"),e.qZA(),e.TgZ(35,"mat-option",27),e._uU(36,"MXN"),e.qZA()(),e._UZ(37,"mat-icon",28),e.YNc(38,pe,2,0,"mat-error",6),e.qZA()(),e.TgZ(39,"div",19)(40,"mat-form-field",20)(41,"mat-label"),e._uU(42,"Costo"),e.qZA(),e._UZ(43,"input",29),e.YNc(44,ge,2,0,"mat-error",6),e.YNc(45,ve,2,0,"mat-error",6),e.YNc(46,fe,2,0,"mat-error",6),e.qZA()(),e.TgZ(47,"div",30)(48,"mat-label"),e._uU(49,"Estado"),e.qZA(),e.TgZ(50,"mat-slide-toggle",31),e._uU(51," Activo "),e.qZA()(),e.TgZ(52,"div",32)(53,"mat-form-field",33)(54,"mat-label"),e._uU(55,"Descripci\xf3n del Producto o servicio"),e.qZA(),e._UZ(56,"mat-icon",34)(57,"textarea",35),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.productServiceForm)("autocomplete","off"),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,32,t.merchants$)),e.xp6(6),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","Producto"),e.xp6(2),e.Q6J("value","Servicio"),e.xp6(2),e.Q6J("ngIf",t.productServiceForm.get("type").hasError("required")),e.xp6(7),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del producto o servicio"),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("name").hasError("maxlength")||t.productServiceForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("currency").hasError("required")),e.xp6(5),e.Q6J("type","number")("formControlName","cost")("min",1)("placeholder","Costo del producto o servicio"),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("cost").hasError("min")),e.xp6(1),e.Q6J("ngIf",t.productServiceForm.get("cost").hasError("pattern")),e.xp6(4),e.Q6J("value",!0)("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3)}}const B=function(r){return{"cursor-not-allowed":r}};function _e(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(2);return e.KtG(u.updateProductService())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,B,t.productServiceForm.invalid))}}function xe(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(2);return e.KtG(u.createProductService())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,B,t.productServiceForm.invalid))}}function Se(r,i){if(1&r&&(e.ynx(0),e.TgZ(1,"div",37),e.ynx(2),e.TgZ(3,"button",38),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,_e,3,6,"ng-container",6),e.YNc(6,xe,3,6,"ng-container",6),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ze=(()=>{class r{constructor(t,n,u,v,S,I,k,Je){this.data=t,this._activatedRoute=n,this._changeDetectorRef=u,this._formBuilder=v,this._fuseConfirmationService=S,this._hrmProductServicesService=I,this._snackBar=k,this.store=Je,this.dialogMode="view",this.user$=(0,R.of)(null),this.merchants$=null,this._unsubscribeAll=new a.x}ngOnInit(){this.user$=this.store.select(V.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(W.UV),this.productServiceForm=this._formBuilder.group({_id:[""],active:[!1],merchantId:["",[c.kI.required]],userId:[this.user._id,[c.kI.required]],type:["",[c.kI.required]],currency:["",[c.kI.required]],cost:[0,[c.kI.required,c.kI.min(1),G.L.onlyNumbersPattern()]],name:["",[c.kI.required,c.kI.minLength(3),c.kI.maxLength(255)]],slug:[""],description:["",[c.kI.maxLength(1e3)]]}),"edit"===this.data.dialogMode&&(this.productServiceForm.patchValue(this.data.productService),this.productServiceForm.get("merchantId").setValue(this.data.productService.merchantId._id))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){let t=this.productServiceForm.getRawValue();t=(0,$.Z)(t,"_id"),t.slug=new J.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._hrmProductServicesService.createProductService(t).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateProductService(){const t=this.productServiceForm.getRawValue();t.slug=new J.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._hrmProductServicesService.updateProductService(t).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,n){return n.id||t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Q.WI),e.Y36(h.gz),e.Y36(e.sBO),e.Y36(c.qu),e.Y36(E.R),e.Y36(F),e.Y36(M.ux),e.Y36(C.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ser-detail"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"flex","sm:items-center"],[1,"min-w-56","font-semibold"],[1,"leading-6"],[1,"w-full","overflow-hidden"],[1,"pt-5"],[1,"grid","grid-cols-2","gap-y-3","gap-x-4","w-full","mt-1",3,"formGroup","autocomplete"],["class","col-span-2 sm:col-span-1",4,"ngIf"],[1,"col-span-2","sm:col-span-1"],[1,"w-full"],["required","",3,"formControlName"],[3,"value"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","required","",3,"type","formControlName","min","placeholder"],[1,"col-span-2","sm:col-span-1","flex","flex-col"],[1,"pt-4","mb-2",3,"value","color","formControlName"],[1,"col-span-2","pt-4","sm:col-span-2"],[1,"w-full","fuse-mat-textarea","flex-auto"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","maxlength"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,oe,2,0,"h2",2),e.YNc(4,ne,2,0,"h2",2),e.YNc(5,ie,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,ce,16,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,he,58,34,"div",5),e.BQk(),e.qZA(),e.YNc(11,Se,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===n.data.productService._id&&"add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.productService._id&&"edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.productService._id&&"view"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===n.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[x.mk,x.sg,x.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.sg,c.u,X.ey,Y.lW,Q.ZT,w.Hw,P.TO,P.KE,P.bx,P.hX,P.qo,ee.Nt,te.gD,re.Rr,x.Ov],encapsulation:2,changeDetection:0}),r})();var Ce=o(393);function be(r,i){1&r&&(e.ynx(0),e._UZ(1,"mat-icon",36),e.BQk()),2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ae(r,i){1&r&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&r&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const ye=function(r){return[r]};function Pe(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29)(2,"div",30),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA(),e.TgZ(6,"div",30),e._uU(7),e.qZA(),e.TgZ(8,"div",31),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",32),e.YNc(12,be,2,1,"ng-container",19),e.YNc(13,Ae,2,1,"ng-container",19),e.qZA(),e.TgZ(14,"div",33)(15,"button",34),e.NdJ("click",function(){const v=e.CHM(t).$implicit,S=e.oxw(4);return e.KtG(S.editProductService(v))}),e._UZ(16,"mat-icon",35),e.qZA(),e.TgZ(17,"button",34),e.NdJ("click",function(){const v=e.CHM(t).$implicit,S=e.oxw(4);return e.KtG(S.deleteProductService(v))}),e._UZ(18,"mat-icon",35),e.qZA()()(),e.BQk()}if(2&r){const t=i.$implicit;e.xp6(3),e.hij(" ",t.merchantId.name," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.type," "),e.xp6(2),e.hij(" ",e.xi3(10,8,t.cost,e.VKq(11,ye,t.currency+" "))," "),e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ie(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Pe,19,13,"ng-container",28),e.BQk()),2&r){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const Te=function(r){return{"pointer-events-none":r}},ke=function(){return[10,25,50,100]};function Ue(r,i){if(1&r&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div"),e._uU(4," Negocio "),e.qZA(),e.TgZ(5,"div",24),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",24),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",24),e._uU(10," Costo "),e.qZA(),e.TgZ(11,"div",25),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",26),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,Ie,2,2,"ng-container",19),e.ALo(16,"async"),e._UZ(17,"mat-paginator",27),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","type"),e.xp6(2),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,11,t.productServices$)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Te,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,ke))("showFirstLastButtons",!0)}}function De(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Ue,18,16,"ng-container",21),e.BQk()),2&r){const t=i.ngIf;e.oxw();const n=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Ne(r,i){1&r&&(e.TgZ(0,"div",38),e._uU(1,"No ha creado ning\xfan producto o servicio a\xfan!"),e.qZA())}const Qe=[{path:"",component:(()=>{class r{constructor(t,n,u,v,S,I){this._changeDetectorRef=t,this._fuseConfirmationService=n,this._productServiceService=u,this._snackBar=v,this.dialog=S,this.store=I,this.merchantId="",this.productService=new D,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new c.NI,this._unsubscribeAll=new a.x}ngOnInit(){this.productServices$=this.store.select(O),this.store.select(z.B).pipe((0,s.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(setTimeout(()=>{this._sort.sort({id:"active",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck()},2e3),this._sort.sortChange.pipe((0,s.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,g.T)(this._sort.sortChange,this._paginator.page).pipe((0,f.w)(()=>(this.isLoading=!0,this._productServiceService.getProductServices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,m.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){this._openDialog(this.productService,"add")}editProductService(t){this._openDialog(t,"edit")}deleteProductService(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar el departamento ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(u=>{"confirmed"===u&&this._productServiceService.deleteProductService(t._id).subscribe(v=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:v.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,n){return n.id||t}_openDialog(t,n){this.dialog.open(Ze,{width:"600px",height:"85%",data:{productService:t,dialogMode:n},panelClass:"ath-dialog-panel"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(E.R),e.Y36(F),e.Y36(M.ux),e.Y36(Q.uw),e.Y36(C.yh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["hrm-productServices"]],viewQuery:function(t,n){if(1&t&&(e.Gf(l.NW,5),e.Gf(p.YE,5)),2&t){let u;e.iGM(u=e.CRH())&&(n._paginator=u.first),e.iGM(u=e.CRH())&&(n._sort=u.first)}},decls:31,vars:7,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent","overflow-hidden","sm:overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noProductServices",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","productServices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","text-center","md:block",3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","productServices-table","md:px-8"],[1,"truncate"],[1,""],[1,"hidden","text-center","md:block"],[1,"flex","flex-col","justify-center","gap-2","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Productos o Servicio"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Productos o Servicio "),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return n.createProductService()}),e._UZ(22,"mat-icon",15),e.TgZ(23,"span",16),e._uU(24,"Nuevo"),e.qZA()()()(),e.TgZ(25,"div",17)(26,"div",18),e.YNc(27,De,2,2,"ng-container",19),e.ALo(28,"async"),e.YNc(29,Ne,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(28,5,n.productServices$)))},dependencies:[h.yS,x.mk,x.sg,x.O5,Ce.PQ,Y.lW,w.Hw,l.NW,p.YE,p.nU,x.Ov,x.H9],encapsulation:2,data:{animation:_.L},changeDetection:0}),r})(),resolve:{prodS:(()=>{class r{constructor(t){this._productServicesService=t}resolve(t,n){return this._productServicesService.getProductServices()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(F))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}];let Fe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[h.Bz.forChild(Qe),d.m]}),r})()}}]);