"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[181],{4525:(Xa,ee,l)=>{l.r(ee),l.d(ee,{ContactsModule:()=>Va});var h=l(5357),A=l(7423),te=l(7446),x=l(508),y=l(6856),be=l(4834),d=l(7322),F=l(5245),U=l(7531),ve=l(2181),e=l(5e3),R=l(5439);const T=R||l.t(R,2),oe=new e.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function ye(){return{useUtc:!1}}});function Te(o,r){const t=Array(o);for(let n=0;n<o;n++)t[n]=r(n);return t}let ke=(()=>{class o extends x._A{constructor(t,n){super(),this._options=n,this.setLocale(t||T.locale())}setLocale(t){super.setLocale(t);let n=T.localeData(t);this._localeData={firstDayOfWeek:n.firstDayOfWeek(),longMonths:n.months(),shortMonths:n.monthsShort(),dates:Te(31,a=>this.createDate(2017,0,a+1).format("D")),longDaysOfWeek:n.weekdays(),shortDaysOfWeek:n.weekdaysShort(),narrowDaysOfWeek:n.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,n,a){const c=this._createMoment({year:t,month:n,date:a}).locale(this.locale);return c.isValid(),c}today(){return this._createMoment().locale(this.locale)}parse(t,n){return t&&"string"==typeof t?this._createMoment(t,n,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,n){return t=this.clone(t),this.isValid(t),t.format(n)}addCalendarYears(t,n){return this.clone(t).add({years:n})}addCalendarMonths(t,n){return this.clone(t).add({months:n})}addCalendarDays(t,n){return this.clone(t).add({days:n})}toIso8601(t){return this.clone(t).format()}deserialize(t){let n;if(t instanceof Date)n=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;n=this._createMoment(t,T.ISO_8601).locale(this.locale)}return n&&this.isValid(n)?this._createMoment(n).locale(this.locale):super.deserialize(t)}isDateInstance(t){return T.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return T.invalid()}_createMoment(t,n,a){const{strict:c,useUtc:s}=this._options||{};return s?T.utc(t,n,a,c):T(t,n,a,c)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(x.Ad,8),e.LFG(oe,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Ie={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Ae=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:x._A,useClass:ke,deps:[x.Ad,oe]}]}),o})(),Fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:x.sG,useValue:Ie}],imports:[Ae]}),o})();var Ue=l(5899),qe=l(9814),k=l(4107),N=l(2638),De=l(8279),q=l(7238);let Je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var Qe=l(6338),Ne=l(262),we=l(2843),w=l(3967),O=l(5181),P=l(5600),$=l(7495),Z=l(5620);let Ee=(()=>{class o{constructor(t){this._contactsService=t}resolve(t,n){return this._contactsService.getContacts()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(w.P))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Le=(()=>{class o{constructor(t,n,a,c,s,u){this._contactsService=t,this._employeesService=n,this._customersService=a,this._usersService=c,this._router=s,this.store=u}resolve(t,n){const a=t.paramMap.get("entity"),c=t.paramMap.get("id");if("new"===c)return;let s;switch(a){case"customer":s=this._customersService.getCustomerById(c);break;case"employee":s=this._employeesService.getEmployeeById(c);break;case"user":s=this._usersService.getUserById(c);break;case"contact":s=this._contactsService.getContactById(c)}return s.pipe((0,Ne.K)(u=>{console.error(u);const g=n.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(g),(0,we._)(u)}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(w.P),e.LFG(O.b),e.LFG(P.v),e.LFG($.K),e.LFG(h.F0),e.LFG(Z.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ye=(()=>{class o{constructor(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[h.lC],encapsulation:2,changeDetection:0}),o})(),Me=(()=>{class o{canDeactivate(t,n,a,c){let s=c.root;for(;s.firstChild;)s=s.firstChild;return!(c.url.includes("/contacts")&&!s.paramMap.get("id"))||t.closeDrawer().then(()=>!0)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=l(7579),_=l(2722),p=l(9808),i=l(3075),I=l(9646),Be=l(3900),Se=l(4968),Re=l(9300),ne=l(2342),re=l(8765),ae=l(814),Oe=l(6428);const ie=o=>o.contacts,Pe=(0,Z.P1)(ie,o=>o.contact),$e=(0,Z.P1)(ie,o=>o.contacts);var j=l(6978),G=l(4077),H=l(1192),K=l(3821),je=l(4880),ce=l(9832),se=l(9685);const Ge=["matDrawer"];function He(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.pagination.length," ")}}const Ke=function(o,r,t){return{"=0":o,"=1":r,other:t}};function Ve(o,r){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,He,2,1,"ng-container",19),e._uU(2),e.ALo(3,"i18nPlural"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.pagination.length>0),e.xp6(1),e.hij(" ",e.xi3(3,2,t.pagination.length,e.kEZ(5,Ke,"Sin "+t.selectedFilter.toLocaleLowerCase(),t.selectedFilter.toLocaleLowerCase().replace("s",""),t.selectedFilter.toLocaleLowerCase()))," ")}}function ze(o,r){if(1&o&&(e.TgZ(0,"div",24)(1,"div",25),e._uU(2),e.qZA(),e.YNc(3,Ve,4,9,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.selectedFilter),e.xp6(1),e.Q6J("ngIf",t.pagination)}}function We(o,r){if(1&o&&(e.TgZ(0,"span",32),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.pagination.length,")")}}function Xe(o,r){if(1&o&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.pagination.length,")")}}function et(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-button-toggle",28)(2,"span",29),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.YNc(5,We,2,1,"span",30),e.YNc(6,Xe,2,1,"span",31),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("value",t),e.xp6(2),e.Oqu(e.lcZ(4,4,t)),e.xp6(2),e.Q6J("ngIf",t===n.selectedFilter&&n.pagination),e.xp6(1),e.Q6J("ngIf",t===n.selectedFilter&&n.isDrawerOpen&&n.pagination)}}function tt(o,r){1&o&&e.GkF(0)}function ot(o,r){if(1&o&&(e.ynx(0),e.YNc(1,tt,1,0,"ng-container",34),e.BQk()),2&o){e.oxw();const t=e.MAs(33);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function nt(o,r){1&o&&e.GkF(0)}function rt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,nt,1,0,"ng-container",34),e.BQk()),2&o){e.oxw();const t=e.MAs(31);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function at(o,r){1&o&&e.GkF(0)}function it(o,r){if(1&o&&(e.ynx(0),e.YNc(1,at,1,0,"ng-container",34),e.BQk()),2&o){e.oxw();const t=e.MAs(29);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ct(o,r){1&o&&e.GkF(0)}function st(o,r){if(1&o&&(e.ynx(0),e.YNc(1,ct,1,0,"ng-container",34),e.BQk()),2&o){e.oxw();const t=e.MAs(27);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function lt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",44),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function mt(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function _t(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",46),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function pt(o,r){if(1&o&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("matTooltip","Negocio asignado"),e.xp6(1),e.Oqu(t.merchantId.name)}}const E=function(o,r){return{"hover:bg-gray-100 dark:hover:bg-hover":o,"bg-primary-50 dark:bg-hover":r}},ut=function(o){return["./user/",o]};function gt(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,lt,3,1,"ng-container",19),e.TgZ(2,"a",39),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",40),e.YNc(4,mt,2,1,"ng-container",19),e.YNc(5,_t,3,1,"ng-container",19),e.qZA(),e.TgZ(6,"div",41)(7,"div",42),e._uU(8),e.qZA(),e.YNc(9,pt,2,2,"div",43),e.qZA()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,E,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(11,ut,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.AsE("",t.name," ",t.lastname," "),e.xp6(1),e.Q6J("ngIf",t.merchantId)}}function dt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,gt,10,13,"ng-container",38),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function ft(o,r){if(1&o&&(e.ynx(0),e.YNc(1,dt,2,2,"ng-container",37),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function ht(o,r){1&o&&(e.TgZ(0,"div",48),e._uU(1," No ha creado ning\xfan usuario a\xfan!"),e.qZA())}function xt(o,r){if(1&o&&(e.TgZ(0,"div",35),e.YNc(1,ft,2,2,"ng-container",19),e.ALo(2,"async"),e.YNc(3,ht,2,0,"ng-template",null,36,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.users$))}}function Ct(o,r){1&o&&(e.ynx(0),e.TgZ(1,"div",50),e._UZ(2,"div",51),e.qZA(),e.TgZ(3,"div",52),e._UZ(4,"div"),e.TgZ(5,"div",53)(6,"span",54),e._uU(7,"Nombre/Sector"),e.qZA()(),e.TgZ(8,"div",55)(9,"span",54),e._uU(10,"Negocio"),e.qZA()(),e.TgZ(11,"div",55)(12,"span",54),e._uU(13,"Cuenta Bancaria"),e.qZA()()(),e.BQk())}function bt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",60)(2,"div",61),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.name.charAt(0)," ")}}function vt(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.logoUrl,e.LSH)}}function Zt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",46),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function yt(o,r){if(1&o&&(e.TgZ(0,"div",62)(1,"span",63),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.merchantId.name,"")}}function Tt(o,r){if(1&o&&(e.TgZ(0,"div",62)(1,"span",63),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.bankAccount,"")}}const kt=function(o){return["./customer/",o]},It=function(o){return{"col-span-3":o}};function At(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,bt,4,1,"ng-container",19),e.TgZ(2,"a",56),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",40),e.YNc(4,vt,2,1,"ng-container",19),e.YNc(5,Zt,3,1,"ng-container",19),e.qZA(),e.TgZ(6,"div",57)(7,"div",42),e._uU(8),e.qZA(),e.TgZ(9,"div",58),e._uU(10),e.qZA()(),e.YNc(11,yt,3,1,"div",59),e.YNc(12,Tt,3,1,"div",59),e.qZA(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,E,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,kt,t._id)),e.xp6(2),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(1),e.Q6J("ngClass",e.VKq(15,It,c.isDrawerOpen)),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.hij(" ",t.domain,""),e.xp6(1),e.Q6J("ngIf",!c.isDrawerOpen),e.xp6(1),e.Q6J("ngIf",!c.isDrawerOpen)}}function Ft(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Ct,14,0,"ng-container",19),e.YNc(2,At,13,17,"ng-container",38),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isDrawerOpen),e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Ut(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Ft,3,3,"ng-container",37),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function qt(o,r){1&o&&(e.TgZ(0,"div",48),e._uU(1," No ha creado ning\xfan cliente a\xfan!"),e.qZA())}function Dt(o,r){if(1&o&&(e.TgZ(0,"div",35),e.YNc(1,Ut,2,2,"ng-container",19),e.ALo(2,"async"),e.YNc(3,qt,2,0,"ng-template",null,49,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.customers$))}}function Jt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",44),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function Qt(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function Nt(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",46),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}const wt=function(o){return["./employee/",o]};function Et(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,Jt,3,1,"ng-container",19),e.TgZ(2,"a",39),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",40),e.YNc(4,Qt,2,1,"ng-container",19),e.YNc(5,Nt,3,1,"ng-container",19),e.qZA(),e.TgZ(6,"div",41)(7,"div",42),e._uU(8),e.qZA(),e.TgZ(9,"div",47),e._uU(10),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,E,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,wt,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.lnq("",t.name," ",t.lastname1," ",t.lastname2,""),e.xp6(1),e.Q6J("matTooltip","Cargo"),e.xp6(1),e.hij(" ",t.charge.name,"")}}function Lt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Et,11,15,"ng-container",38),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Yt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Lt,2,2,"ng-container",37),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function Mt(o,r){1&o&&(e.TgZ(0,"div",48),e._uU(1," No ha creado ning\xfan empleado a\xfan!"),e.qZA())}function Bt(o,r){if(1&o&&(e.TgZ(0,"div",35),e.YNc(1,Yt,2,2,"ng-container",19),e.ALo(2,"async"),e.YNc(3,Mt,2,0,"ng-template",null,64,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.employees$))}}function St(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",44),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function Rt(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",45),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function Ot(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",46),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}const Pt=function(o){return["./contact/",o]};function $t(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,St,3,1,"ng-container",19),e.TgZ(2,"a",39),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",40),e.YNc(4,Rt,2,1,"ng-container",19),e.YNc(5,Ot,3,1,"ng-container",19),e.qZA(),e.TgZ(6,"div",41)(7,"div",42),e._uU(8),e.qZA(),e.TgZ(9,"div",47),e._uU(10),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,E,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,Pt,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.lnq("",t.name," ",t.lastname1," ",t.lastname2,""),e.xp6(1),e.Q6J("matTooltip","Cargo"),e.xp6(1),e.hij(" ",t.charge,"")}}function jt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,$t,11,15,"ng-container",38),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Gt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,jt,2,2,"ng-container",37),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function Ht(o,r){1&o&&(e.TgZ(0,"div",48),e._uU(1,"No ha creado ning\xfan contacto a\xfan!"),e.qZA())}function Kt(o,r){if(1&o&&(e.TgZ(0,"div",35),e.YNc(1,Gt,2,2,"ng-container",19),e.ALo(2,"async"),e.YNc(3,Ht,2,0,"ng-template",null,65,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contacts$))}}let le=(()=>{class o{constructor(t,n,a,c,s,u,g,C,b,v){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsService=a,this._employeesService=c,this._customersService=s,this._usersService=u,this._document=g,this._router=C,this._fuseMediaWatcherService=b,this.store=v,this.contacts$=(0,I.of)([]),this.users$=(0,I.of)([]),this.employees$=(0,I.of)([]),this.customers$=(0,I.of)([]),this.isDrawerOpen=!1,this.searchInputControl=new i.NI(""),this.filters=["Contactos","Clientes","Empleados","Usuarios"],this.selectedFilter="Contactos",this._unsubscribeAll=new D.x}ngOnInit(){this.contacts$=this.store.select($e),this.employees$=this.store.select(ne.ri),this.customers$=this.store.select(ae.p6),this.users$=this.store.select(re.YN),this.store.select(Oe.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,Be.w)(t=>this.getItems(0,20,"name","asc",t))).subscribe(),this.matDrawer.openedChange.subscribe(t=>{if(!t){switch(this.selectedFilter){case"Clientes":this.store.dispatch((0,K.UP)());break;case"Empleados":this.store.dispatch((0,H.WU)());break;case"Usuarios":this.store.dispatch((0,G.pn)());break;case"Contactos":this.store.dispatch((0,j.Di)())}this.selectedItem=null}this.isDrawerOpen=t,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.drawerMode=t.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()}),(0,Se.R)(this._document,"keydown").pipe((0,_.R)(this._unsubscribeAll),(0,Re.h)(t=>(!0===t.ctrlKey||t.metaKey)&&"/"===t.key)).subscribe(t=>{this.createEntity()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onScrollDown(){(this.pagination.page+1)*this.pagination.size<this.pagination.length&&this.getItems(this.pagination.page+1,20,"name","asc",this.searchInputControl.value,!0).pipe((0,_.R)(this._unsubscribeAll)).subscribe()}onScrollUp(){console.log("onScrollUp")}onFilterChange(t){this.selectedFilter=t.value;const n=this.getItems(0,20,"name","asc",this.searchInputControl.value).subscribe();setTimeout(()=>{n.unsubscribe()},2e4)}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createEntity(){switch(this.selectedItem=null,this.selectedFilter){case"Clientes":this._router.navigate(["./customer","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,K.UP)());break;case"Empleados":this._router.navigate(["./employee","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,H.WU)());break;case"Usuarios":this._router.navigate(["./user","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,G.pn)());break;case"Contactos":this._router.navigate(["./contact","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,j.Di)())}}trackByFn(t,n){return n.id||t}setSelectedItem(t){this.selectedItem&&t._id===this.selectedItem._id?this._router.navigate(["/modules/contacts"]):this.selectedItem=t}getItems(t=0,n=10,a="name",c="asc",s="",u=!1){switch(this.selectedFilter){case"Clientes":return this._customersService.getCustomers(t,n,a,c,s,u);case"Empleados":return this._employeesService.getEmployees(t,n,a,c,s,u);case"Usuarios":return this._usersService.getUsers(t,n,a,c,s,u);default:return this._contactsService.getContacts(t,n,a,c,s)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(w.P),e.Y36(O.b),e.Y36(P.v),e.Y36($.K),e.Y36(p.K0),e.Y36(h.F0),e.Y36(je.T),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ge,7),2&t){let a;e.iGM(a=e.CRH())&&(n.matDrawer=a.first)}},decls:34,vars:21,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],["infiniteScroll","",1,"flex","flex-col",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrollWindow","scrolled","scrolledUp"],[1,"flex-auto"],[1,"flex","flex-col","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8","border-b"],[1,"flex","flex-col","sm:flex-row","sm:justify-between"],["class","hidden md:block",4,"ngIf"],[1,"overflow-auto","sm:overflow-hidden"],[1,"sm:flex","sm:flex-wrap","sm:-m-2",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"flex","items-center","mt-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf"],["userListContent",""],["customerListContent",""],["employeesListContent",""],["contactListContent",""],[1,"hidden","md:block"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["class","ml-0.5 font-medium text-secondary",4,"ngIf"],[1,"ml-0.5","font-medium","text-secondary"],[1,"m-2",3,"value"],[1,"text-secondary"],["class","md:hidden ml-1.5 font-medium text-secondary",4,"ngIf"],["class","ml-1.5 font-medium text-secondary",4,"ngIf"],[1,"md:hidden","ml-1.5","font-medium","text-secondary"],[1,"ml-1.5","font-medium","text-secondary"],[4,"ngTemplateOutlet"],[1,"relative"],["noUsers",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-20","flex","items-center","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"ngClass","routerLink","click"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],["class","leading-5 truncate text-secondary",3,"matTooltip",4,"ngIf"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],["alt","Contact imageUrl",1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"leading-5","truncate","text-secondary",3,"matTooltip"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"],["noCustomers",""],[1,"hidden","sm:block","bg-gray-50","absolute","w-full"],[1,"h-8"],[1,"z-20","h-8","sticky","top-0","-mt-px","px-6","md:px-8","border-t","border-b","dark:bg-gray-900","text-secondary","hidden","sm:grid","contacts-employees-table"],[1,"bg-gray-50","h-full","grid","items-center"],[1,"text-sm"],[1,"bg-gray-50","h-full","items-center","hidden","md:grid"],[1,"z-20","grid","tems-center","px-6","py-4","md:px-8","cursor-pointer","border-b","contacts-employees-table",3,"ngClass","routerLink","click"],[1,"grid","grid-rows-2",3,"ngClass"],[1,"leading-5","truncate","text-secondary"],["class","hidden md:grid grid-rows-2",4,"ngIf"],[1,"z-10","h-8","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","bg-gray-50","dark:bg-gray-900","text-secondary"],[1,"bg-gray-50","w-4","text-center"],[1,"hidden","md:grid","grid-rows-2"],[1,"row-start-2","leading-5","truncate","text-secondary"],["noEmployees",""],["noContacts",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-drawer-container",1),e.NdJ("backdropClick",function(){return n.onBackdropClicked()}),e.TgZ(2,"mat-drawer",2,3),e._UZ(4,"router-outlet"),e.qZA(),e.TgZ(5,"mat-drawer-content",4),e.NdJ("scrolled",function(){return n.onScrollDown()})("scrolledUp",function(){return n.onScrollUp()}),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7),e.YNc(9,ze,4,2,"div",8),e.TgZ(10,"div",9)(11,"mat-button-toggle-group",10),e.NdJ("ngModelChange",function(c){return n.selectedFilter=c})("change",function(c){return n.onFilterChange(c)}),e.YNc(12,et,7,6,"ng-container",11),e.qZA()()(),e.TgZ(13,"div",12)(14,"div",5)(15,"mat-form-field",13),e._UZ(16,"mat-icon",14)(17,"input",15),e.qZA()(),e.TgZ(18,"button",16),e.NdJ("click",function(){return n.createEntity()}),e._UZ(19,"mat-icon",17),e.TgZ(20,"span",18),e._uU(21,"Nuevo"),e.qZA()()()(),e.YNc(22,ot,2,1,"ng-container",19),e.YNc(23,rt,2,1,"ng-container",19),e.YNc(24,it,2,1,"ng-container",19),e.YNc(25,st,2,1,"ng-container",19),e.YNc(26,xt,5,3,"ng-template",null,20,e.W1O),e.YNc(28,Dt,5,3,"ng-template",null,21,e.W1O),e.YNc(30,Bt,5,3,"ng-template",null,22,e.W1O),e.YNc(32,Kt,5,3,"ng-template",null,23,e.W1O),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.xp6(3),e.Q6J("infiniteScrollDistance",2)("infiniteScrollUpDistance",2)("infiniteScrollThrottle",150)("scrollWindow",!1),e.xp6(4),e.Q6J("ngIf",!n.isDrawerOpen),e.xp6(2),e.Q6J("ngModel",n.selectedFilter),e.xp6(1),e.Q6J("ngForOf",n.filters),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar "+n.selectedFilter.toLocaleLowerCase()),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(3),e.Q6J("ngIf","Contactos"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Empleados"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Clientes"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Usuarios"===n.selectedFilter))},dependencies:[h.lC,h.yS,A.lW,d.KE,d.qo,F.Hw,U.Nt,N.jA,N.kh,N.LW,q.gM,p.mk,p.sg,p.O5,p.tP,i.Fj,i.JJ,i.On,i.oH,ce.A9,ce.Yi,se.Ry,p.Ov,p.rS,p.Gx],encapsulation:2,changeDetection:0}),o})();var L=l(4787),Y=l(1910),m=l(2491),J=l(7489),Q=l(4062),f=l(9784),V=l(1158),M=l(1683),B=l(7261),S=l(7231);function Vt(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.contact.merchantId.coverUrl,e.LSH)}}function zt(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.contact.imageUrl,e.LSH)}}function Wt(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.contact.name.charAt(0)," ")}}const me=function(){return["../../"]};function Xt(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Vt,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,zt,1,1,"img",10),e.YNc(11,Wt,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.contact.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,me)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.contact.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.contact.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.contact.name),e.xp6(3),e.Oqu("Contacto")}}function eo(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.contact.merchantId.coverUrl,e.LSH)}}function to(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",55,56),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",57),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function oo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",58),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function no(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.contact.imageUrl,e.LSH)}}function ro(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.contact.name.charAt(0)," ")}}function ao(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function io(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function co(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function so(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function lo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function mo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function _o(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function po(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function uo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function go(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto es obligatorio. "),e.qZA())}function fo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto debe contener entre 3 y 255 caracteres. "),e.qZA())}function ho(o,r){if(1&o&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function xo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function Co(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function bo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function vo(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function Zo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",59)(2,"span",64),e._UZ(3,"span",66),e.TgZ(4,"span",15),e._uU(5),e.qZA(),e.TgZ(6,"span",67),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function yo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function To(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function ko(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function Io(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.qZA())}function Ao(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Fo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}const _e=function(o){return{"mt-6":o}};function Uo(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",70)(2,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,_e,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function qo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",60)(2,"mat-form-field",61),e.YNc(3,vo,2,0,"mat-label",1),e._UZ(4,"input",62),e.TgZ(5,"mat-select",63)(6,"mat-select-trigger")(7,"span",64)(8,"span",65),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",59)(11,"span",64),e._UZ(12,"span",66),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",67),e._uU(17),e.qZA()()(),e.YNc(18,Zo,8,3,"ng-container",42),e.qZA(),e.YNc(19,yo,2,0,"mat-error",1),e.YNc(20,To,2,0,"mat-error",1),e.YNc(21,ko,2,0,"mat-error",1),e.YNc(22,Io,2,0,"mat-error",1),e.qZA(),e.TgZ(23,"mat-form-field",68),e.YNc(24,Ao,2,0,"mat-label",1),e._UZ(25,"mat-icon",37)(26,"input",69),e.YNc(27,Fo,2,0,"mat-error",1),e.qZA(),e.YNc(28,Uo,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.index,a=r.first,c=r.last,s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.contactForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,25,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("required")),e.xp6(2),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function Do(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function Jo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function Qo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio "),e.qZA())}function No(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function wo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}function Eo(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",70)(2,"button",74),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,_e,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Lo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",72)(2,"mat-form-field",61),e.YNc(3,Do,2,0,"mat-label",1),e._UZ(4,"mat-icon",37)(5,"input",73),e.YNc(6,Jo,2,0,"mat-error",1),e.YNc(7,Qo,2,0,"mat-error",1),e.qZA(),e.TgZ(8,"mat-form-field",68),e.YNc(9,No,2,0,"mat-label",1),e._UZ(10,"mat-icon",37)(11,"input",69),e.YNc(12,wo,2,0,"mat-error",1),e.qZA(),e.YNc(13,Eo,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.first,a=r.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("required")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function Yo(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Mo(o,r){if(1&o&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Bo(o,r){if(1&o&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function So(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteContact())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const pe=function(o){return{"cursor-not-allowed":o}};function Ro(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateContact())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.contactForm.invalid)("matTooltip","Salvar")("disabled",t.contactForm.invalid)("ngClass",e.VKq(5,pe,t.contactForm.invalid))}}function Oo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createContact())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.contactForm.invalid)("matTooltip","Salvar")("disabled",t.contactForm.invalid)("ngClass",e.VKq(5,pe,t.contactForm.invalid))}}function Po(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,eo,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",23)(7,"div",7)(8,"form",24)(9,"div",25)(10,"div",26),e._UZ(11,"div",27),e.TgZ(12,"div",28),e.YNc(13,to,5,3,"div",1),e.YNc(14,oo,3,1,"div",1),e.qZA(),e.YNc(15,no,1,1,"img",10),e.YNc(16,ro,2,1,"div",11),e.qZA()(),e.TgZ(17,"span",29),e._uU(18,"Informaci\xf3n General "),e.qZA(),e.TgZ(19,"div",30)(20,"div",31)(21,"mat-form-field",32)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",33),e.YNc(25,ao,2,0,"mat-error",1),e.YNc(26,io,2,0,"mat-error",1),e.YNc(27,co,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",31)(29,"mat-form-field",32)(30,"mat-label"),e._uU(31,"Primer Apellido"),e.qZA(),e._UZ(32,"input",34),e.YNc(33,so,2,0,"mat-error",1),e.YNc(34,lo,2,0,"mat-error",1),e.YNc(35,mo,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",31)(37,"mat-form-field",32)(38,"mat-label"),e._uU(39,"Segundo Apellido"),e.qZA(),e._UZ(40,"input",34),e.YNc(41,_o,2,0,"mat-error",1),e.YNc(42,po,2,0,"mat-error",1),e.YNc(43,uo,2,0,"mat-error",1),e.qZA()(),e.TgZ(44,"div",31)(45,"mat-form-field",32)(46,"mat-label"),e._uU(47,"Cargo"),e.qZA(),e._UZ(48,"input",34),e.YNc(49,go,2,0,"mat-error",1),e.YNc(50,fo,2,0,"mat-error",1),e.qZA()(),e.TgZ(51,"div",31)(52,"mat-form-field",32)(53,"mat-label"),e._uU(54,"Negocio"),e.qZA(),e.TgZ(55,"mat-select",35),e.YNc(56,ho,2,2,"mat-option",36),e.ALo(57,"async"),e.qZA(),e.YNc(58,xo,2,0,"mat-error",1),e.TgZ(59,"mat-hint"),e._uU(60,"Negocio al cual pertenece el empleado"),e.qZA()()(),e.TgZ(61,"div",31)(62,"mat-form-field",32)(63,"mat-label"),e._uU(64,"N\xfamero de identidad"),e.qZA(),e._UZ(65,"mat-icon",37)(66,"input",38),e.YNc(67,Co,2,0,"mat-error",1),e.YNc(68,bo,2,0,"mat-error",1),e.qZA()()(),e.TgZ(69,"span",29),e._uU(70,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(71,"div",39)(72,"div",40)(73,"div",41),e.YNc(74,qo,29,27,"ng-container",42),e.qZA(),e.TgZ(75,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(76,"mat-icon",14),e.TgZ(77,"span",44),e._uU(78,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(79,"div",40)(80,"div",41),e.YNc(81,Lo,14,14,"ng-container",42),e.qZA(),e.TgZ(82,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(83,"mat-icon",14),e.TgZ(84,"span",44),e._uU(85,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(86,"span",29),e._uU(87,"Domicilio"),e.qZA(),e.TgZ(88,"div",45)(89,"div",31)(90,"mat-form-field",32)(91,"mat-label"),e._uU(92,"Direcci\xf3n"),e.qZA(),e._UZ(93,"mat-icon",37)(94,"input",46),e.YNc(95,Yo,2,0,"mat-error",1),e.qZA()(),e.TgZ(96,"div",31)(97,"mat-form-field",32)(98,"mat-label"),e._uU(99,"Provincia"),e.qZA(),e.TgZ(100,"mat-select",47),e.YNc(101,Mo,2,2,"mat-option",36),e.qZA(),e._UZ(102,"mat-icon",48),e.qZA()(),e.TgZ(103,"div",31)(104,"mat-form-field",49)(105,"mat-label"),e._uU(106,"Municipio"),e.qZA(),e.TgZ(107,"mat-select",47),e.YNc(108,Bo,2,2,"mat-option",36),e.qZA(),e._UZ(109,"mat-icon",48),e.qZA()(),e.TgZ(110,"div",31)(111,"mat-form-field",49)(112,"mat-label"),e._uU(113,"Pa\xeds"),e.qZA(),e.TgZ(114,"mat-select",47)(115,"mat-option",50),e._uU(116,"Cuba"),e.qZA()(),e._UZ(117,"mat-icon",48),e.qZA()()(),e.TgZ(118,"div",51),e.YNc(119,So,2,2,"button",52),e.TgZ(120,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(121," Cancelar "),e.qZA(),e.YNc(122,Ro,2,7,"button",54),e.YNc(123,Oo,2,7,"button",54),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.contact&&t.contact.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(77,me)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",t.contactForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contact&&!t.contact.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("maxlength")||t.contactForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","charge")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("charge")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,75,t.merchants$))("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngIf",t.contactForm.get("merchantId").hasError("required")),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("maxlength")||t.contactForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("pattern")),e.xp6(6),e.Q6J("ngForOf",t.contactForm.get("phoneNumbers").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",t.contactForm.get("emails").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("address").hasError("maxlength")||t.contactForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",t.states)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",t.cities)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(2),e.Q6J("ngIf","add"!==t.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}let $o=(()=>{class o{constructor(t,n,a,c,s,u,g,C,b,v){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsService=a,this._locationService=c,this._formBuilder=s,this._fuseConfirmationService=u,this._router=g,this._snackBar=C,this._imagesService=b,this.store=v,this.cities=[],this.user$=(0,I.of)(null),this.merchants$=null,this.states=[],this.statesCodes=[],this._unsubscribeAll=new D.x}ngOnInit(){this.user$=this.store.select(L.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.contact$=this.store.select(Pe),this.contact$.subscribe(t=>{this.contact=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(Y.UV),this._locationService.states$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.contactForm=this._formBuilder.group({_id:[""],merchantId:["",[i.kI.required]],userId:[this.user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),m.L.onlyNumbersPattern()]],charge:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0}],state:[""],city:[""],imageUrl:[""]}),this.contactForm.get("state").valueChanges.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.contactForm.reset(),this.contactForm.get("country").setValue("Cuba"),this.contactForm.get("userId").setValue(this.user._id),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createContact(){let t=this.contactForm.getRawValue();t=(0,J.omit)(t,"_id"),t.slug=new Q.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Contacto",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._contactsService.createContact(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._router.navigate(["../",c.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})})}updateContact(){const t=this.contactForm.getRawValue();t.slug=new Q.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Contacto",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._contactsService.updateContact(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",fappearance:"fill",type:"success"}}),this.store.dispatch((0,j.sy)({contact:c.data})),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}deleteContact(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el contacto? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._contactsService.deleteContact(this.contact._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",fappearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("Contact",a).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.contactForm.get("imageUrl").setValue(c.imageUrl),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.contactForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("Contact",t).subscribe(s=>{this.contactForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}})})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.contact&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){if("add"===t){const n=[];n.push(this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.contactForm.get("emails").push(c)});const a=[];a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(c=>{this.contactForm.get("phoneNumbers").push(c)})}else{this._getCitiesByState(this.contact.state),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(this.contact),this.contactForm.get("merchantId").setValue(this.contact.merchantId._id);const n=[];this.contact.emails.length>0?this.contact.emails.forEach(c=>{n.push(this._formBuilder.group({email:[c.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):n.push(this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.contactForm.get("emails").push(c)});const a=[];this.contact.phoneNumbers.length>0?this.contact.phoneNumbers.forEach(c=>{a.push(this._formBuilder.group({stateCode:[c.stateCode,[i.kI.required]],phoneNumber:[c.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(c=>{this.contactForm.get("phoneNumbers").push(c)}),this._changeDetectorRef.markForCheck()}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(w.P),e.Y36(V.a),e.Y36(i.qu),e.Y36(M.R),e.Y36(h.F0),e.Y36(B.ux),e.Y36(S.C),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contact-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName","maxlength","minlength"],[1,"grid","sm:grid-cols-2","gap-y-6","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],["matInput","",3,"type","formControlName","minLength","maxlength"],[3,"formControlName"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","fuse-mat-no-subscript"],["value","Cuba"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-6","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Xt,23,10,"ng-container",1),e.YNc(2,Po,124,78,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.contact&&n.contact.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,A.lW,d.TO,d.KE,d.bx,d.hX,d.qo,F.Hw,U.Nt,x.wG,k.gD,k.$L,x.ey,q.gM,p.mk,p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.oH,i.sg,i.u,p.Ov,p.rS],encapsulation:2,changeDetection:0}),o})();var jo=l(6365),Go=l(8966),z=l(2368);function Ho(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.customer.merchantId.coverUrl,e.LSH)}}function Ko(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.customer.logoUrl,e.LSH)}}function Vo(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.customer.name.charAt(0)," ")}}const ue=function(){return["../../"]};function zo(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Ho,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,Ko,1,1,"img",10),e.YNc(11,Vo,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.customer.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,ue)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.customer.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.customer.logoUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.customer.name),e.xp6(3),e.Oqu("Cliente")}}function Wo(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.customerForm.get("coverUrl").value,e.LSH)}}function Xo(o,r){1&o&&e._UZ(0,"div",74)}function en(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",75,76),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadCustomer(a.files))}),e.qZA(),e.TgZ(3,"label",77),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function tn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeCustomer())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function on(o,r){1&o&&e._UZ(0,"div",79)}function nn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",75,76),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",77),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function rn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function an(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.customer.logoUrl,e.LSH)}}function cn(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.customer.name.charAt(0)," ")}}function sn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio es obligatorio. "),e.qZA())}function ln(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio debe contener entre 3 y 255 caracteres. "),e.qZA())}function mn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas no deben superar los 10 caracteres. "),e.qZA())}function _n(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function pn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function un(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function gn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un sector. "),e.qZA())}function dn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria debe superar los 15 caracteres. "),e.qZA())}function fn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un moneda. "),e.qZA())}function hn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function xn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Cn(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function bn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function vn(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function Zn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function yn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function Tn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function kn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal es obligatorio. "),e.qZA())}function In(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",84)(2,"div",85)(3,"span",86),e._uU(4,"Nombre:"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div",85)(8,"span",87),e._uU(9,"Cargo:"),e.qZA(),e.TgZ(10,"span",88),e._uU(11),e.qZA()(),e.TgZ(12,"div",85)(13,"span",89),e._uU(14,"Tel\xe9fono:"),e.qZA(),e.TgZ(15,"span",90),e._uU(16),e.qZA()(),e.TgZ(17,"div",85)(18,"span",91),e._uU(19,"Correo electr\xf3nico:"),e.qZA(),e.TgZ(20,"span",92),e._uU(21),e.qZA()()(),e.ynx(22),e.TgZ(23,"div",93)(24,"button",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(3);return e.KtG(c.removeContactField(a))}),e._UZ(25,"mat-icon",14),e.qZA(),e.TgZ(26,"button",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),c=a.$implicit,s=a.index,u=e.oxw(3);return e.KtG(u._openDialog(c.getRawValue(),"edit",s))}),e._UZ(27,"mat-icon",14),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.get("name").value),e.xp6(5),e.Oqu(t.get("charge").value),e.xp6(5),e.Oqu(t.get("phoneNumbers").controls[0].get("phoneNumber").value),e.xp6(5),e.Oqu(t.get("emails").controls[0].get("email").value),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil")}}function An(o,r){if(1&o&&(e.ynx(0),e.YNc(1,In,28,6,"div",82),e.BQk()),2&o){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function Fn(o,r){if(1&o&&(e.TgZ(0,"div",80),e.YNc(1,An,2,1,"ng-container",81),e.qZA()),2&o){const t=r.ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Un(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteCustomer())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const ge=function(o){return{"cursor-not-allowed":o}};function qn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.customerForm.invalid)("matTooltip","Salvar")("disabled",t.customerForm.invalid)("ngClass",e.VKq(5,ge,t.customerForm.invalid))}}function Dn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.customerForm.invalid)("matTooltip","Salvar")("disabled",t.customerForm.invalid)("ngClass",e.VKq(5,ge,t.customerForm.invalid))}}function Jn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Wo,2,1,"ng-container",1),e.YNc(3,Xo,1,0,"div",23),e.TgZ(4,"div",24),e.YNc(5,en,5,3,"div",1),e.YNc(6,tn,3,1,"div",1),e.qZA(),e.TgZ(7,"div",25)(8,"button",26),e._UZ(9,"mat-icon",5),e.qZA()()(),e.TgZ(10,"div",27)(11,"div",7)(12,"form",28)(13,"div",29)(14,"div",30),e.YNc(15,on,1,0,"div",31),e.TgZ(16,"div",32),e.YNc(17,nn,5,3,"div",1),e.YNc(18,rn,3,1,"div",1),e.qZA(),e.YNc(19,an,1,1,"img",10),e.YNc(20,cn,2,1,"div",11),e.qZA()(),e.TgZ(21,"span",33),e._uU(22,"Informaci\xf3n General "),e.qZA(),e.TgZ(23,"div",34)(24,"div",35)(25,"mat-form-field",36)(26,"mat-label"),e._uU(27,"Nombre"),e.qZA(),e._UZ(28,"input",37),e.YNc(29,sn,2,0,"mat-error",1),e.YNc(30,ln,2,0,"mat-error",1),e.qZA()(),e.TgZ(31,"div",35)(32,"mat-form-field",36)(33,"mat-label"),e._uU(34,"Siglas"),e.qZA(),e._UZ(35,"input",38),e.YNc(36,mn,2,0,"mat-error",1),e.qZA()(),e.TgZ(37,"div",35)(38,"mat-form-field",36)(39,"mat-label"),e._uU(40,"Negocio"),e.qZA(),e.TgZ(41,"mat-select",39),e.YNc(42,_n,2,2,"mat-option",40),e.ALo(43,"async"),e.qZA(),e.YNc(44,pn,2,0,"mat-error",1),e.TgZ(45,"mat-hint"),e._uU(46,"Negocio al cual pertenece el Cliente"),e.qZA()()(),e.TgZ(47,"div",35)(48,"mat-form-field",36)(49,"mat-label"),e._uU(50,"Sector"),e.qZA(),e.TgZ(51,"mat-select",39),e.YNc(52,un,2,2,"mat-option",40),e.qZA(),e.TgZ(53,"mat-hint"),e._uU(54,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.qZA(),e.YNc(55,gn,2,0,"mat-error",1),e.qZA()(),e.TgZ(56,"div",35)(57,"mat-form-field",36)(58,"mat-label"),e._uU(59,"Tipo de Negocio"),e.qZA(),e.TgZ(60,"mat-select",39)(61,"mat-option",41),e._uU(62,"Comercio"),e.qZA()(),e.TgZ(63,"mat-hint"),e._uU(64,"Escoja su tipo de negocio"),e.qZA()()(),e.TgZ(65,"div",35)(66,"mat-form-field",42)(67,"mat-label"),e._uU(68,"Fecha de Constituci\xf3n"),e.qZA(),e._UZ(69,"mat-datepicker-toggle",43)(70,"mat-datepicker",null,44)(72,"input",45),e.qZA()(),e.TgZ(73,"div",35)(74,"mat-form-field",36)(75,"mat-label"),e._uU(76,"NIF"),e.qZA(),e._UZ(77,"input",38),e.TgZ(78,"mat-hint"),e._uU(79,"N\xfamero de Identificaci\xf3n Fiscal"),e.qZA()()(),e.TgZ(80,"div",35)(81,"mat-form-field",36)(82,"mat-label"),e._uU(83,"Cuenta bancaria"),e.qZA(),e._UZ(84,"input",46),e.YNc(85,dn,2,0,"mat-error",1),e.qZA()(),e.TgZ(86,"div",35)(87,"mat-form-field",36)(88,"mat-label"),e._uU(89,"Moneda por defecto"),e.qZA(),e.TgZ(90,"mat-select",47)(91,"mat-option",48),e._uU(92,"CUP"),e.qZA(),e.TgZ(93,"mat-option",49),e._uU(94,"MLC"),e.qZA(),e.TgZ(95,"mat-option",50),e._uU(96,"USD"),e.qZA(),e.TgZ(97,"mat-option",51),e._uU(98,"MXN"),e.qZA()(),e._UZ(99,"mat-icon",52),e.YNc(100,fn,2,0,"mat-error",1),e.qZA()(),e.TgZ(101,"div",53)(102,"span",54),e._uU(103,"Estado"),e.qZA(),e.TgZ(104,"mat-slide-toggle",55),e._uU(105," Activo "),e.qZA()(),e.TgZ(106,"div",56)(107,"mat-form-field",57)(108,"mat-label"),e._uU(109,"Descripci\xf3n del Negocio"),e.qZA(),e._UZ(110,"mat-icon",58)(111,"textarea",59),e.qZA()()(),e.TgZ(112,"span",33),e._uU(113,"Domicilio del Negocio"),e.qZA(),e.TgZ(114,"div",34)(115,"div",35)(116,"mat-form-field",36)(117,"mat-label"),e._uU(118,"Direcci\xf3n"),e.qZA(),e._UZ(119,"mat-icon",58)(120,"input",60),e.YNc(121,hn,2,0,"mat-error",1),e.YNc(122,xn,2,0,"mat-error",1),e.qZA()(),e.TgZ(123,"div",35)(124,"mat-form-field",36)(125,"mat-label"),e._uU(126,"Provincia"),e.qZA(),e._UZ(127,"mat-icon",52),e.TgZ(128,"mat-select",39),e.YNc(129,Cn,2,2,"mat-option",40),e.qZA(),e.YNc(130,bn,2,0,"mat-error",1),e.qZA()(),e.TgZ(131,"div",35)(132,"mat-form-field",36)(133,"mat-label"),e._uU(134,"Municipio"),e.qZA(),e._UZ(135,"mat-icon",52),e.TgZ(136,"mat-select",39),e.YNc(137,vn,2,2,"mat-option",40),e.qZA(),e.YNc(138,Zn,2,0,"mat-error",1),e.qZA()(),e.TgZ(139,"div",35)(140,"mat-form-field",36)(141,"mat-label"),e._uU(142,"Pa\xeds"),e.qZA(),e.TgZ(143,"mat-select",39)(144,"mat-option",61),e._uU(145,"Cuba"),e.qZA()(),e._UZ(146,"mat-icon",52),e.YNc(147,yn,2,0,"mat-error",1),e.qZA()(),e.TgZ(148,"div",35)(149,"mat-form-field",62)(150,"mat-label"),e._uU(151,"C\xf3digo Postal"),e.qZA(),e._UZ(152,"input",63),e.YNc(153,Tn,2,0,"mat-error",1),e.YNc(154,kn,2,0,"mat-error",1),e.qZA()()(),e.TgZ(155,"span",33),e._uU(156,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(157,"div",64),e.YNc(158,Fn,2,2,"div",65),e.TgZ(159,"div",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a._openDialog(null,"add"))}),e._UZ(160,"mat-icon",14),e.TgZ(161,"span",67),e._uU(162,"Agregar Contacto"),e.qZA()(),e.TgZ(163,"div",68)(164,"mat-form-field",42)(165,"mat-label"),e._uU(166,"P\xe1gina Web"),e.qZA(),e._UZ(167,"mat-icon",58)(168,"input",69),e.qZA()()(),e.TgZ(169,"div",70),e.YNc(170,Un,2,2,"button",71),e.TgZ(171,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(172," Cancelar "),e.qZA(),e.YNc(173,qn,2,7,"button",73),e.YNc(174,Dn,2,7,"button",73),e.qZA()()()(),e.BQk()}if(2&o){const t=e.MAs(71),n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",!n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("ngIf",!n.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(93,ue)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",n.customerForm)("autocomplete","off"),e.xp6(3),e.Q6J("ngIf",!n.customerForm.get("logoUrl").value),e.xp6(2),e.Q6J("ngIf",!n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customer&&!n.customer.logoUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("maxlength")||n.customerForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("type","text")("formControlName","abbr")("maxlength",10),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("abbr").hasError("maxlength")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(43,91,n.merchants$))("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("ngIf",n.customerForm.get("merchantId").hasError("required")),e.xp6(7),e.Q6J("formControlName","domain"),e.xp6(1),e.Q6J("ngForOf",n.domains)("ngForTrackBy",n.trackByFn),e.xp6(3),e.Q6J("ngIf",n.customerForm.get("domain").hasError("required")),e.xp6(5),e.Q6J("formControlName","customerType"),e.xp6(1),e.Q6J("value","comercio"),e.xp6(8),e.Q6J("for",t),e.xp6(3),e.Q6J("matDatepicker",t)("formControlName","foundationDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("type","text")("formControlName","nif")("maxlength",255),e.xp6(7),e.Q6J("type","text")("formControlName","bankAccount")("minLength",16)("maxLength",24),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("bankAccount").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("currency").hasError("required")),e.xp6(4),e.Q6J("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("maxlength")||n.customerForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",n.states)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("state").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",n.cities)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("country").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("min",9999)("max",99999),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("min")||n.customerForm.get("postalCode").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("required")),e.xp6(4),e.Q6J("ngIf",n.customerForm.get("contacts").controls),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:globe-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","website"),e.xp6(2),e.Q6J("ngIf","add"!==n.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===n.actionMode),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode)}}let Qn=(()=>{class o{constructor(t,n,a,c,s,u,g,C,b,v,X){this._activatedRoute=t,this._changeDetectorRef=n,this._customersService=a,this._locationService=c,this._formBuilder=s,this._fuseConfirmationService=u,this._router=g,this._snackBar=C,this._imagesService=b,this.dialog=v,this.store=X,this.cities=[],this.user$=(0,I.of)(null),this.merchants$=null,this.states=[],this.statesCodes=[],this.domainCode="",this.domains=[],this.stateCode="",this._unsubscribeAll=new D.x}ngOnInit(){this.user$=this.store.select(L.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.customer$=this.store.select(ae.H5),this.customer$.subscribe(t=>{this.customer=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(Y.UV),this._customersService.getDomains().pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.domains=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.customerForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[i.kI.required]],merchantId:["",[i.kI.required]],active:[!0],owner:[this.user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],abbr:["",[i.kI.maxLength(10)]],domain:["",[i.kI.required]],customerType:[{value:"comercio",disabled:!0},[i.kI.required]],foundationDate:[""],nif:["",i.kI.maxLength(255)],bankAccount:["",[i.kI.minLength(16),i.kI.maxLength(24)]],currency:["",[i.kI.required]],address:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],state:["",[i.kI.required]],city:["",[i.kI.required]],country:["",[i.kI.required]],postalCode:[0,[i.kI.max(99999),i.kI.min(9999)]],contacts:this._formBuilder.array([]),website:["",[i.kI.maxLength(255)]],description:["",[i.kI.maxLength(1e3)]],logoUrl:[""],coverUrl:[""],code:[""]}),this.customerForm.get("state").valueChanges.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.customerForm.reset(),this.customerForm.get("country").setValue("Cuba"),this.customerForm.get("userId").setValue(this.user._id),this.customerForm.get("owner").setValue(this.user._id),this.customerForm.get("customerType").setValue("comercio"),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeContactField(t){this._fuseConfirmationService.open({title:"Quitar contacto",message:"\xbfEsta seguro que desea quitar este contacto de la lista?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&(this.customerForm.get("contacts").removeAt(t),this._changeDetectorRef.markForCheck())})}createCustomer(){const t=`${this.stateCode}-${this.domainCode}-${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.customerForm.get("code").setValue(t);let n=this.customerForm.getRawValue();n.slug=new Q.i(n.name).slug,n=(0,J.omit)(n,"_id"),this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._customersService.createCustomer(n).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigate(["../",s.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()},s=>{console.log(s.error.message)}),this._changeDetectorRef.markForCheck()})}updateCustomer(){const t=this.customerForm.getRawValue();t.slug=new Q.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar datos del negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customersService.updateCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.store.dispatch((0,K.Xg)({customer:c.data})),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)}),this._changeDetectorRef.markForCheck()})}deleteCustomer(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el customero? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._customersService.deleteCustomer(this.customer._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",fappearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t,n="logoUrl"){if(!t.length)return;const c=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(c.type)||this._imagesService.uploadImage("Customer",c).subscribe(s=>{switch(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===n?" logo ":" cover "} cargada correctamente`,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.customerForm.get(n).setValue(s.imageUrl),n){case"logoUrl":this.customer.logoUrl=s.imageUrl;break;case"coverUrl":this.customer.coverUrl=s.imageUrl}this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}removeImage(t="logoUrl"){const n=this.customerForm.get(t).value;switch(t){case"logoUrl":this.customer.logoUrl=null;break;case"coverUrl":this.customer.coverUrl=null}this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la imagen del  ${"logoUrl"===t?" logo":" cover"}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(c=>{"confirmed"===c&&(this._changeDetectorRef.markForCheck(),this._imagesService.removeImage("Customer",n).subscribe(u=>{this.customerForm.get(t).setValue(null),this._customersService.updateCustomer(this.customer).pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===t?" logo ":" cover "} actualizada correctamente`,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()},g=>{console.log(g)})}))})}_openDialog(t,n,a=-1){this.dialog.open(jo.g,{width:"600px",height:"98%",data:{contact:t,dialogMode:n},panelClass:"ath-dialog-panel"}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(s=>{s&&"cancelled"!==s&&("add"===n&&this.addContactField(s),"edit"===n&&this.editContactField(s,a))})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.customer&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){"add"!==t&&(this._getCitiesByState(this.customer.state),this.customerForm.patchValue(this.customer),this.customerForm.get("merchantId").setValue(this.customer.merchantId._id),this.updateContactsFields(this.customer.contacts),this._changeDetectorRef.markForCheck())}updateContactsFields(t){const n=[];t.forEach(a=>{const c=this._formBuilder.group({_id:[a._id],merchantId:[a.merchantId,[i.kI.required]],userId:[a.userId,[i.kI.required]],name:[a.name,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname1:[a.lastname1,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname2:[a.lastname2,[i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],idNumber:[a.idNumber,[i.kI.maxLength(11),i.kI.minLength(11),m.L.onlyNumbersPattern()]],charge:[a.charge,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[a.slug],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:[a.address,[i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:a.country,disabled:!0}],state:[a.state],city:[a.city]}),s=[];a.emails.forEach(g=>{s.push(this._formBuilder.group({email:[g.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[g.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),s.forEach(g=>{c.get("emails").push(g)});const u=[];a.phoneNumbers.forEach(g=>{u.push(this._formBuilder.group({stateCode:[g.stateCode,[i.kI.required]],phoneNumber:[g.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:[g.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),u.forEach(g=>{c.get("phoneNumbers").push(g)}),n.push(c)}),this.customerForm.get("contacts").clear(),n.forEach(a=>{this.customerForm.get("contacts").push(a)})}addContactField(t){const n=this._formBuilder.group({_id:[""],merchantId:["",[i.kI.required]],userId:["",[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),m.L.onlyNumbersPattern()]],charge:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.minLength(3),i.kI.maxLength(255)]],country:["Cuba"],state:[""],city:[""]});n.patchValue(t);const a=[];t.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),a.forEach(s=>{n.get("emails").push(s)});const c=[];t.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[i.kI.required]],phoneNumber:[s.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),c.forEach(s=>{n.get("phoneNumbers").push(s)}),this.customerForm.get("contacts").push(n),this._changeDetectorRef.markForCheck()}editContactField(t,n){const a=this.customerForm.get("contacts").getRawValue();a[n]=t,this.updateContactsFields(a),this._changeDetectorRef.markForCheck()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(P.v),e.Y36(V.a),e.Y36(i.qu),e.Y36(M.R),e.Y36(h.F0),e.Y36(B.ux),e.Y36(S.C),e.Y36(Go.uw),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-customer-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],["class","absolute inset-0 bg-black bg-opacity-50 z-10",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,""],["mat-icon-button","",1,"absolute","top-6","right-8","z-20","bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"z-20","relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","absolute inset-0 bg-black bg-opacity-50 z-20",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","z-40"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","",3,"type","formControlName","maxlength"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"w-full","fuse-mat-no-subscript"],["matPrefix","",3,"for"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName","minLength","maxLength"],[3,"formControlName"],["value","cup"],["value","mlc"],["value","usd"],["value","mxn"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","sm:col-span-1"],[1,"items-start","font-medium"],[1,"mt-1","sm:mt-3",3,"color","formControlName"],[1,"sm:col-span-2"],[1,"w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],["matInput","","required","",3,"type","formControlName","minLength","maxlength"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","number","matInput","","required","",3,"formControlName","min","max"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],["class","w-full mb-2 flex flex-col gap-y-4",4,"ngIf"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"mt-4","sm:col-span-1"],["matInput","",3,"type","formControlName"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],["id","logoUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["logoUrlFileInput",""],["for","logoUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-20"],[1,"w-full","mb-2","flex","flex-col","gap-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","flex",4,"ngIf"],[1,"flex"],[1,"grid","sm:grid-cols-2","gap-y-1","gap-x-2","w-[90%]","rounded-md","border-2","border-gray-200","p-5","text-secondary"],[1,"flex","flex-col","mt-2"],[1,"font-medium","text-secondary"],[1,"col-start-2","font-medium","text-secondary"],[1,"row-start-2","col-start-2"],[1,"col-start-3","font-medium","text-secondary"],[1,"row-start-2","col-start-3"],[1,"col-start-4","font-medium","text-secondary"],[1,"row-start-2","col-start-4"],[1,"flex","flex-col","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-icon-button","","matTooltip","Editar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,zo,23,10,"ng-container",1),e.YNc(2,Jn,175,94,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.customer&&n.customer.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,A.lW,y.Mq,y.hl,y.nW,d.TO,d.KE,d.bx,d.hX,d.qo,F.Hw,U.Nt,x.wG,k.gD,x.ey,q.gM,p.mk,p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.qQ,i.Fd,i.sg,i.u,z.Rr,p.Ov],encapsulation:2,changeDetection:0}),o})();var de=l(4004),Nn=l(4603),wn=l(4789),En=l(9804);function Ln(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.employee.merchantId.coverUrl,e.LSH)}}function Yn(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.employee.imageUrl,e.LSH)}}function Mn(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.employee.name.charAt(0)," ")}}const fe=function(){return["../../"]};function Bn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Ln,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,Yn,1,1,"img",10),e.YNc(11,Mn,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.employee.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,fe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.employee.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.employee.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.employee.name),e.xp6(3),e.Oqu("Empleado")}}function Sn(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.employee.merchantId.coverUrl,e.LSH)}}function Rn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",69,70),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",71),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function On(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function Pn(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.employee.imageUrl,e.LSH)}}function $n(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.employee.name.charAt(0)," ")}}function jn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function Gn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function Hn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function Kn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function Vn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function zn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function Wn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function Xn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function er(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function tr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger el g\xe9nero "),e.qZA())}function or(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n es obligatorio. "),e.qZA())}function nr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function rr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function ar(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function ir(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function cr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function sr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",73)(2,"span",78),e._UZ(3,"span",80),e.TgZ(4,"span",15),e._uU(5),e.qZA(),e.TgZ(6,"span",81),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function lr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function mr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function _r(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function pr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function ur(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}const he=function(o){return{"mt-6":o}};function gr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"button",85),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,he,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function dr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",74)(2,"mat-form-field",75),e.YNc(3,cr,2,0,"mat-label",1),e._UZ(4,"input",76),e.TgZ(5,"mat-select",77)(6,"mat-select-trigger")(7,"span",78)(8,"span",79),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",73)(11,"span",78),e._UZ(12,"span",80),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",81),e._uU(17),e.qZA()()(),e.YNc(18,sr,8,3,"ng-container",47),e.qZA(),e.YNc(19,lr,2,0,"mat-error",1),e.YNc(20,mr,2,0,"mat-error",1),e.YNc(21,_r,2,0,"mat-error",1),e.qZA(),e.TgZ(22,"mat-form-field",82),e.YNc(23,pr,2,0,"mat-label",1),e._UZ(24,"mat-icon",38)(25,"input",83),e.YNc(26,ur,2,0,"mat-error",1),e.qZA(),e.YNc(27,gr,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.index,a=r.first,c=r.last,s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.employeeForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,24,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(2),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function fr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function hr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function xr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Cr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}function br(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"button",88),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,he,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function vr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",86)(2,"mat-form-field",75),e.YNc(3,fr,2,0,"mat-label",1),e._UZ(4,"mat-icon",38)(5,"input",87),e.YNc(6,hr,2,0,"mat-error",1),e.qZA(),e.TgZ(7,"mat-form-field",82),e.YNc(8,xr,2,0,"mat-label",1),e._UZ(9,"mat-icon",38)(10,"input",83),e.YNc(11,Cr,2,0,"mat-error",1),e.qZA(),e.YNc(12,br,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.first,a=r.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function Zr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function yr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Tr(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function kr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function Ir(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function Ar(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function Fr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function Ur(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo n\xfameros. "),e.qZA())}function qr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function Dr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de contrataci\xf3n es obligatoria. "),e.qZA())}function Jr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un tipo de contrato. "),e.qZA())}function Qr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El tiempo del contrato debe poseer solo n\xfameros. "),e.qZA())}function Nr(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij("",t.name," ")}}function wr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un departamento "),e.qZA())}function Er(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name,"")}}function Lr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el cargo "),e.qZA())}function Yr(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function Mr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el nivel de escolaridad. "),e.qZA())}function Br(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function Sr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar la frecuencia en el que efectuar\xe1 el pago "),e.qZA())}function Rr(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function Or(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un modo pago "),e.qZA())}function Pr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteEmployee())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const xe=function(o){return{"cursor-not-allowed":o}};function $r(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateEmployee())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.employeeForm.invalid)("matTooltip","Salvar")("disabled",t.employeeForm.invalid)("ngClass",e.VKq(5,xe,t.employeeForm.invalid))}}function jr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createEmployee())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.employeeForm.invalid)("matTooltip","Salvar")("disabled",t.employeeForm.invalid)("ngClass",e.VKq(5,xe,t.employeeForm.invalid))}}function Gr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Sn,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",23)(7,"div",7)(8,"form",24)(9,"div",25)(10,"div",26),e._UZ(11,"div",27),e.TgZ(12,"div",28),e.YNc(13,Rn,5,3,"div",1),e.YNc(14,On,3,1,"div",1),e.qZA(),e.YNc(15,Pn,1,1,"img",10),e.YNc(16,$n,2,1,"div",11),e.qZA()(),e.TgZ(17,"span",29),e._uU(18,"Informaci\xf3n General"),e.qZA(),e.TgZ(19,"div",30)(20,"div",31)(21,"mat-form-field",32)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",33),e.YNc(25,jn,2,0,"mat-error",1),e.YNc(26,Gn,2,0,"mat-error",1),e.YNc(27,Hn,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",31)(29,"mat-form-field",32)(30,"mat-label"),e._uU(31,"Primer Apellido"),e.qZA(),e._UZ(32,"input",34),e.YNc(33,Kn,2,0,"mat-error",1),e.YNc(34,Vn,2,0,"mat-error",1),e.YNc(35,zn,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",31)(37,"mat-form-field",32)(38,"mat-label"),e._uU(39,"Segundo Apellido"),e.qZA(),e._UZ(40,"input",34),e.YNc(41,Wn,2,0,"mat-error",1),e.YNc(42,Xn,2,0,"mat-error",1),e.YNc(43,er,2,0,"mat-error",1),e.qZA()(),e.TgZ(44,"div",31)(45,"mat-form-field",32)(46,"mat-label"),e._uU(47,"G\xe9nero"),e.qZA(),e.TgZ(48,"mat-select",35)(49,"mat-option",36),e._uU(50,"Maculino"),e.qZA(),e.TgZ(51,"mat-option",37),e._uU(52,"Femenino"),e.qZA()(),e.YNc(53,tr,2,0,"mat-error",1),e.qZA()(),e.TgZ(54,"div",31)(55,"mat-form-field",32)(56,"mat-label"),e._uU(57,"N\xfamero de identidad"),e.qZA(),e._UZ(58,"mat-icon",38)(59,"input",39),e.YNc(60,or,2,0,"mat-error",1),e.YNc(61,nr,2,0,"mat-error",1),e.YNc(62,rr,2,0,"mat-error",1),e.qZA()(),e.TgZ(63,"div",31)(64,"mat-form-field",32)(65,"mat-label"),e._uU(66,"Negocio"),e.qZA(),e.TgZ(67,"mat-select",35),e.YNc(68,ar,2,2,"mat-option",40),e.ALo(69,"async"),e.qZA(),e.YNc(70,ir,2,0,"mat-error",1),e.TgZ(71,"mat-hint"),e._uU(72,"Negocio al cual pertenece el empleado"),e.qZA()()(),e.TgZ(73,"div",41)(74,"span",42),e._uU(75,"Estado"),e.qZA(),e.TgZ(76,"mat-slide-toggle",43),e._uU(77," Activo "),e.qZA()()(),e.TgZ(78,"span",29),e._uU(79,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(80,"div",44)(81,"div",45)(82,"div",46),e.YNc(83,dr,28,26,"ng-container",47),e.qZA(),e.TgZ(84,"div",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(85,"mat-icon",14),e.TgZ(86,"span",49),e._uU(87,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(88,"div",45)(89,"div",46),e.YNc(90,vr,13,13,"ng-container",47),e.qZA(),e.TgZ(91,"div",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(92,"mat-icon",14),e.TgZ(93,"span",49),e._uU(94,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(95,"span",29),e._uU(96,"Domicilio"),e.qZA(),e.TgZ(97,"div",50)(98,"div",31)(99,"mat-form-field",32)(100,"mat-label"),e._uU(101,"Direcci\xf3n"),e.qZA(),e._UZ(102,"mat-icon",38)(103,"input",51),e.YNc(104,Zr,2,0,"mat-error",1),e.YNc(105,yr,2,0,"mat-error",1),e.qZA()(),e.TgZ(106,"div",31)(107,"mat-form-field",32)(108,"mat-label"),e._uU(109,"Provincia"),e.qZA(),e.TgZ(110,"mat-select",35),e.YNc(111,Tr,2,2,"mat-option",40),e.qZA(),e._UZ(112,"mat-icon",52),e.YNc(113,kr,2,0,"mat-error",1),e.qZA()(),e.TgZ(114,"div",31)(115,"mat-form-field",32)(116,"mat-label"),e._uU(117,"Municipio"),e.qZA(),e.TgZ(118,"mat-select",35),e.YNc(119,Ir,2,2,"mat-option",40),e.qZA(),e._UZ(120,"mat-icon",52),e.YNc(121,Ar,2,0,"mat-error",1),e.qZA()(),e.TgZ(122,"div",31)(123,"mat-form-field",32)(124,"mat-label"),e._uU(125,"Pa\xeds"),e.qZA(),e.TgZ(126,"mat-select",35)(127,"mat-option",53),e._uU(128,"Cuba"),e.qZA()(),e._UZ(129,"mat-icon",52),e.YNc(130,Fr,2,0,"mat-error",1),e.qZA()(),e.TgZ(131,"div",31)(132,"mat-form-field",54)(133,"mat-label"),e._uU(134,"C\xf3digo Postal"),e.qZA(),e._UZ(135,"input",55),e.YNc(136,Ur,2,0,"mat-error",1),e.YNc(137,qr,2,0,"mat-error",1),e.qZA()()(),e.TgZ(138,"span",29),e._uU(139,"Datos de incorporaci\xf3n"),e.qZA(),e.TgZ(140,"div",50)(141,"div",31)(142,"mat-form-field",32)(143,"mat-label"),e._uU(144,"Fecha de contrataci\xf3n"),e.qZA(),e._UZ(145,"mat-datepicker-toggle",56)(146,"mat-datepicker",null,57)(148,"input",58),e.YNc(149,Dr,2,0,"mat-error",1),e.qZA()(),e.TgZ(150,"div",31)(151,"mat-form-field",32)(152,"mat-label"),e._uU(153,"Tipo de contrato"),e.qZA(),e.TgZ(154,"mat-select",35)(155,"mat-option",59),e._uU(156,"Determinado"),e.qZA(),e.TgZ(157,"mat-option",60),e._uU(158,"Indeterminado"),e.qZA()(),e.YNc(159,Jr,2,0,"mat-error",1),e.qZA()(),e.TgZ(160,"div",31)(161,"mat-form-field",32)(162,"mat-label"),e._uU(163,"Fecha de cierre del contrato"),e.qZA(),e._UZ(164,"mat-datepicker-toggle",56)(165,"mat-datepicker",null,61)(167,"input",62),e.qZA()(),e.TgZ(168,"div",31)(169,"mat-form-field",32)(170,"mat-label"),e._uU(171,"Tiempo del contrato"),e.qZA(),e._UZ(172,"mat-icon",38)(173,"input",63),e.YNc(174,Qr,2,0,"mat-error",1),e.qZA()()(),e.TgZ(175,"span",29),e._uU(176,"Departamento, cargo y escolaridad"),e.qZA(),e.TgZ(177,"div",50)(178,"div",31)(179,"mat-form-field",32)(180,"mat-label"),e._uU(181,"Departamento"),e.qZA(),e.TgZ(182,"mat-select",35),e.YNc(183,Nr,2,2,"mat-option",64),e.ALo(184,"async"),e.qZA(),e.YNc(185,wr,2,0,"mat-error",1),e.qZA()(),e.TgZ(186,"div",31)(187,"mat-form-field",32)(188,"mat-label"),e._uU(189,"Cargo"),e.qZA(),e.TgZ(190,"mat-select",35),e.YNc(191,Er,2,2,"mat-option",64),e.ALo(192,"async"),e.qZA(),e.YNc(193,Lr,2,0,"mat-error",1),e.qZA()(),e.TgZ(194,"div",31)(195,"mat-form-field",32)(196,"mat-label"),e._uU(197,"Escolaridad"),e.qZA(),e.TgZ(198,"mat-select",35),e.YNc(199,Yr,2,2,"mat-option",64),e.ALo(200,"async"),e.qZA(),e.YNc(201,Mr,2,0,"mat-error",1),e.qZA()()(),e.TgZ(202,"span",29),e._uU(203,"Salario"),e.qZA(),e.TgZ(204,"div",50)(205,"div",31)(206,"mat-form-field",32)(207,"mat-label"),e._uU(208,"Frecuencia"),e.qZA(),e.TgZ(209,"mat-select",35),e.YNc(210,Br,2,2,"mat-option",64),e.ALo(211,"async"),e.qZA(),e.YNc(212,Sr,2,0,"mat-error",1),e.qZA()(),e.TgZ(213,"div",31)(214,"mat-form-field",32)(215,"mat-label"),e._uU(216,"Modo de pago"),e.qZA(),e.TgZ(217,"mat-select",35),e.YNc(218,Rr,2,2,"mat-option",64),e.ALo(219,"async"),e.qZA(),e.YNc(220,Or,2,0,"mat-error",1),e.qZA()()(),e.TgZ(221,"div",65),e.YNc(222,Pr,2,2,"button",66),e.TgZ(223,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(224," Cancelar "),e.qZA(),e.YNc(225,$r,2,7,"button",68),e.YNc(226,jr,2,7,"button",68),e.qZA()()()(),e.BQk()}if(2&o){const t=e.MAs(147),n=e.MAs(166),a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.employee&&a.employee.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(125,fe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",a.employeeForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employee&&!a.employee.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("maxlength")||a.employeeForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("maxlength")||a.employeeForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("maxlength")||a.employeeForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","gender"),e.xp6(5),e.Q6J("ngIf",a.employeeForm.get("gender").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("maxlength")||a.employeeForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(69,113,a.merchants$))("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("merchantId").hasError("required")),e.xp6(6),e.Q6J("color","primary")("formControlName","active"),e.xp6(7),e.Q6J("ngForOf",a.employeeForm.get("phoneNumbers").controls)("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",a.employeeForm.get("emails").controls)("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("address").hasError("maxlength")||a.employeeForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",a.states)("ngForTrackBy",a.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("state").hasError("required")),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",a.cities)("ngForTrackBy",a.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("country").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("min",9999)("max",99999),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("postalCode").hasError("onlyNumber")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("postalCode").hasError("min")||a.employeeForm.get("postalCode").hasError("max")),e.xp6(8),e.Q6J("for",t),e.xp6(3),e.Q6J("matDatepicker",t)("formControlName","dateOfJoining")("placeholder","Seleccione la fecha"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("dateOfJoining").hasError("required")),e.xp6(5),e.Q6J("formControlName","typeOfContract"),e.xp6(5),e.Q6J("ngIf",a.employeeForm.get("typeOfContract").hasError("required")),e.xp6(5),e.Q6J("for",n),e.xp6(3),e.Q6J("matDatepicker",n)("formControlName","contractEndDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:clock"),e.xp6(1),e.Q6J("type","text")("formControlName","contractTime"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("contractTime").hasError("pattern")),e.xp6(8),e.Q6J("formControlName","department"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(184,115,a.departments$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("department").hasError("required")),e.xp6(5),e.Q6J("formControlName","charge"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(192,117,a.charges$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("charge").hasError("required")),e.xp6(5),e.Q6J("formControlName","scholarship"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(200,119,a.scholarships$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("scholarship").hasError("required")),e.xp6(8),e.Q6J("formControlName","salaryFreq"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(211,121,a.salaryFreqs$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("salaryFreq").hasError("required")),e.xp6(5),e.Q6J("formControlName","salaryMethod"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(219,123,a.salaryMethods$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("salaryMethod").hasError("required")),e.xp6(2),e.Q6J("ngIf","add"!==a.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===a.actionMode),e.xp6(1),e.Q6J("ngIf","add"===a.actionMode)}}let Hr=(()=>{class o{constructor(t,n,a,c,s,u,g,C,b,v,X,za,Wa){this._activatedRoute=t,this._changeDetectorRef=n,this._employeesService=a,this._hrmService=c,this._locationService=s,this._formBuilder=u,this._fuseConfirmationService=g,this._router=C,this._snackBar=b,this._imagesService=v,this._departmentService=X,this._chargeService=za,this.store=Wa,this.cities=[],this.user$=(0,I.of)(null),this.merchants$=null,this.states=[],this.statesCodes=[],this._unsubscribeAll=new D.x}ngOnInit(){this.user$=this.store.select(L.rk),this.user$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.employee$=this.store.select(ne.hf),this.employee$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.employee=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(Y.UV),this.charges$=this._chargeService.getActiveCharges().pipe((0,de.U)(t=>t.dataArr)),this.departments$=this._departmentService.getActiveDepartments().pipe((0,de.U)(t=>t.dataArr)),this.salaryFreqs$=this._hrmService.getSalaryFrequency(),this.salaryMethods$=this._hrmService.getSalaryMethods(),this.scholarships$=this._hrmService.getScholarship(),this._locationService.states$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.employeeForm=this._formBuilder.group({_id:[""],userId:[this.user._id,[i.kI.required]],merchantId:["",[i.kI.required]],active:[!1],code:[{value:"",disabled:!0}],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],slug:[""],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],gender:["",[i.kI.required]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),m.L.onlyNumbersPattern()]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0},[i.kI.required]],state:["",[i.kI.required]],city:["",[i.kI.required]],postalCode:[0,[i.kI.max(99999),i.kI.min(9999)]],dateOfJoining:["",[i.kI.required]],typeOfContract:["",[i.kI.required]],contractEndDate:[""],contractTime:[0,[m.L.onlyNumbersPattern()]],department:["",[i.kI.required]],charge:["",[i.kI.required]],scholarship:["",[i.kI.required]],salaryFreq:["",[i.kI.required]],salaryMethod:["",[i.kI.required]],salaryLevel:[""],imageUrl:[""]},{validators:m.L.onlyNumber("postalCode")}),this.employeeForm.get("state").valueChanges.pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.employeeForm.reset(),this.employeeForm.get("country").setValue("Cuba"),this.employeeForm.get("userId").setValue(this.user._id),this.employeeForm.get("active").setValue(!1),this.employeeForm.get("postalCode").setValue(0),this.employeeForm.get("contractTime").setValue(0),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.employeeForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.employeeForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.employeeForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.employeeForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createEmployee(){const t=`${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.employeeForm.get("code").setValue(t);let n=this.employeeForm.getRawValue();n=(0,J.omit)(n,"_id"),n.slug=new Q.i(n.name).slug,this._fuseConfirmationService.open({title:"Crear empleado",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._employeesService.createEmployee(n).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._router.navigate(["../",s.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateEmployee(){const t=this.employeeForm.getRawValue();t.slug=new Q.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar empleado",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._employeesService.updateEmployee(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this.store.dispatch((0,H.Y6)({employee:c.data})),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}deleteEmployee(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el empleado? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._employeesService.deleteEmployee(this.employee._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",fappearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("Employee",a).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.employeeForm.get("imageUrl").setValue(c.imageUrl),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.employeeForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("Employee",t).subscribe(s=>{this.employeeForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}})})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.employee&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){if("add"===t){const n=[];n.push(this._formBuilder.group({email:["",[i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.employeeForm.get("emails").push(c)});const a=[];return a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),void a.forEach(c=>{this.employeeForm.get("phoneNumbers").push(c)})}this.employeeForm.get("emails").clear(),this.employeeForm.get("phoneNumbers").clear(),this._setEmployeeDataOnForm(this.employee),this._changeDetectorRef.markForCheck()}_setEmployeeDataOnForm(t){this.employeeForm.patchValue(t),this.employeeForm.get("charge").setValue(t.charge._id),this.employeeForm.get("department").setValue(t.department._id),this.employeeForm.get("merchantId").setValue(t.merchantId._id),this._getCitiesByState(t.state);const n=[];t.emails.length>0?t.emails.forEach(c=>{n.push(this._formBuilder.group({email:[c.email,[i.kI.email,i.kI.maxLength(255)]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):n.push(this._formBuilder.group({email:["",[i.kI.email]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.employeeForm.get("emails").push(c)});const a=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(c=>{a.push(this._formBuilder.group({stateCode:[c.stateCode,[i.kI.required]],phoneNumber:[c.phoneNumber,[i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),m.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(c=>{this.employeeForm.get("phoneNumbers").push(c)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(O.b),e.Y36(Nn.E),e.Y36(V.a),e.Y36(i.qu),e.Y36(M.R),e.Y36(h.F0),e.Y36(B.ux),e.Y36(S.C),e.Y36(wn.U),e.Y36(En.U),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-employee-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["required","",3,"formControlName"],["value","Masculino"],["value","Femenino"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"type","formControlName","maxlength","minlength"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","sm:col-span-1"],[1,"items-start","font-medium"],[1,"mt-1",3,"color","formControlName"],[1,"grid","sm:grid-cols-2","gap-y-5","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],["matInput","","required","",3,"type","formControlName","minLength","maxlength"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","number","matInput","",3,"formControlName","min","max"],["matPrefix","",3,"for"],["joinDatepicker",""],["matInput","","required","",3,"matDatepicker","formControlName","placeholder"],["value","Determinado"],["value","Indeterminado"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-6","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bn,23,10,"ng-container",1),e.YNc(2,Gr,227,126,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.employee&&n.employee.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,A.lW,y.Mq,y.hl,y.nW,d.TO,d.KE,d.bx,d.hX,d.qo,F.Hw,U.Nt,x.wG,k.gD,k.$L,x.ey,q.gM,p.mk,p.sg,p.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.qQ,i.Fd,i.oH,i.sg,i.u,z.Rr,p.Ov,p.rS],encapsulation:2,changeDetection:0}),o})();var Kr=l(2729),Vr=l(1349),zr=l(1235);function Wr(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",22),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.user.merchantId.coverUrl,e.LSH)}}function Xr(o,r){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw(2);e.Q6J("src",t.user.imageUrl,e.LSH)}}function ea(o,r){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.user.name.charAt(0)," ")}}const Ce=function(){return["../../"]};function ta(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,Wr,2,1,"ng-container",1),e.TgZ(3,"div",4)(4,"button",5),e._UZ(5,"mat-icon",6),e.qZA()()(),e.TgZ(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e.YNc(10,Xr,1,1,"img",11),e.YNc(11,ea,2,1,"div",12),e.qZA(),e.TgZ(12,"div",13)(13,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",15),e.TgZ(15,"span",16),e._uU(16,"Editar"),e.qZA()(),e.TgZ(17,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("editPass"))}),e._UZ(18,"mat-icon",15),e.TgZ(19,"span",16),e._uU(20,"Editar Contrase\xf1a"),e.qZA()()()(),e.TgZ(21,"div",18),e._uU(22),e.qZA(),e.TgZ(23,"div",19)(24,"span",20),e._uU(25),e.qZA()(),e._UZ(26,"div",21),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.user.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(10,Ce)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.user.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.user.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.user.name),e.xp6(3),e.Oqu("Usuario")}}function oa(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",22),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.user.merchantId.coverUrl,e.LSH)}}function na(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",52,53),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",54),e._UZ(4,"mat-icon",6),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function ra(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",6),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function aa(o,r){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw(2);e.Q6J("src",t.user.imageUrl,e.LSH)}}function ia(o,r){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.user.name.charAt(0)," ")}}function ca(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function sa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre debe contener entre 3 y 255 caracteres. "),e.qZA())}function la(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre no debe poseer n\xfameros. "),e.qZA())}function ma(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos son obligatorios. "),e.qZA())}function _a(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos deben contener entre 3 y 255 caracteres. "),e.qZA())}function pa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," los apellidos no deben poseer n\xfameros. "),e.qZA())}function ua(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo electr\xf3nico es obligatorio. "),e.qZA())}function ga(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo no posee un formato v\xe1lido. "),e.qZA())}function da(o,r){if(1&o&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function fa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un negocio. "),e.qZA())}function ha(o,r){1&o&&(e.TgZ(0,"span",31),e._uU(1,"Contrase\xf1a"),e.qZA())}function xa(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Ca(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function ba(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria. "),e.qZA())}function va(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: ! " ? $ % ^ &. '),e.qZA())}function Za(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function ya(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Ta(o,r){1&o&&(e.TgZ(0,"mat-error",64),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function ka(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("pwd2").getError("mustMatch")," ")}}function Ia(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"mat-form-field",34)(3,"mat-label"),e._uU(4,"Contrase\xf1a"),e.qZA(),e._UZ(5,"input",57,58),e.TgZ(7,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(6);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(8,xa,1,1,"mat-icon",60),e.YNc(9,Ca,1,1,"mat-icon",60),e.qZA(),e.YNc(10,ba,2,0,"mat-error",1),e.YNc(11,va,2,0,"mat-error",1),e.qZA()(),e.TgZ(12,"div",33)(13,"mat-form-field",34)(14,"mat-label"),e._uU(15,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(16,"input",61,62),e.TgZ(18,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(17);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(19,Za,1,1,"mat-icon",60),e.YNc(20,ya,1,1,"mat-icon",60),e.qZA(),e.YNc(21,Ta,2,0,"mat-error",63),e.YNc(22,ka,2,1,"mat-error",1),e.qZA()()()}if(2&o){const t=e.MAs(6),n=e.MAs(17),a=e.oxw(2);e.xp6(5),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd").hasError("pattern")||a.userForm.get("pwd").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd2").hasError("mustMatch"))}}function Aa(o,r){1&o&&(e.TgZ(0,"span",31),e._uU(1,"Roles"),e.qZA())}function Fa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",70)(1,"div",71)(2,"mat-checkbox",72),e.NdJ("change",function(a){const c=e.CHM(t),s=c.$implicit,u=c.index,g=e.oxw(4);return e.KtG(g.manageRoles(s._id,a,u))}),e.qZA()(),e.TgZ(3,"div",73)(4,"span",74),e._uU(5),e.qZA(),e.TgZ(6,"span",75),e._uU(7),e.qZA()()()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(4);e.xp6(2),e.Q6J("disabled",n!==a.selectedRoleIndex&&-1!==a.selectedRoleIndex)("color","primary")("checked",t.checked),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," ")}}function Ua(o,r){if(1&o&&(e.TgZ(0,"div",66)(1,"div",67)(2,"div",68),e.YNc(3,Fa,8,5,"div",69),e.qZA()()()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.roles)}}function qa(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Aa,2,0,"span",45),e.YNc(2,Ua,4,1,"div",65),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}function Da(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteUser())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const W=function(o){return{"cursor-not-allowed":o}};function Ja(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateUser())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.userForm.invalid)("matTooltip","Salvar")("disabled",t.userForm.invalid)("ngClass",e.VKq(5,W,t.userForm.invalid))}}function Qa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createUser())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.userForm.invalid)("matTooltip","Salvar")("disabled",t.userForm.invalid)("ngClass",e.VKq(5,W,t.userForm.invalid))}}function Na(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,oa,2,1,"ng-container",1),e.TgZ(3,"div",4)(4,"button",5),e._UZ(5,"mat-icon",6),e.qZA()()(),e.TgZ(6,"div",25)(7,"div",8)(8,"form",26)(9,"div",27)(10,"div",28),e._UZ(11,"div",29),e.TgZ(12,"div",30),e.YNc(13,na,5,3,"div",1),e.YNc(14,ra,3,1,"div",1),e.qZA(),e.YNc(15,aa,1,1,"img",11),e.YNc(16,ia,2,1,"div",12),e.qZA()(),e.TgZ(17,"span",31),e._uU(18,"Informaci\xf3n General "),e.qZA(),e.TgZ(19,"div",32)(20,"div",33)(21,"mat-form-field",34)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",35),e.YNc(25,ca,2,0,"mat-error",1),e.YNc(26,sa,2,0,"mat-error",1),e.YNc(27,la,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",33)(29,"mat-form-field",34)(30,"mat-label"),e._uU(31,"Apellidos"),e.qZA(),e._UZ(32,"input",36),e.YNc(33,ma,2,0,"mat-error",1),e.YNc(34,_a,2,0,"mat-error",1),e.YNc(35,pa,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",33)(37,"mat-form-field",34)(38,"mat-label"),e._uU(39,"Correo electr\xf3nico"),e.qZA(),e._UZ(40,"input",37),e.YNc(41,ua,2,0,"mat-error",1),e.YNc(42,ga,2,0,"mat-error",1),e.qZA()(),e.TgZ(43,"div",33)(44,"mat-form-field",34)(45,"mat-label"),e._uU(46,"Asignar negocio"),e.qZA(),e.TgZ(47,"mat-select",38)(48,"mat-option",39),e._uU(49,"Seleccione el negocio"),e.qZA(),e.YNc(50,da,2,2,"mat-option",40),e.ALo(51,"async"),e.qZA(),e.YNc(52,fa,2,0,"mat-error",1),e.qZA()(),e.TgZ(53,"div",41)(54,"div",42)(55,"span",43),e._uU(56,"Estado"),e.qZA(),e.TgZ(57,"mat-slide-toggle",44),e._uU(58),e.qZA()()()(),e.YNc(59,ha,2,0,"span",45),e.YNc(60,Ia,23,12,"div",46),e.YNc(61,qa,3,2,"div",47),e.TgZ(62,"div",48),e.YNc(63,Da,2,2,"button",49),e.TgZ(64,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(65," Cancelar "),e.qZA(),e.YNc(66,Ja,2,7,"button",51),e.YNc(67,Qa,2,7,"button",51),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.user&&t.user.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(46,Ce)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",t.userForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.user&&!t.user.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("maxlength")||t.userForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastname").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastname").hasError("maxlength")||t.userForm.get("lastname").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastname").hasError("pattern")),e.xp6(5),e.Q6J("type","email")("formControlName","email")("placeholder","Correo electr\xf3nico"),e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("email")),e.xp6(5),e.Q6J("formControlName","merchantId")("placeholder","Seleccione el negocio"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(51,44,t.merchants$)),e.xp6(2),e.Q6J("ngIf",t.userForm.get("merchantId").hasError("required")),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.userForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngxPermissionsOnly","Super Administrador"),e.xp6(2),e.Q6J("ngIf","add"!==t.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}function wa(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Ea(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function La(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Ya(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: !" ? $ % ^ &. '),e.qZA())}function Ma(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Ba(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Sa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Ra(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userPasswordForm.get("pwd2").getError("mustMatch")," ")}}function Oa(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",78)(2,"div",79)(3,"h1"),e._uU(4,"Actualizar contrase\xf1a"),e.qZA()(),e.TgZ(5,"div",80)(6,"mat-form-field",34)(7,"mat-label"),e._uU(8,"Contrase\xf1a"),e.qZA(),e._UZ(9,"input",81,82),e.TgZ(11,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(10);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(12,wa,1,1,"mat-icon",60),e.YNc(13,Ea,1,1,"mat-icon",60),e.qZA(),e.YNc(14,La,2,0,"mat-error",1),e.YNc(15,Ya,2,0,"mat-error",1),e.qZA(),e.TgZ(16,"mat-form-field",34)(17,"mat-label"),e._uU(18,"Confirmar contrase\xf1a "),e.qZA(),e._UZ(19,"input",61,83),e.TgZ(21,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(20);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(22,Ma,1,1,"mat-icon",60),e.YNc(23,Ba,1,1,"mat-icon",60),e.qZA(),e.YNc(24,Sa,2,0,"mat-error",1),e.YNc(25,Ra,2,1,"mat-error",1),e.qZA()(),e.TgZ(26,"div",48)(27,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(28," Cancelar "),e.qZA(),e.TgZ(29,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateUserPassword())}),e._uU(30," Actualizar "),e.qZA()()(),e.BQk()}if(2&o){const t=e.MAs(10),n=e.MAs(20),a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.userPasswordForm)("autocomplete","off"),e.xp6(8),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd").hasError("pattern")||a.userPasswordForm.get("pwd").hasError("minlength")),e.xp6(4),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd2").hasError("mustMatch")),e.xp6(2),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("color","primary")("disabled",a.userPasswordForm.invalid)("matTooltip","Actualizar Contrase\xf1a")("disabled",a.userPasswordForm.invalid)("ngClass",e.VKq(20,W,a.userPasswordForm.invalid))}}let Pa=(()=>{class o{constructor(t,n,a,c,s,u,g,C,b,v){this._activatedRoute=t,this._changeDetectorRef=n,this._usersService=a,this._formBuilder=c,this._fuseConfirmationService=s,this._router=u,this._snackBar=g,this._imagesService=C,this._rolesService=b,this.store=v,this.cities=[],this.selectedRoleIndex=-1,this.roles=[],this._unsubscribeAll=new D.x}ngOnInit(){this.store.select(L.rk).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.authUser=t,this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(re.dy),this.user$.subscribe(t=>{this.user=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(Y.UV),this.userForm=this._formBuilder.group({_id:[null],active:[!0],userId:[this.authUser._id,[i.kI.required]],merchantId:["",[i.kI.required]],name:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],lastname:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),m.L.onlyAlphabetsWithAccentPattern()]],email:[null,[i.kI.email,i.kI.required]],pwd:["",[i.kI.minLength(8),i.kI.maxLength(20),m.L.strongPasWordPattern()]],pwd2:[""],role:[null],imageUrl:[""]},{validators:m.L.mustMatch("pwd","pwd2")}),this.store.select(Kr.g).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{if("Due\xf1o"===this.authUser.role.name){const n=t.find(a=>"Ejecutivo"===a.name);n&&this.userForm.get("role").setValue(n._id)}}),this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({id:t})=>{"new"!==t&&(this.userPasswordForm=this._formBuilder.group({userId:[this.user._id,[i.kI.required]],pwd:[null,[i.kI.required,i.kI.minLength(8),i.kI.maxLength(20),m.L.strongPasWordPattern()]],pwd2:[null,[i.kI.required]]},{validators:m.L.mustMatch("pwd","pwd2")}),this.userPasswordForm.reset(),this.userPasswordForm.get("userId").setValue(this.user._id)),this.userForm.reset(),"Super Administrador"===this.authUser.role.name&&this.userForm.get("role").setValidators([i.kI.required]),this.userForm.get("userId").setValue(this.authUser._id),this.actionMode="new"===t?"add":"view",this.userForm.patchValue(this.user),this._changeDetectorRef.markForCheck()}),"add"===this.actionMode&&this._rolesService.getRoles().pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.roles=t.roles,this._changeDetectorRef.markForCheck()}),"add"===this.actionMode?(this.userForm.get("pwd").setValidators([i.kI.required]),this.userForm.get("pwd2").setValidators([i.kI.required])):(this.userForm.get("pwd").removeValidators([i.kI.required]),this.userForm.get("pwd").removeValidators([i.kI.required]))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUser(){let t=this.userForm.getRawValue();t.username=t.email.split("@",2)[0]+Date.now(),t=(0,J.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._usersService.createUser(t).pipe((0,_.R)(this._unsubscribeAll)).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.user.name} ${c.user.lastname} creado correctamente`,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigate(["../",c.user._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateUser(){let t=this.userForm.getRawValue();t=(0,J.omit)(t,["pwd, pwd2"]),this._fuseConfirmationService.open({title:"Actualizar datos del usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._usersService.update(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.user.name} ${c.user.lastname} actualizado correctamente`,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.store.dispatch((0,G.av)({user:c.user})),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}deleteUser(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el usero? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._usersService.deleteUser(this.user._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",fappearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("User",a).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this.userForm.get("imageUrl").setValue(c.imageUrl),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.userForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("User",t).subscribe(s=>{this.userForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}})})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.user&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}updateUserPassword(){let t=this.userPasswordForm.getRawValue();t=(0,J.omit)(t,"pwd2"),this._fuseConfirmationService.open({title:"Actualizar contrase\xf1a",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._usersService.resetUserPassword({userId:t.userId,newPwd:t.pwd}).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}manageRoles(t,n,a){this.selectedRoleIndex=a,n.checked?(this.userForm.get("role").setValue(t),this._changeDetectorRef.markForCheck()):(this.selectedRoleIndex=-1,this.userForm.get("role").setValue(""),this._changeDetectorRef.markForCheck())}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36($.K),e.Y36(i.qu),e.Y36(M.R),e.Y36(h.F0),e.Y36(B.ux),e.Y36(S.C),e.Y36(Vr.N),e.Y36(Z.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-user-details"]],decls:5,vars:3,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"h-full","w-full","px-6","sm:px-12"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","flex-wrap","justify-around","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"sm:ml-2",3,"click"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","placeholder","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","placeholder"],[3,"formControlName","placeholder"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","sm:col-span-2"],[1,"flex","flex-col","w-1/4"],[1,"items-start","font-medium"],[3,"formControlName","color"],["class","text-gray-400",4,"ngIf"],["class","grid sm:grid-cols-2 gap-y-3  gap-x-4 border-t-2 sm:col-span-2 pt-8 pb-8 pl-4 pr-4",4,"ngIf"],[4,"ngxPermissionsOnly"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],["type","password","matInput","","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordField1",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["type","password","matInput","","placeholder","Repita la contrase\xf1a","required","",3,"formControlName"],["passwordField2",""],["class","pb-5",4,"ngIf"],[1,"pb-5"],["class","grid sm:grid-cols-1 gap-y-3  gap-x-4 border-t-2 sm:col-span-2 pt-8 pb-4 pl-4 pr-4",4,"ngIf"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],[1,"flex","flex-col","mb-10"],[1,"w-full","flex","flex-wrap","gap-4","sm:grid","sm:grid-cols-2"],["class","w-full sm:w-auto rounded-sm border border-dashed border-primary-700 p-3 ",4,"ngFor","ngForOf"],[1,"w-full","sm:w-auto","rounded-sm","border","border-dashed","border-primary-700","p-3"],[1,"h-6"],[3,"disabled","color","checked","change"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-md","text-hint"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"],[1,"h-full","w-full","flex","flex-col","justify-between","min-h-160",3,"formGroup","autocomplete"],[1,"mt-20","font-medium","text-2xl","text-center"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],["id","pwd","matInput","","type","password","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordUpdateField1",""],["passwordUpdateField2",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ta,27,11,"ng-container",1),e.YNc(2,Na,68,47,"ng-container",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Oa,31,22,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.user&&n.user.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode),e.xp6(2),e.Q6J("ngIf","editPass"===n.actionMode))},dependencies:[h.rH,A.lW,te.oG,d.TO,d.KE,d.hX,d.R9,F.Hw,U.Nt,x.wG,k.gD,x.ey,q.gM,p.mk,p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.sg,i.u,z.Rr,zr.gE,p.Ov],encapsulation:2,changeDetection:0}),o})();function $a(o,r){1&o&&(e.ynx(0),e._UZ(1,"contact-details",2),e.BQk())}function ja(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-customer-details",2),e.BQk())}function Ga(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-employee-details",2),e.BQk())}function Ha(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-user-details",2),e.BQk())}const Ka=[{path:"",component:Ye,children:[{path:"",component:le,resolve:{contacts:Ee},children:[{path:":entity/:id",component:(()=>{class o{constructor(t,n,a){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsListComponent=a,this._unsubscribeAll=new D.x}ngOnInit(){this._contactsListComponent.matDrawer.open(),this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({entity:t})=>{this.selectedEntity=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._contactsListComponent.matDrawer.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(le))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-details"]],decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"w-full","h-full"]],template:function(t,n){1&t&&(e.ynx(0,0),e.YNc(1,$a,2,0,"ng-container",1),e.YNc(2,ja,2,0,"ng-container",1),e.YNc(3,Ga,2,0,"ng-container",1),e.YNc(4,Ha,2,0,"ng-container",1),e.BQk()),2&t&&(e.Q6J("ngSwitch",n.selectedEntity),e.xp6(1),e.Q6J("ngSwitchCase","contact"),e.xp6(1),e.Q6J("ngSwitchCase","customer"),e.xp6(1),e.Q6J("ngSwitchCase","employee"),e.xp6(1),e.Q6J("ngSwitchCase","user"))},dependencies:[p.RF,p.n9,$o,Qn,Hr,Pa],encapsulation:2,changeDetection:0}),o})(),resolve:{contact:Le},canDeactivate:[Me]}]}]}];let Va=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:x.sG,useValue:{parse:{dateInput:R.ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[h.Bz.forChild(Ka),A.ot,te.p9,y.FA,be.t,d.lN,F.Ps,U.c,ve.Tx,Fe,Ue.Cv,qe.Fk,x.si,k.LD,N.SJ,De.p0,q.AV,Je,Qe.m,se.Rq]}),o})()}}]);