"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[291],{1291:(ss,he,l)=>{l.r(he),l.d(he,{CrmModule:()=>as});var h=l(5357),fe=l(3351),y=l(7579),m=l(2722),e=l(5e3),$e=l(9602),re=l(393),I=l(5245);let je=(()=>{class o{constructor(t,n,a){this._activatedRoute=t,this._changeDetectorRef=n,this._router=a,this.merchantId="",this._unsubscribeAll=new y.x}ngOnInit(){this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({merchantId:t})=>{void 0!==t&&(this.merchantId=t,this._changeDetectorRef.markForCheck())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-crm"]],decls:38,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-2","lg:grid-cols-4","gap-y-12","sm:gap-x-4"],["routerLink","/modules/crm/customers",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["routerLink","/modules/crm/contacts",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n de clientes"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Gesti\xf3n de clientes "),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",12),e._uU(24," M\xf3dulos "),e.qZA(),e.TgZ(25,"div",16)(26,"fuse-card",17)(27,"div",18)(28,"div",19),e._uU(29,"Clientes"),e.qZA(),e.TgZ(30,"div",20),e._uU(31,"listado de Clientes(Negocios)"),e.qZA()()(),e.TgZ(32,"fuse-card",21)(33,"div",18)(34,"div",19),e._uU(35,"Contactos"),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"listado de contactos"),e.qZA()()()()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"))},dependencies:[h.rH,h.yS,$e.y,re.PQ,I.Hw],encapsulation:2,changeDetection:0}),o})();var i=l(3075),ae=l(9300),w=l(7489),v=l(5620);const xe=o=>o.customers,Ce=(0,v.P1)(xe,o=>o.customer),ie=(0,v.P1)(xe,o=>o.customers);var M=l(4787),f=l(9784),k=l(4062),V=l(1910),$=l(520),ve=l(1135),b=l(8505),E=l(4004),A=l(3821),be=l(2340),ce=l(5714),se=l(1235);const B=be.N.API_URL;let D=(()=>{class o{constructor(t,n,a){this._httpClient=t,this.rolesService=n,this.store=a,this._domains=new ve.X([]),this._states=new ve.X([])}get domains$(){return this._domains.asObservable()}get states$(){return this._states.asObservable()}getCustomers(t=0,n=10,a="active",c="desc",s="",g=!1){const p=(new $.LE).append("page",t).append("size",n).append("sort",a).append("order",c).append("search",s);return this._httpClient.get(`${B}/customers/`,{params:p}).pipe((0,b.b)(x=>{this.store.dispatch((0,ce.Jr)({pagination:x.pagination})),this.store.dispatch(g?(0,A.AT)({customers:x.dataArr}):(0,A.Pb)({customers:x.dataArr}))}))}getActiveCustomers(){return this._httpClient.get(`${B}/customers/active`).pipe((0,b.b)(t=>{this.store.dispatch((0,A.Pb)({customers:t.dataArr}))}))}getCustomerById(t){return this._httpClient.get(`${B}/customers/${t}`).pipe((0,b.b)(n=>{this.store.dispatch((0,A.Xg)({customer:n.customer}))}))}createCustomer(t){return this._httpClient.post(`${B}/customers`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,A.wK)({customer:n.data}))}))}updateCustomer(t){return this._httpClient.patch(`${B}/customers/${t._id}`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,A.uG)({customer:n.data}))}))}deleteCustomer(t,n=0,a=20,c="active",s="desc",g=""){const p=(new $.LE).append("page",n).append("size",a).append("sort",c).append("order",s).append("search",g);return this._httpClient.delete(`${B}/customers/${t}`,{params:p}).pipe((0,b.b)(x=>{this.store.dispatch((0,ce.Jr)({pagination:x.pagination})),this.store.dispatch((0,A.Pb)({customers:x.dataArr}))}))}getDomains(){return this._httpClient.get("assets/data/domains.json").pipe((0,E.U)(t=>t.sort((n,a)=>n.name.toLowerCase()<a.name.toLowerCase()?-1:n.name.toLowerCase()>a.name.toLowerCase()?1:void 0)),(0,b.b)(t=>{this._domains.next(t)}))}getDomainFiltered(t){return this._httpClient.get("assets/data/domains.json").pipe((0,E.U)(n=>n.filter(a=>a.name===t)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG($.eN),e.LFG(se.cM),e.LFG(v.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var S=l(1683),j=l(7231),G=l(1158),R=l(7261),_=l(9808),C=l(508),U=l(7423),F=l(6856),W=l(288),d=l(7322),J=l(7531),q=l(4107),X=l(2368);function Ge(o,r){1&o&&(e.TgZ(0,"a",67),e._uU(1,"Nuevo"),e.qZA())}function ze(o,r){if(1&o&&(e.TgZ(0,"a",67),e._uU(1),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.selectedCustomer$).name)}}function He(o,r){1&o&&(e.TgZ(0,"div",68),e._uU(1," Nuevo Cliente "),e.qZA())}function Ke(o,r){if(1&o&&(e.TgZ(0,"div",68),e._uU(1),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Informaci\xf3n de ",e.lcZ(2,1,t.selectedCustomer$).name," ")}}const ee=function(o){return{"cursor-not-allowed":o}};function Ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._UZ(1,"mat-icon",72),e.TgZ(2,"span",73),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,ee,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function We(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._UZ(1,"mat-icon",72),e.TgZ(2,"span",73),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,ee,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Xe(o,r){if(1&o&&(e.TgZ(0,"div",69),e.YNc(1,Ve,4,5,"button",70),e.YNc(2,We,4,5,"button",70),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}function et(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio es obligatorio. "),e.qZA())}function tt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio debe contener entre 3 y 255 caracteres. "),e.qZA())}function ot(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas no deben superar los 10 caracteres. "),e.qZA())}function nt(o,r){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function rt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un sector. "),e.qZA())}function at(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria debe superar los 15 caracteres. "),e.qZA())}function it(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un moneda. "),e.qZA())}function ct(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function st(o,r){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function lt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function mt(o,r){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function _t(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function ut(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function pt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal es obligatorio. "),e.qZA())}function gt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function dt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function ht(o,r){if(1&o&&e._UZ(0,"img",74),2&o){const t=e.oxw();e.Q6J("src",t.customerForm.get("logoUrl").value,e.LSH)}}function ft(o,r){1&o&&(e.TgZ(0,"div",75),e._uU(1,"Logo"),e.qZA())}function xt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",77,78),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files,"logoUrl"))}),e.qZA(),e.TgZ(3,"label",79),e._UZ(4,"mat-icon",72),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function Ct(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage("logoUrl"))}),e._UZ(2,"mat-icon",72),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function vt(o,r){if(1&o&&(e.TgZ(0,"div",76),e.YNc(1,xt,5,3,"div",26),e.YNc(2,Ct,3,1,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",t.customerForm.get("logoUrl").value)}}function bt(o,r){if(1&o&&e._UZ(0,"img",81),2&o){const t=e.oxw();e.Q6J("src",t.customerForm.get("coverUrl").value,e.LSH)}}function Zt(o,r){1&o&&(e.TgZ(0,"div",75),e._uU(1,"Cover"),e.qZA())}function Tt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",82,83),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files,"coverUrl"))}),e.qZA(),e.TgZ(3,"label",84),e._UZ(4,"mat-icon",72),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function yt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage("coverUrl"))}),e._UZ(2,"mat-icon",72),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function It(o,r){if(1&o&&(e.TgZ(0,"div",76),e.YNc(1,Tt,5,3,"div",26),e.YNc(2,yt,3,1,"div",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",t.customerForm.get("coverUrl").value)}}function kt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._UZ(1,"mat-icon",86),e.TgZ(2,"span",73),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,ee,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function At(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._UZ(1,"mat-icon",86),e.TgZ(2,"span",73),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,ee,t.customerForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Ft(o,r){if(1&o&&(e.TgZ(0,"div",85),e.YNc(1,kt,4,5,"button",70),e.YNc(2,At,4,5,"button",70),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode)}}const qt=function(){return["/modules/customers"]},O=function(){return["Ejecutivo"]};let Ut=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T){this._activatedRoute=t,this._customersService=n,this._changeDetectorRef=a,this._formBuilder=c,this._fuseConfirmationService=s,this._imagesService=g,this._locationService=p,this._router=x,this._snackBar=Z,this.store=T,this.customerId=null,this.selectedCustomer=null,this.selectedCustomer$=null,this.cities=[],this.domainCode="",this.domains=[],this.editMode=!1,this.stateCode="",this.states=[],this.statesCodes=[],this.stateSelected="",this._unsubscribeAll=new y.x}ngOnInit(){this.store.select(M.rk).pipe((0,ae.h)(t=>null!==t)).subscribe(t=>this._user=t),this.selectedCustomer$=this.store.select(Ce),this.store.select(V.Qs).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.currentMerchant=t}),this._customersService.domains$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.domains=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.customerForm=this._formBuilder.group({_id:[null],userId:[this._user._id,[i.kI.required]],merchantId:[this.currentMerchant._id,[i.kI.required]],active:[!0],owner:[this._user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],abbr:["",[i.kI.maxLength(10)]],domain:["",[i.kI.required]],customerType:[{value:"comercio",disabled:!0},[i.kI.required]],foundationDate:[""],nif:["",i.kI.maxLength(255)],bankAccount:["",[i.kI.minLength(16),i.kI.maxLength(24)]],currency:[{value:"CUP",disabled:!0},[i.kI.required]],address:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],state:["",[i.kI.required]],city:["",[i.kI.required]],country:[{value:"Cuba",disabled:!0},[i.kI.required]],postalCode:["",[i.kI.max(99999)]],website:["",[i.kI.maxLength(255)]],description:["",[i.kI.maxLength(1e3)]],logoUrl:[""],coverUrl:[""],code:[""]}),this.customerForm.get("state").valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({customerId:t})=>{this.customerId=t,"new"!==this.customerId&&(this.editMode=!0,this._getCustomerById(t)),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createCustomer(){const t=`${this.stateCode}-${this.domainCode}-${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.customerForm.get("code").setValue(t);let n=this.customerForm.getRawValue();n.slug=new k.i(n.name).slug,n=(0,w.omit)(n,"_id"),this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._customersService.createCustomer(n).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/crm/customers"),this._changeDetectorRef.markForCheck()},s=>{console.log(s.error.message)}),this._changeDetectorRef.markForCheck()})}updateCustomer(){const t=this.customerForm.getRawValue();t.slug=new k.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar datos del negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customersService.updateCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/crm/customers"),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)}),this._changeDetectorRef.markForCheck()})}uploadImage(t,n="logoUrl"){if(!t.length)return;const c=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(c.type)||this._imagesService.uploadImage("Customer",c).subscribe(s=>{switch(this.customerForm.get(n).setValue(s.imageUrl),this._changeDetectorRef.markForCheck(),n){case"logoUrl":this.selectedCustomer.logoUrl=s.imageUrl;break;case"coverUrl":this.selectedCustomer.coverUrl=s.imageUrl}this.editMode&&this._customersService.updateCustomer(Object.assign(Object.assign({},this.selectedCustomer),{merchantId:this.selectedCustomer.merchantId._id})).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}removeImage(t="logoUrl"){const n=this.customerForm.get(t).value;switch(t){case"logoUrl":this.selectedCustomer.logoUrl="";break;case"coverUrl":this.selectedCustomer.coverUrl=""}this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la imagen del  ${"logoUrl"===t?" logo":" cover"}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{"confirmed"===c&&(this._changeDetectorRef.markForCheck(),this._imagesService.removeImage("Customer",n).subscribe(g=>{this.customerForm.get(t).setValue(null),this._customersService.updateCustomer(this.selectedCustomer).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===t?" logo ":" cover "} actualizada correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()},p=>{console.log(p)})}))})}trackByFn(t,n){return n.id||t}_getCustomerById(t){"new"!==t?this.selectedCustomer$.pipe((0,m.R)(this._unsubscribeAll),(0,ae.h)(n=>null!==n||void 0)).subscribe(n=>{this.selectedCustomer=(0,w.cloneDeep)(n),this._getCitiesByState(this.selectedCustomer.state),this.customerForm.patchValue(n),this.customerForm.get("merchantId").setValue(n.merchantId._id),this._changeDetectorRef.markForCheck()}):this.editMode=!1}_getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(D),e.Y36(e.sBO),e.Y36(i.QS),e.Y36(S.R),e.Y36(j.C),e.Y36(G.a),e.Y36(h.F0),e.Y36(R.ux),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-customer-details"]],decls:183,vars:93,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["class","ml-1 text-primary-500",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],["class","mt-2 text-3xl font-extrabold leading-tight tracking-tight sm:text-3xl",4,"ngIf"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],["autocomplete","off",3,"formGroup"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-y-3","gap-x-6","pb-8","pt-8","pr-4","pl-4","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[4,"ngIf"],["matInput","",3,"type","formControlName","maxlength"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"w-full","fuse-mat-no-subscript"],["matPrefix","",3,"for"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName","minLength","maxLength"],[3,"formControlName"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName"],[1,"flex","flex-col","sm:col-span-2"],[1,"items-start","font-medium"],[1,"mt-1","sm:mt-3",3,"color","formControlName"],[1,"sm:col-span-4"],[1,"w-full","fuse-mat-textarea"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","text","matInput","",3,"formControlName","max"],["matInput","","required","",3,"formControlName","minLength","maxlength"],[1,"grid","w-full","gap-y-3","gap-x-6","pb-8","pt-8","pr-4","pl-4","pt-10","border-t-2","sm:grid-cols-4","overflow-x-auto"],[1,""],[1,"flex","items-end","flex-auto"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-xl","ring-4","ring-bg-card"],["class","object-cover rounded bg-hover","alt","IMAGEN",3,"src",4,"ngIf"],[1,"absolute","inset-0","z-10","flex","items-center","justify-center","text-white","bg-black","bg-opacity-50"],["class","text-xl mt-15",4,"ngxPermissionsExcept"],["class","absolute inset-0 z-20 flex items-center justify-center",4,"ngxPermissionsExcept"],[1,"sm:col-span-3"],[1,"relative","flex","items-center","justify-center","h-64","overflow-hidden","w-256","rounded-xl","ring-4","ring-bg-card"],["class","object-fill h-full rounded w-256 bg-hover","alt","IMAGEN",3,"src",4,"ngIf"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],["class","flex items-center flex-shrink-0 mt-6 text-right sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"ml-1","text-primary-500"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white rounded-full bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","ngClass","click",4,"ngIf"],["mat-raised-button","",1,"ml-4","text-white","rounded-full","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],["alt","IMAGEN",1,"object-cover","rounded","bg-hover",3,"src"],[1,"text-xl","mt-15"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","logo-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["logoFileInput",""],["for","logo-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],["mat-icon-button","",3,"click"],["alt","IMAGEN",1,"object-fill","h-full","rounded","w-256","bg-hover",3,"src"],["id","cover-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["coverFileInput",""],["for","cover-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[3,"svgIcon"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7," Mis Clientes "),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.YNc(10,Ge,2,0,"a",7),e.YNc(11,ze,3,3,"a",7),e.qZA()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11),e.YNc(18,He,2,0,"div",12),e.YNc(19,Ke,3,3,"div",12),e.qZA()(),e.YNc(20,Xe,3,2,"div",13),e.qZA(),e.TgZ(21,"div",14)(22,"div",15)(23,"form",16)(24,"mat-accordion",17)(25,"mat-expansion-panel",18)(26,"mat-expansion-panel-header",19)(27,"mat-panel-title",20)(28,"div",21),e._uU(29," Informaci\xf3n General "),e.qZA()()(),e.TgZ(30,"div",22)(31,"div",23)(32,"mat-form-field",24)(33,"mat-label"),e._uU(34,"Nombre"),e.qZA(),e._UZ(35,"input",25),e.YNc(36,et,2,0,"mat-error",26),e.YNc(37,tt,2,0,"mat-error",26),e.qZA()(),e.TgZ(38,"div",23)(39,"mat-form-field",24)(40,"mat-label"),e._uU(41,"Siglas"),e.qZA(),e._UZ(42,"input",27),e.YNc(43,ot,2,0,"mat-error",26),e.qZA()(),e.TgZ(44,"div",23)(45,"mat-form-field",24)(46,"mat-label"),e._uU(47,"Sector"),e.qZA(),e.TgZ(48,"mat-select",28),e.YNc(49,nt,2,2,"mat-option",29),e.qZA(),e.TgZ(50,"mat-hint"),e._uU(51,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.qZA(),e.YNc(52,rt,2,0,"mat-error",26),e.qZA()(),e.TgZ(53,"div",23)(54,"mat-form-field",24)(55,"mat-label"),e._uU(56,"Tipo de Negocio"),e.qZA(),e.TgZ(57,"mat-select",28)(58,"mat-option",30),e._uU(59,"Comercio"),e.qZA()(),e.TgZ(60,"mat-hint"),e._uU(61,"Escoja su tipo de negocio"),e.qZA()()(),e.TgZ(62,"div",23)(63,"mat-form-field",31)(64,"mat-label"),e._uU(65,"Fecha de Constituci\xf3n"),e.qZA(),e._UZ(66,"mat-datepicker-toggle",32)(67,"mat-datepicker",null,33)(69,"input",34),e.qZA()(),e.TgZ(70,"div",23)(71,"mat-form-field",24)(72,"mat-label"),e._uU(73,"NIF"),e.qZA(),e._UZ(74,"input",27),e.TgZ(75,"mat-hint"),e._uU(76,"N\xfamero de Identificaci\xf3n Fiscal"),e.qZA()()(),e.TgZ(77,"div",23)(78,"mat-form-field",24)(79,"mat-label"),e._uU(80,"Cuenta bancaria"),e.qZA(),e._UZ(81,"input",35),e.YNc(82,at,2,0,"mat-error",26),e.qZA()(),e.TgZ(83,"div",23)(84,"mat-form-field",24)(85,"mat-label"),e._uU(86,"Moneda por defecto"),e.qZA(),e.TgZ(87,"mat-select",36)(88,"mat-option",37),e._uU(89,"CUP"),e.qZA(),e.TgZ(90,"mat-option",38),e._uU(91,"MLC"),e.qZA(),e.TgZ(92,"mat-option",39),e._uU(93,"USD"),e.qZA(),e.TgZ(94,"mat-option",40),e._uU(95,"MXN"),e.qZA()(),e._UZ(96,"mat-icon",41),e.YNc(97,it,2,0,"mat-error",26),e.qZA()(),e.TgZ(98,"div",23)(99,"mat-form-field",31)(100,"mat-label"),e._uU(101,"P\xe1gina Web"),e.qZA(),e._UZ(102,"mat-icon",42)(103,"input",43),e.qZA()(),e.TgZ(104,"div",44)(105,"span",45),e._uU(106,"Estado"),e.qZA(),e.TgZ(107,"mat-slide-toggle",46),e._uU(108," Activo "),e.qZA()(),e.TgZ(109,"div",47)(110,"mat-form-field",48)(111,"mat-label"),e._uU(112,"Descripci\xf3n del Negocio"),e.qZA(),e._UZ(113,"mat-icon",42)(114,"textarea",49),e.qZA()()()(),e.TgZ(115,"mat-expansion-panel")(116,"mat-expansion-panel-header",19)(117,"mat-panel-title",20)(118,"div",21),e._uU(119," Domicilio del Negocio "),e.qZA()()(),e.TgZ(120,"div",22)(121,"div",23)(122,"mat-form-field",24)(123,"mat-label"),e._uU(124,"Pa\xeds"),e.qZA(),e.TgZ(125,"mat-select",28)(126,"mat-option",50),e._uU(127,"Cuba"),e.qZA()(),e._UZ(128,"mat-icon",41),e.YNc(129,ct,2,0,"mat-error",26),e.qZA()(),e.TgZ(130,"div",23)(131,"mat-form-field",24)(132,"mat-label"),e._uU(133,"Provincia"),e.qZA(),e._UZ(134,"mat-icon",41),e.TgZ(135,"mat-select",28),e.YNc(136,st,2,2,"mat-option",29),e.qZA(),e.YNc(137,lt,2,0,"mat-error",26),e.qZA()(),e.TgZ(138,"div",23)(139,"mat-form-field",24)(140,"mat-label"),e._uU(141,"Municipio"),e.qZA(),e._UZ(142,"mat-icon",41),e.TgZ(143,"mat-select",28),e.YNc(144,mt,2,2,"mat-option",29),e.qZA(),e.YNc(145,_t,2,0,"mat-error",26),e.qZA()(),e.TgZ(146,"div",23)(147,"mat-form-field",51)(148,"mat-label"),e._uU(149,"C\xf3digo Postal"),e.qZA(),e._UZ(150,"input",52),e.YNc(151,ut,2,0,"mat-error",26),e.YNc(152,pt,2,0,"mat-error",26),e.qZA()(),e.TgZ(153,"div",47)(154,"mat-form-field",48)(155,"mat-label"),e._uU(156,"Direcci\xf3n"),e.qZA(),e._UZ(157,"mat-icon",42)(158,"textarea",53),e.YNc(159,gt,2,0,"mat-error",26),e.YNc(160,dt,2,0,"mat-error",26),e.qZA()()()(),e.TgZ(161,"mat-expansion-panel")(162,"mat-expansion-panel-header",19)(163,"mat-panel-title",20)(164,"div",21),e._uU(165," Im\xe1genes "),e.qZA()()(),e.TgZ(166,"div",54)(167,"div",55)(168,"div",56)(169,"div",57),e.YNc(170,ht,1,1,"img",58),e.TgZ(171,"div",59),e.YNc(172,ft,2,0,"div",60),e.qZA(),e.YNc(173,vt,3,2,"div",61),e.qZA()()(),e.TgZ(174,"div",62)(175,"div",56)(176,"div",63),e.YNc(177,bt,1,1,"img",64),e.TgZ(178,"div",59),e.YNc(179,Zt,2,0,"div",60),e.qZA(),e.YNc(180,It,3,2,"div",61),e.qZA()()()()()()()()(),e.TgZ(181,"div",65),e.YNc(182,Ft,3,2,"div",66),e.qZA()()),2&t){const a=e.MAs(68);e.xp6(6),e.Q6J("routerLink",e.DdM(86,qt)),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("ngIf",n.editMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(4),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("ngIf",n.editMode),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(87,O)),e.xp6(3),e.Q6J("formGroup",n.customerForm),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("maxlength")||n.customerForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("type","text")("formControlName","abbr")("maxlength",10),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("abbr").hasError("maxlength")),e.xp6(5),e.Q6J("formControlName","domain"),e.xp6(1),e.Q6J("ngForOf",n.domains)("ngForTrackBy",n.trackByFn),e.xp6(3),e.Q6J("ngIf",n.customerForm.get("domain").hasError("required")),e.xp6(5),e.Q6J("formControlName","customerType"),e.xp6(1),e.Q6J("value","comercio"),e.xp6(8),e.Q6J("for",a),e.xp6(3),e.Q6J("matDatepicker",a)("formControlName","foundationDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("type","text")("formControlName","nif")("maxlength",255),e.xp6(7),e.Q6J("type","text")("formControlName","bankAccount")("minLength",16)("maxLength",24),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("bankAccount").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("currency").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:globe-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","website"),e.xp6(4),e.Q6J("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("country").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",n.states)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("state").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",n.cities)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("max",99999),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("min")||n.customerForm.get("postalCode").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("maxlength")||n.customerForm.get("address").hasError("minlength")),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(8),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(88,O)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(89,O)),e.xp6(4),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(90,O)),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(91,O)),e.xp6(2),e.Q6J("ngxPermissionsExcept",e.DdM(92,O))}},dependencies:[h.yS,_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.sg,i.u,re.PQ,C.ey,U.lW,F.Mq,F.hl,F.nW,W.pp,W.ib,W.yz,W.yK,I.Hw,d.TO,d.KE,d.bx,d.hX,d.qo,J.Nt,C.wG,q.gD,X.Rr,se.gE,_.Ov],encapsulation:2,changeDetection:0}),o})();var Ze=l(6087),le=l(4847),Jt=l(6451),Te=l(8372),te=l(3900),Nt=l(3844),ye=l(6428),z=l(8966);function Qt(o,r){if(1&o&&e._UZ(0,"img",43),2&o){const t=e.oxw().$implicit;e.Q6J("alt","Foto")("src",t.logoUrl,e.LSH)}}function wt(o,r){1&o&&(e.TgZ(0,"div",44),e._uU(1," SIN FOTO "),e.qZA())}function Dt(o,r){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",45),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Et(o,r){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",46),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Lt(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"div",36),e.YNc(4,Qt,1,2,"img",37),e.YNc(5,wt,2,0,"div",38),e.qZA()(),e.TgZ(6,"div",39),e._uU(7),e.qZA(),e.TgZ(8,"div",39),e._uU(9),e.qZA(),e.TgZ(10,"div",28),e.YNc(11,Dt,2,1,"ng-container",23),e.YNc(12,Et,2,1,"ng-container",23),e.qZA(),e.TgZ(13,"div",40)(14,"button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.editCustomer(c))}),e._UZ(15,"mat-icon",42),e.qZA(),e.TgZ(16,"button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.deleteCustomer(c._id))}),e._UZ(17,"mat-icon",42),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit;e.xp6(4),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.domain," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Yt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Lt,18,8,"ng-container",33),e.BQk()),2&o){const t=r.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const Mt=function(o){return{"pointer-events-none":o}},Bt=function(){return[10,25,50,100]};function St(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",26)(2,"div",27)(3,"div",28),e._uU(4," Foto "),e.qZA(),e.TgZ(5,"div",29),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div"),e._uU(8," Sector "),e.qZA(),e.TgZ(9,"div",30),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",31),e._uU(12," Acciones "),e.qZA()(),e.YNc(13,Yt,2,2,"ng-container",23),e.ALo(14,"async"),e._UZ(15,"mat-paginator",32),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,9,t.customers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Mt,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,Bt))("showFirstLastButtons",!0)}}function Rt(o,r){if(1&o&&(e.ynx(0),e.YNc(1,St,16,14,"ng-container",25),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(37);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Ot(o,r){if(1&o&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.searchInputControl.value?"\xa1No se han encontrado clientes!":"\xa1No se ha creado ning\xfan cliente a\xfan!")}}let Pt=(()=>{class o{constructor(t,n,a,c,s,g,p){this._changeDetectorRef=t,this._dialog=n,this._customerService=a,this._fuseConfirmationService=c,this._router=s,this._snackBar=g,this.store=p,this.merchantId="",this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new i.NI(""),this.selectedCustomer=null,this._unsubscribeAll=new y.x}ngOnInit(){this.customers$=this.store.select(ie),this.store.select(ye.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,Te.b)(300),(0,te.w)(t=>(this.isLoading=!0,this._customerService.getCustomers(0,10,"name","asc",t,!1))),(0,E.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Jt.T)(this._sort.sortChange,this._paginator.page).pipe((0,te.w)(()=>(this.isLoading=!0,this._customerService.getCustomers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,""))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createCustomer(){this._router.navigate(["/modules/crm/customers/new"])}editCustomer(t){this._router.navigateByUrl(`/modules/crm/customers/${t._id}`)}deleteCustomer(t){this._fuseConfirmationService.open({title:"Eliminar Cliente",message:"\xbfEsta seguro que desea Eliminar el Cliente? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customerService.deleteCustomer(t,this.pagination.page,this.pagination.size,"active","desc").subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(z.uw),e.Y36(D),e.Y36(S.R),e.Y36(h.F0),e.Y36(R.ux),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["crm-customers"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ze.NW,5),e.Gf(le.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._paginator=a.first),e.iGM(a=e.CRH())&&(n._sort=a.first)}},decls:38,vars:12,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto","overflow-x-auto","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/crm/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","sm:mt-0","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","mt-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","sm:mt-0","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noCustomers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","customers-table"],[1,"text-center"],[3,"mat-sort-header"],[1,"text-center",3,"mat-sort-header"],[1,"pr-4","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","customers-table"],[1,"items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"flex","justify-end","gap-2","flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"CRM"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Clientes"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Clientes "),e.qZA()()(),e.TgZ(24,"div",14)(25,"mat-form-field",15),e._UZ(26,"mat-icon",16)(27,"input",17),e.qZA(),e.TgZ(28,"button",18),e.NdJ("click",function(){return n.createCustomer()}),e._UZ(29,"mat-icon",19),e.TgZ(30,"span",20),e._uU(31,"Nuevo"),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",22),e.YNc(34,Rt,2,2,"ng-container",23),e.ALo(35,"async"),e.YNc(36,Ot,2,1,"ng-template",null,24,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(35,10,n.customers$)))},dependencies:[h.yS,_.mk,_.sg,_.O5,i.Fj,i.JJ,i.oH,re.PQ,U.lW,I.Hw,d.KE,d.qo,J.Nt,Ze.NW,le.YE,le.nU,_.Ov],encapsulation:2,data:{animation:Nt.L},changeDetection:0}),o})();var $t=l(4128);const jt=[{path:"",component:je},{path:"customers",component:Pt,resolve:{customers:(()=>{class o{constructor(t,n){this._customersService=t,this.store=n}resolve(t,n){return this._customersService.getCustomers()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(D),e.LFG(v.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}},{path:"customers/:customerId",component:Ut,resolve:{customer:(()=>{class o{constructor(t){this._customersService=t}resolve(t,n){const a=t.params.customerId;return"new"===a?this._customersService.getDomains():(0,$t.D)([this._customersService.getCustomerById(a),this._customersService.getDomains()])}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];var Ie=l(7446),Gt=l(4834),zt=l(2181),me=l(5439);const L=me||l.t(me,2),ke=new e.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function Kt(){return{useUtc:!1}}});function Vt(o,r){const t=Array(o);for(let n=0;n<o;n++)t[n]=r(n);return t}let Wt=(()=>{class o extends C._A{constructor(t,n){super(),this._options=n,this.setLocale(t||L.locale())}setLocale(t){super.setLocale(t);let n=L.localeData(t);this._localeData={firstDayOfWeek:n.firstDayOfWeek(),longMonths:n.months(),shortMonths:n.monthsShort(),dates:Vt(31,a=>this.createDate(2017,0,a+1).format("D")),longDaysOfWeek:n.weekdays(),shortDaysOfWeek:n.weekdaysShort(),narrowDaysOfWeek:n.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,n,a){const c=this._createMoment({year:t,month:n,date:a}).locale(this.locale);return c.isValid(),c}today(){return this._createMoment().locale(this.locale)}parse(t,n){return t&&"string"==typeof t?this._createMoment(t,n,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,n){return t=this.clone(t),this.isValid(t),t.format(n)}addCalendarYears(t,n){return this.clone(t).add({years:n})}addCalendarMonths(t,n){return this.clone(t).add({months:n})}addCalendarDays(t,n){return this.clone(t).add({days:n})}toIso8601(t){return this.clone(t).format()}deserialize(t){let n;if(t instanceof Date)n=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;n=this._createMoment(t,L.ISO_8601).locale(this.locale)}return n&&this.isValid(n)?this._createMoment(n).locale(this.locale):super.deserialize(t)}isDateInstance(t){return L.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return L.invalid()}_createMoment(t,n,a){const{strict:c,useUtc:s}=this._options||{};return s?L.utc(t,n,a,c):L(t,n,a,c)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.Ad,8),e.LFG(ke,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Xt={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let eo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:C._A,useClass:Wt,deps:[C.Ad,ke]}]}),o})(),to=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:C.sG,useValue:Xt}],imports:[eo]}),o})();var oo=l(5899),no=l(9814),oe=l(2638),ro=l(8279),Y=l(7238);let ao=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),io=(()=>{class o{constructor(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[h.lC],encapsulation:2,changeDetection:0}),o})(),co=(()=>{class o{canDeactivate(t,n,a,c){let s=c.root;for(;s.firstChild;)s=s.firstChild;return!(c.url.includes("/contacts")&&!s.paramMap.get("id"))||t.closeDrawer().then(()=>!0)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var so=l(262),lo=l(2843),N=l(4703);const P=be.N.API_URL;let H=(()=>{class o{constructor(t,n){this._httpClient=t,this.store=n}getContacts(t=0,n=20,a="name",c="asc",s="",g=!1){const p=(new $.LE).append("page",t).append("size",n).append("sort",a).append("order",c).append("search",s);return this._httpClient.get(`${P}/contacts/`,{params:p}).pipe((0,b.b)(x=>{this.store.dispatch((0,ce.Jr)({pagination:x.pagination})),this.store.dispatch(g?(0,N.MU)({contacts:x.dataArr}):(0,N.WT)({contacts:x.dataArr}))}))}searchContacts(t){return this._httpClient.get(`${P}/contacts/search/${t}`).pipe((0,E.U)(n=>n.dataArr))}getContactById(t){return this._httpClient.get(`${P}/contacts/${t}`).pipe((0,b.b)(n=>{this.store.dispatch((0,N.sy)({contact:n.contact}))}))}createContact(t){return this._httpClient.post(`${P}/contacts`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,N.rE)({contact:n.data}))}))}updateContact(t){return this._httpClient.patch(`${P}/contacts/${t._id}`,t).pipe((0,b.b)(n=>{this.store.dispatch((0,N.Tk)({contact:n.data}))}))}deleteContact(t){return this._httpClient.delete(`${P}/contacts/${t}`).pipe((0,b.b)(()=>{this.store.dispatch((0,N.zY)({id:t}))}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG($.eN),e.LFG(v.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _e=l(5181),ue=l(7495);let mo=(()=>{class o{constructor(t){this._contactsService=t}resolve(t,n){return this._contactsService.getContacts()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(H))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),_o=(()=>{class o{constructor(t,n,a,c,s,g){this._contactsService=t,this._employeesService=n,this._customersService=a,this._usersService=c,this._router=s,this.store=g}resolve(t,n){const a=t.paramMap.get("entity"),c=t.paramMap.get("id");if("new"===c)return;let s;switch(a){case"customer":s=this._customersService.getCustomerById(c);break;case"employee":s=this._employeesService.getEmployeeById(c);break;case"user":s=this._usersService.getUserById(c);break;case"contact":s=this._contactsService.getContactById(c)}return s.pipe((0,so.K)(g=>{console.error(g);const p=n.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(p),(0,lo._)(g)}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(H),e.LFG(_e.b),e.LFG(D),e.LFG(ue.K),e.LFG(h.F0),e.LFG(v.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Q=l(9646),uo=l(4968),Ae=l(2342),Fe=l(8765);const qe=o=>o.contacts,po=(0,v.P1)(qe,o=>o.contact),go=(0,v.P1)(qe,o=>o.contacts);var pe=l(4077),ge=l(1192),ho=l(4880),Ue=l(9832),Je=l(9685);const fo=["matDrawer"];function xo(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.pagination.length," ")}}const Co=function(o,r,t){return{"=0":o,"=1":r,other:t}};function vo(o,r){if(1&o&&(e.TgZ(0,"div",28),e.YNc(1,xo,2,1,"ng-container",20),e._uU(2),e.ALo(3,"i18nPlural"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.pagination.length>0),e.xp6(1),e.hij(" ",e.xi3(3,2,t.pagination.length,e.kEZ(5,Co,"Sin "+t.selectedFilter.toLocaleLowerCase(),t.selectedFilter.toLocaleLowerCase().replace("s",""),t.selectedFilter.toLocaleLowerCase()))," ")}}function bo(o,r){if(1&o&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.YNc(3,vo,4,9,"div",27),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.selectedFilter),e.xp6(1),e.Q6J("ngIf",t.pagination)}}function Zo(o,r){if(1&o&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.pagination.length,")")}}function To(o,r){if(1&o&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.pagination.length,")")}}function yo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-button-toggle",29)(2,"span",30),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.YNc(5,Zo,2,1,"span",31),e.YNc(6,To,2,1,"span",32),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("value",t),e.xp6(2),e.Oqu(e.lcZ(4,4,t)),e.xp6(2),e.Q6J("ngIf",t===n.selectedFilter&&n.pagination),e.xp6(1),e.Q6J("ngIf",t===n.selectedFilter&&n.isDrawerOpen&&n.pagination)}}function Io(o,r){1&o&&e.GkF(0)}function ko(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Io,1,0,"ng-container",35),e.BQk()),2&o){e.oxw();const t=e.MAs(33);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Ao(o,r){1&o&&e.GkF(0)}function Fo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Ao,1,0,"ng-container",35),e.BQk()),2&o){e.oxw();const t=e.MAs(31);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function qo(o,r){1&o&&e.GkF(0)}function Uo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,qo,1,0,"ng-container",35),e.BQk()),2&o){e.oxw();const t=e.MAs(29);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Jo(o,r){1&o&&e.GkF(0)}function No(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Jo,1,0,"ng-container",35),e.BQk()),2&o){e.oxw();const t=e.MAs(27);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Qo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",45),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function wo(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",46),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function Do(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function Eo(o,r){if(1&o&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("matTooltip","Negocio asignado"),e.xp6(1),e.Oqu(t.merchantId.name)}}const ne=function(o,r){return{"hover:bg-gray-100 dark:hover:bg-hover":o,"bg-primary-50 dark:bg-hover":r}},Lo=function(o){return["./user/",o]};function Yo(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,Qo,3,1,"ng-container",20),e.TgZ(2,"a",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",41),e.YNc(4,wo,2,1,"ng-container",20),e.YNc(5,Do,3,1,"ng-container",20),e.qZA(),e.TgZ(6,"div",42)(7,"div",43),e._uU(8),e.qZA(),e.YNc(9,Eo,2,2,"div",44),e.qZA()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(8,ne,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(11,Lo,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.AsE("",t.name," ",t.lastName," "),e.xp6(1),e.Q6J("ngIf",t.merchantId)}}function Mo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Yo,10,13,"ng-container",39),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Bo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Mo,2,2,"ng-container",38),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function So(o,r){1&o&&(e.TgZ(0,"div",49),e._uU(1," No ha creado ning\xfan usuario a\xfan!"),e.qZA())}function Ro(o,r){if(1&o&&(e.TgZ(0,"div",36),e.YNc(1,Bo,2,2,"ng-container",20),e.ALo(2,"async"),e.YNc(3,So,2,0,"ng-template",null,37,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.users$))}}function Oo(o,r){1&o&&(e.ynx(0),e.TgZ(1,"div",51),e._UZ(2,"div",52),e.qZA(),e.TgZ(3,"div",53),e._UZ(4,"div"),e.TgZ(5,"div",54)(6,"span",55),e._uU(7,"Nombre/Sector"),e.qZA()(),e.TgZ(8,"div",56)(9,"span",55),e._uU(10,"Negocio"),e.qZA()(),e.TgZ(11,"div",56)(12,"span",55),e._uU(13,"Cuenta Bancaria"),e.qZA()()(),e.BQk())}function Po(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",61)(2,"div",62),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.name.charAt(0)," ")}}function $o(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",46),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.logoUrl,e.LSH)}}function jo(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function Go(o,r){if(1&o&&(e.TgZ(0,"div",63)(1,"span",64),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.merchantId.name,"")}}function zo(o,r){if(1&o&&(e.TgZ(0,"div",63)(1,"span",64),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.bankAccount,"")}}const Ho=function(o){return["./customer/",o]},Ko=function(o){return{"col-span-3":o}};function Vo(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,Po,4,1,"ng-container",20),e.TgZ(2,"a",57),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",41),e.YNc(4,$o,2,1,"ng-container",20),e.YNc(5,jo,3,1,"ng-container",20),e.qZA(),e.TgZ(6,"div",58)(7,"div",43),e._uU(8),e.qZA(),e.TgZ(9,"div",59),e._uU(10),e.qZA()(),e.YNc(11,Go,3,1,"div",60),e.YNc(12,zo,3,1,"div",60),e.qZA(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,ne,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,Ho,t._id)),e.xp6(2),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(1),e.Q6J("ngClass",e.VKq(15,Ko,c.isDrawerOpen)),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.hij(" ",t.domain,""),e.xp6(1),e.Q6J("ngIf",!c.isDrawerOpen),e.xp6(1),e.Q6J("ngIf",!c.isDrawerOpen)}}function Wo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Oo,14,0,"ng-container",20),e.YNc(2,Vo,13,17,"ng-container",39),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isDrawerOpen),e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Xo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Wo,3,3,"ng-container",38),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function en(o,r){1&o&&(e.TgZ(0,"div",49),e._uU(1," No ha creado ning\xfan cliente a\xfan!"),e.qZA())}function tn(o,r){if(1&o&&(e.TgZ(0,"div",36),e.YNc(1,Xo,2,2,"ng-container",20),e.ALo(2,"async"),e.YNc(3,en,2,0,"ng-template",null,50,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.customers$))}}function on(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",45),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function nn(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",46),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function rn(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}const an=function(o){return["./employee/",o]};function cn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,on,3,1,"ng-container",20),e.TgZ(2,"a",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",41),e.YNc(4,nn,2,1,"ng-container",20),e.YNc(5,rn,3,1,"ng-container",20),e.qZA(),e.TgZ(6,"div",42)(7,"div",43),e._uU(8),e.qZA(),e.TgZ(9,"div",48),e._uU(10),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,ne,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,an,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.lnq("",t.name," ",t.lastname1," ",t.lastname2,""),e.xp6(1),e.Q6J("matTooltip","Cargo"),e.xp6(1),e.hij(" ",t.charge.name,"")}}function sn(o,r){if(1&o&&(e.ynx(0),e.YNc(1,cn,11,15,"ng-container",39),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function ln(o,r){if(1&o&&(e.ynx(0),e.YNc(1,sn,2,2,"ng-container",38),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function mn(o,r){1&o&&(e.TgZ(0,"div",49),e._uU(1," No ha creado ning\xfan empleado a\xfan!"),e.qZA())}function _n(o,r){if(1&o&&(e.TgZ(0,"div",36),e.YNc(1,ln,2,2,"ng-container",20),e.ALo(2,"async"),e.YNc(3,mn,2,0,"ng-template",null,65,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.employees$))}}function un(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",45),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}function pn(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",46),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)}}function gn(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e._uU(2),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name.charAt(0)," ")}}const dn=function(o){return["./contact/",o]};function hn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,un,3,1,"ng-container",20),e.TgZ(2,"a",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.setSelectedItem(c))}),e.TgZ(3,"div",41),e.YNc(4,pn,2,1,"ng-container",20),e.YNc(5,gn,3,1,"ng-container",20),e.qZA(),e.TgZ(6,"div",42)(7,"div",43),e._uU(8),e.qZA(),e.TgZ(9,"div",48),e._uU(10),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(2).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===n||t.name.charAt(0)!==a[n-1].name.charAt(0)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,ne,!c.selectedItem||c.selectedItem._id!==t._id,c.selectedItem&&c.selectedItem._id===t._id))("routerLink",e.VKq(13,dn,t._id)),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.imageUrl),e.xp6(3),e.lnq("",t.name," ",t.lastname1," ",t.lastname2,""),e.xp6(1),e.Q6J("matTooltip","Cargo"),e.xp6(1),e.hij(" ",t.charge,"")}}function fn(o,r){if(1&o&&(e.ynx(0),e.YNc(1,hn,11,15,"ng-container",39),e.BQk()),2&o){const t=e.oxw().ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function xn(o,r){if(1&o&&(e.ynx(0),e.YNc(1,fn,2,2,"ng-container",38),e.BQk()),2&o){const t=r.ngIf;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",n)}}function Cn(o,r){1&o&&(e.TgZ(0,"div",49),e._uU(1,"No ha creado ning\xfan contacto a\xfan!"),e.qZA())}function vn(o,r){if(1&o&&(e.TgZ(0,"div",36),e.YNc(1,xn,2,2,"ng-container",20),e.ALo(2,"async"),e.YNc(3,Cn,2,0,"ng-template",null,66,e.W1O),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contacts$))}}let Ne=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsService=a,this._employeesService=c,this._customersService=s,this._usersService=g,this._document=p,this._router=x,this._fuseMediaWatcherService=Z,this.store=T,this.contacts$=(0,Q.of)([]),this.users$=(0,Q.of)([]),this.employees$=(0,Q.of)([]),this.customers$=(0,Q.of)([]),this.isDrawerOpen=!1,this.searchInputControl=new i.NI(""),this.filters=[],this.selectedFilter="Contactos",this._unsubscribeAll=new y.x}ngOnInit(){this.contacts$=this.store.select(go),this.employees$=this.store.select(Ae.ri),this.customers$=this.store.select(ie),this.users$=this.store.select(Fe.YN),this.store.select(ye.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,te.w)(t=>this.getItems(0,20,"name","asc",t))).subscribe(),this.matDrawer.openedChange.subscribe(t=>{if(!t){switch(this.selectedFilter){case"Clientes":this.store.dispatch((0,A.UP)());break;case"Empleados":this.store.dispatch((0,ge.WU)());break;case"Usuarios":this.store.dispatch((0,pe.pn)());break;case"Contactos":this.store.dispatch((0,N.Di)())}this.selectedItem=null}this.isDrawerOpen=t,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.drawerMode=t.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()}),(0,uo.R)(this._document,"keydown").pipe((0,m.R)(this._unsubscribeAll),(0,ae.h)(t=>(!0===t.ctrlKey||t.metaKey)&&"/"===t.key)).subscribe(t=>{this.createEntity()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onScrollDown(){(this.pagination.page+1)*this.pagination.size<this.pagination.length&&this.getItems(this.pagination.page+1,20,"name","asc",this.searchInputControl.value,!0).pipe((0,m.R)(this._unsubscribeAll)).subscribe()}onScrollUp(){console.log("onScrollUp")}onFilterChange(t){this.selectedFilter=t.value;const n=this.getItems(0,20,"name","asc",this.searchInputControl.value).subscribe();setTimeout(()=>{n.unsubscribe()},2e4)}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createEntity(){switch(this.selectedItem=null,this.selectedFilter){case"Clientes":this._router.navigate(["./customer","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,A.UP)());break;case"Empleados":this._router.navigate(["./employee","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,ge.WU)());break;case"Usuarios":this._router.navigate(["./user","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,pe.pn)());break;case"Contactos":this._router.navigate(["./contact","new"],{relativeTo:this._activatedRoute}),this.store.dispatch((0,N.Di)())}}trackByFn(t,n){return n.id||t}setSelectedItem(t){this.selectedItem&&t._id===this.selectedItem._id?this._router.navigate(["/modules/contacts"]):this.selectedItem=t}getItems(t=0,n=10,a="name",c="asc",s="",g=!1){switch(this.selectedFilter){case"Clientes":return this._customersService.getCustomers(t,n,a,c,s,g);case"Empleados":return this._employeesService.getEmployees(t,n,a,c,s,g);case"Usuarios":return this._usersService.getUsers(t,n,a,c,s,g);default:return this._contactsService.getContacts(t,n,a,c,s)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(H),e.Y36(_e.b),e.Y36(D),e.Y36(ue.K),e.Y36(_.K0),e.Y36(h.F0),e.Y36(ho.T),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(fo,7),2&t){let a;e.iGM(a=e.CRH())&&(n.matDrawer=a.first)}},decls:34,vars:21,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],["infiniteScroll","",1,"flex","flex-col",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrollWindow","scrolled","scrolledUp"],[1,"flex-auto"],[1,"flex","flex-col","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8","border-b"],[1,"flex","flex-col","sm:flex-row","sm:justify-between"],["class","hidden md:block",4,"ngIf"],[1,"overflow-auto","sm:overflow-hidden"],[1,"sm:flex","sm:flex-wrap","sm:-m-2",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"flex","flex-wrap","items-center","shrink-0"],[1,"mt-4","flex-auto","mr-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"mt-4","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"color","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","sm:block"],[4,"ngIf"],["userListContent",""],["customerListContent",""],["employeesListContent",""],["contactListContent",""],[1,"hidden","md:block"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["class","ml-0.5 font-medium text-secondary",4,"ngIf"],[1,"ml-0.5","font-medium","text-secondary"],[1,"m-2",3,"value"],[1,"text-secondary"],["class","md:hidden ml-1.5 font-medium text-secondary",4,"ngIf"],["class","ml-1.5 font-medium text-secondary",4,"ngIf"],[1,"md:hidden","ml-1.5","font-medium","text-secondary"],[1,"ml-1.5","font-medium","text-secondary"],[4,"ngTemplateOutlet"],[1,"relative"],["noUsers",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-20","flex","items-center","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"ngClass","routerLink","click"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],["class","leading-5 truncate text-secondary",3,"matTooltip",4,"ngIf"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],["alt","Contact imageUrl",1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"leading-5","truncate","text-secondary",3,"matTooltip"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"],["noCustomers",""],[1,"hidden","sm:block","bg-gray-50","absolute","w-full"],[1,"h-8"],[1,"z-20","h-8","sticky","top-0","-mt-px","px-6","md:px-8","border-t","border-b","dark:bg-gray-900","text-secondary","hidden","sm:grid","contacts-employees-table"],[1,"bg-gray-50","h-full","grid","items-center"],[1,"text-sm"],[1,"bg-gray-50","h-full","items-center","hidden","md:grid"],[1,"z-20","grid","tems-center","px-6","py-4","md:px-8","cursor-pointer","border-b","contacts-employees-table",3,"ngClass","routerLink","click"],[1,"grid","grid-rows-2",3,"ngClass"],[1,"leading-5","truncate","text-secondary"],["class","hidden md:grid grid-rows-2",4,"ngIf"],[1,"z-10","h-8","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","bg-gray-50","dark:bg-gray-900","text-secondary"],[1,"bg-gray-50","w-4","text-center"],[1,"hidden","md:grid","grid-rows-2"],[1,"row-start-2","leading-5","truncate","text-secondary"],["noEmployees",""],["noContacts",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-drawer-container",1),e.NdJ("backdropClick",function(){return n.onBackdropClicked()}),e.TgZ(2,"mat-drawer",2,3),e._UZ(4,"router-outlet"),e.qZA(),e.TgZ(5,"mat-drawer-content",4),e.NdJ("scrolled",function(){return n.onScrollDown()})("scrolledUp",function(){return n.onScrollUp()}),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7),e.YNc(9,bo,4,2,"div",8),e.TgZ(10,"div",9)(11,"mat-button-toggle-group",10),e.NdJ("ngModelChange",function(c){return n.selectedFilter=c})("change",function(c){return n.onFilterChange(c)}),e.YNc(12,yo,7,6,"ng-container",11),e.qZA()()(),e.TgZ(13,"div",12)(14,"div",13)(15,"mat-form-field",14),e._UZ(16,"mat-icon",15)(17,"input",16),e.qZA()(),e.TgZ(18,"button",17),e.NdJ("click",function(){return n.createEntity()}),e._UZ(19,"mat-icon",18),e.TgZ(20,"span",19),e._uU(21,"Nuevo"),e.qZA()()()(),e.YNc(22,ko,2,1,"ng-container",20),e.YNc(23,Fo,2,1,"ng-container",20),e.YNc(24,Uo,2,1,"ng-container",20),e.YNc(25,No,2,1,"ng-container",20),e.YNc(26,Ro,5,3,"ng-template",null,21,e.W1O),e.YNc(28,tn,5,3,"ng-template",null,22,e.W1O),e.YNc(30,_n,5,3,"ng-template",null,23,e.W1O),e.YNc(32,vn,5,3,"ng-template",null,24,e.W1O),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.xp6(3),e.Q6J("infiniteScrollDistance",2)("infiniteScrollUpDistance",2)("infiniteScrollThrottle",150)("scrollWindow",!1),e.xp6(4),e.Q6J("ngIf",!n.isDrawerOpen),e.xp6(2),e.Q6J("ngModel",n.selectedFilter),e.xp6(1),e.Q6J("ngForOf",n.filters),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar "+n.selectedFilter.toLocaleLowerCase()),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(3),e.Q6J("ngIf","Contactos"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Empleados"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Clientes"===n.selectedFilter),e.xp6(1),e.Q6J("ngIf","Usuarios"===n.selectedFilter))},dependencies:[h.lC,h.yS,U.lW,d.KE,d.qo,I.Hw,J.Nt,oe.jA,oe.kh,oe.LW,Y.gM,_.mk,_.sg,_.O5,_.tP,i.Fj,i.JJ,i.On,i.oH,Ue.A9,Ue.Yi,Je.Ry,_.Ov,_.rS,_.Gx],encapsulation:2,changeDetection:0}),o})();var u=l(2491);function bn(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.contact.merchantId.coverUrl,e.LSH)}}function Zn(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.contact.imageUrl,e.LSH)}}function Tn(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.contact.name.charAt(0)," ")}}const Qe=function(){return["../../"]};function yn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,bn,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,Zn,1,1,"img",10),e.YNc(11,Tn,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.contact.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,Qe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.contact.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.contact.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.contact.name),e.xp6(3),e.Oqu("Contacto")}}function In(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.contact.merchantId.coverUrl,e.LSH)}}function kn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",56,57),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",58),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function An(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function Fn(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.contact.imageUrl,e.LSH)}}function qn(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.contact.name.charAt(0)," ")}}function Un(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function Jn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function Nn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function Qn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function wn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function Dn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function En(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function Ln(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function Yn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function Mn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto es obligatorio. "),e.qZA())}function Bn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto debe contener entre 3 y 255 caracteres. "),e.qZA())}function Sn(o,r){if(1&o&&(e.TgZ(0,"mat-option",60),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Rn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un cliente "),e.qZA())}function On(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function Pn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function $n(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function jn(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",60)(2,"span",65),e._UZ(3,"span",67),e.TgZ(4,"span",15),e._uU(5),e.qZA(),e.TgZ(6,"span",68),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function Gn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function zn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function Hn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function Kn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.qZA())}function Vn(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Wn(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}const we=function(o){return{"mt-6":o}};function Xn(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",61)(2,"mat-form-field",62),e.YNc(3,$n,2,0,"mat-label",1),e._UZ(4,"input",63),e.TgZ(5,"mat-select",64)(6,"mat-select-trigger")(7,"span",65)(8,"span",66),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",60)(11,"span",65),e._UZ(12,"span",67),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",68),e._uU(17),e.qZA()()(),e.YNc(18,jn,8,3,"ng-container",42),e.qZA(),e.YNc(19,Gn,2,0,"mat-error",1),e.YNc(20,zn,2,0,"mat-error",1),e.YNc(21,Hn,2,0,"mat-error",1),e.YNc(22,Kn,2,0,"mat-error",1),e.qZA(),e.TgZ(23,"mat-form-field",69),e.YNc(24,Vn,2,0,"mat-label",1),e._UZ(25,"mat-icon",37)(26,"input",70),e.YNc(27,Wn,2,0,"mat-error",1),e.qZA(),e.ynx(28),e.TgZ(29,"div",71)(30,"button",72),e.NdJ("click",function(){const c=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.removePhoneNumberField(c))}),e._UZ(31,"mat-icon",14),e.qZA()(),e.BQk(),e.qZA(),e.BQk()}if(2&o){const t=r.$implicit,n=r.index,a=r.first,c=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(c.contactForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,26,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",c.statesCodes)("ngForTrackBy",c.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("required")),e.xp6(2),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(2),e.Q6J("ngClass",e.VKq(28,we,a)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function er(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function tr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function or(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio "),e.qZA())}function nr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function rr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}function ar(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",73)(2,"mat-form-field",62),e.YNc(3,er,2,0,"mat-label",1),e._UZ(4,"mat-icon",37)(5,"input",74),e.YNc(6,tr,2,0,"mat-error",1),e.YNc(7,or,2,0,"mat-error",1),e.qZA(),e.TgZ(8,"mat-form-field",69),e.YNc(9,nr,2,0,"mat-label",1),e._UZ(10,"mat-icon",37)(11,"input",70),e.YNc(12,rr,2,0,"mat-error",1),e.qZA(),e.ynx(13),e.TgZ(14,"div",71)(15,"button",75),e.NdJ("click",function(){const c=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.removeEmailField(c))}),e._UZ(16,"mat-icon",14),e.qZA()(),e.BQk(),e.qZA(),e.BQk()}if(2&o){const t=r.$implicit,n=r.first;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("required")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(2),e.Q6J("ngClass",e.VKq(15,we,n)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function ir(o,r){if(1&o&&(e.TgZ(0,"mat-option",60),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function cr(o,r){if(1&o&&(e.TgZ(0,"mat-option",60),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function sr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function lr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteContact())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const De=function(o){return{"cursor-not-allowed":o}};function mr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateContact())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.contactForm.invalid)("matTooltip","Salvar")("disabled",t.contactForm.invalid)("ngClass",e.VKq(5,De,t.contactForm.invalid))}}function _r(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createContact())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.contactForm.invalid)("matTooltip","Salvar")("disabled",t.contactForm.invalid)("ngClass",e.VKq(5,De,t.contactForm.invalid))}}function ur(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,In,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",23)(7,"div",7)(8,"form",24)(9,"div",25)(10,"div",26),e._UZ(11,"div",27),e.TgZ(12,"div",28),e.YNc(13,kn,5,3,"div",1),e.YNc(14,An,3,1,"div",1),e.qZA(),e.YNc(15,Fn,1,1,"img",10),e.YNc(16,qn,2,1,"div",11),e.qZA()(),e.TgZ(17,"span",29),e._uU(18,"Informaci\xf3n General "),e.qZA(),e.TgZ(19,"div",30)(20,"div",31)(21,"mat-form-field",32)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",33),e.YNc(25,Un,2,0,"mat-error",1),e.YNc(26,Jn,2,0,"mat-error",1),e.YNc(27,Nn,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",31)(29,"mat-form-field",32)(30,"mat-label"),e._uU(31,"Primer Apellido"),e.qZA(),e._UZ(32,"input",34),e.YNc(33,Qn,2,0,"mat-error",1),e.YNc(34,wn,2,0,"mat-error",1),e.YNc(35,Dn,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",31)(37,"mat-form-field",32)(38,"mat-label"),e._uU(39,"Segundo Apellido"),e.qZA(),e._UZ(40,"input",34),e.YNc(41,En,2,0,"mat-error",1),e.YNc(42,Ln,2,0,"mat-error",1),e.YNc(43,Yn,2,0,"mat-error",1),e.qZA()(),e.TgZ(44,"div",31)(45,"mat-form-field",32)(46,"mat-label"),e._uU(47,"Cargo"),e.qZA(),e._UZ(48,"input",34),e.YNc(49,Mn,2,0,"mat-error",1),e.YNc(50,Bn,2,0,"mat-error",1),e.qZA()(),e.TgZ(51,"div",31)(52,"mat-form-field",32)(53,"mat-label"),e._uU(54,"Cliente"),e.qZA(),e.TgZ(55,"mat-select",35),e.NdJ("selectionChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.setCustomerMerchantId(a.value))}),e.YNc(56,Sn,2,2,"mat-option",36),e.ALo(57,"async"),e.qZA(),e.YNc(58,Rn,2,0,"mat-error",1),e.TgZ(59,"mat-hint"),e._uU(60,"Negocio cliente al cual est\xe1 asociado el contacto"),e.qZA()()(),e.TgZ(61,"div",31)(62,"mat-form-field",32)(63,"mat-label"),e._uU(64,"N\xfamero de identidad"),e.qZA(),e._UZ(65,"mat-icon",37)(66,"input",38),e.YNc(67,On,2,0,"mat-error",1),e.YNc(68,Pn,2,0,"mat-error",1),e.qZA()()(),e.TgZ(69,"span",29),e._uU(70,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(71,"div",39)(72,"div",40)(73,"div",41),e.YNc(74,Xn,32,30,"ng-container",42),e.qZA(),e.TgZ(75,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(76,"mat-icon",14),e.TgZ(77,"span",44),e._uU(78,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(79,"div",40)(80,"div",41),e.YNc(81,ar,17,17,"ng-container",42),e.qZA(),e.TgZ(82,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(83,"mat-icon",14),e.TgZ(84,"span",44),e._uU(85,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(86,"span",29),e._uU(87,"Domicilio"),e.qZA(),e.TgZ(88,"div",45)(89,"div",31)(90,"mat-form-field",46)(91,"mat-label"),e._uU(92,"Pa\xeds"),e.qZA(),e.TgZ(93,"mat-select",47)(94,"mat-option",48),e._uU(95,"Cuba"),e.qZA()(),e._UZ(96,"mat-icon",49),e.qZA()(),e.TgZ(97,"div",31)(98,"mat-form-field",32)(99,"mat-label"),e._uU(100,"Provincia"),e.qZA(),e.TgZ(101,"mat-select",47),e.YNc(102,ir,2,2,"mat-option",36),e.qZA(),e._UZ(103,"mat-icon",49),e.qZA()(),e.TgZ(104,"div",31)(105,"mat-form-field",32)(106,"mat-label"),e._uU(107,"Municipio"),e.qZA(),e.TgZ(108,"mat-select",47),e.YNc(109,cr,2,2,"mat-option",36),e.qZA(),e._UZ(110,"mat-icon",49),e.qZA()(),e.TgZ(111,"div",40)(112,"mat-form-field",50)(113,"mat-label"),e._uU(114,"Direcci\xf3n"),e.qZA(),e._UZ(115,"mat-icon",37)(116,"textarea",51),e.YNc(117,sr,2,0,"mat-error",1),e.qZA()()(),e.TgZ(118,"div",52),e.YNc(119,lr,2,2,"button",53),e.TgZ(120,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(121," Cancelar "),e.qZA(),e.YNc(122,mr,2,7,"button",55),e.YNc(123,_r,2,7,"button",55),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.contact&&t.contact.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(76,Qe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",t.contactForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.contact&&!t.contact.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("maxlength")||t.contactForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("maxlength")||t.contactForm.get("lastname1").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","charge")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("charge")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","customerId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,74,t.customers$))("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngIf",t.contactForm.get("customerId").hasError("required")),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("maxlength")||t.contactForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("pattern")),e.xp6(6),e.Q6J("ngForOf",t.contactForm.get("phoneNumbers").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",t.contactForm.get("emails").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",t.states)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",t.cities)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("address").hasError("maxlength")||t.contactForm.get("address").hasError("minlength")),e.xp6(2),e.Q6J("ngIf","add"!==t.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}let pr=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T,K){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsService=a,this._locationService=c,this._formBuilder=s,this._fuseConfirmationService=g,this._router=p,this._snackBar=x,this._imagesService=Z,this._customersService=T,this.store=K,this.cities=[],this.user$=(0,Q.of)(null),this.customers$=null,this.customers=[],this.states=[],this.statesCodes=[],this._unsubscribeAll=new y.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.contact$=this.store.select(po),this.contact$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.contact=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this._customersService.getActiveCustomers().pipe((0,m.R)(this._unsubscribeAll)).subscribe(),this.customers$=this.store.select(ie),this.customers$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.customers=t}),this._locationService.states$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.contactForm=this._formBuilder.group({_id:[""],merchantId:["",[i.kI.required]],customerId:["",[i.kI.required]],userId:[this.user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),u.L.onlyNumbersPattern()]],charge:["",[i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0}],state:[""],city:[""],imageUrl:[""]}),this.contactForm.get("state").valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.contactForm.reset(),this.contactForm.get("country").setValue("Cuba"),this.contactForm.get("userId").setValue(this.user._id),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createContact(){let t=this.contactForm.getRawValue();t=(0,w.omit)(t,"_id"),t.slug=new k.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Contacto",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._contactsService.createContact(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigate(["../",c.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})})}updateContact(){const t=this.contactForm.getRawValue();t.slug=new k.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Contacto",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._contactsService.updateContact(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this.store.dispatch((0,N.sy)({contact:c.data})),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}deleteContact(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el contacto? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._contactsService.deleteContact(this.contact._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("Contact",a).subscribe(c=>{this.contactForm.get("imageUrl").setValue(c.imageUrl),"edit"===this.actionMode&&this._contactsService.updateContact(Object.assign(Object.assign({},this.contact),{merchantId:this.contact.merchantId._id,customerId:this.contact.customerId._id,imageUrl:c.imageUrl})).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.contactForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("Contact",t).subscribe(s=>{this.contactForm.get("imageUrl").setValue(null),"edit"===this.actionMode&&this._contactsService.updateContact(Object.assign(Object.assign({},this.contact),{merchantId:this.contact.merchantId._id,customerId:this.contact.customerId._id,imageUrl:""})).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.contact&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}setCustomerMerchantId(t){const n=this.customers.find(a=>a._id===t);this.contactForm.get("merchantId").setValue(n.merchantId._id)}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){if("add"!==t){this._getCitiesByState(this.contact.state),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(this.contact),this.contactForm.get("merchantId").setValue(this.contact.merchantId._id),this.contactForm.get("customerId").setValue(this.contact.customerId._id);const n=[];this.contact.emails.length>0&&this.contact.emails.forEach(c=>{n.push(this._formBuilder.group({email:[c.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),n.forEach(c=>{this.contactForm.get("emails").push(c)});const a=[];this.contact.phoneNumbers.length>0&&this.contact.phoneNumbers.forEach(c=>{a.push(this._formBuilder.group({stateCode:[c.stateCode,[i.kI.required]],phoneNumber:[c.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),a.forEach(c=>{this.contactForm.get("phoneNumbers").push(c)}),this._changeDetectorRef.markForCheck()}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(H),e.Y36(G.a),e.Y36(i.qu),e.Y36(S.R),e.Y36(h.F0),e.Y36(R.ux),e.Y36(j.C),e.Y36(D),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contact-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","",3,"type","formControlName","minlength","maxlength"],["required","",3,"formControlName","selectionChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName","maxlength","minlength"],[1,"grid","sm:grid-cols-2","gap-y-6","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],[1,"w-full","fuse-mat-no-subscript"],[3,"formControlName"],["value","Cuba"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName","minLength","maxlength"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-6","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,yn,23,10,"ng-container",1),e.YNc(2,ur,124,77,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.contact&&n.contact.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,U.lW,d.TO,d.KE,d.bx,d.hX,d.qo,I.Hw,J.Nt,C.wG,q.gD,q.$L,C.ey,Y.gM,_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.oH,i.sg,i.u,_.Ov,_.rS],encapsulation:2,changeDetection:0}),o})();var gr=l(8675),Ee=l(1079);function dr(o,r){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar contacto"),e.qZA())}function hr(o,r){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Editar contacto"),e.qZA())}function fr(o,r){if(1&o&&(e.TgZ(0,"mat-option",15)(1,"div",16),e._uU(2),e.qZA()()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(2),e.gL8(" ",t.name," ",t.lastname1," ",t.lastname2," | ",t.phoneNumbers[0].phoneNumber," | ",t.emails[0].email," | ",t.idNumber," ")}}function xr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9),e._UZ(2,"input",10)(3,"mat-icon",11),e.TgZ(4,"mat-autocomplete",12,13),e.NdJ("optionSelected",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.fillContactForm(a))}),e.YNc(6,fr,3,7,"mat-option",14),e.ALo(7,"async"),e.qZA()()()}if(2&o){const t=e.MAs(5),n=e.oxw();e.xp6(2),e.Q6J("formControl",n.searchInputControl)("matAutocomplete",t)("maxlength",255)("placeholder","Busque por los campos, seleccione y rellene el formulario"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,7,n.filteredContacts))}}function Cr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function vr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function br(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function Zr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function Tr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function yr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function Ir(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function kr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function Ar(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function Fr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto es obligatorio. "),e.qZA())}function qr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El cargo del contacto debe contener entre 3 y 255 caracteres. "),e.qZA())}function Ur(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function Jr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function Nr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function Qr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",15)(2,"span",45),e._UZ(3,"span",47),e.TgZ(4,"span",48),e._uU(5),e.qZA(),e.TgZ(6,"span",49),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function wr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function Dr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function Er(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function Lr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.qZA())}function Yr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Mr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}const Le=function(o){return{"mt-6":o}};function Br(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",52)(2,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",33),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Le,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Sr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",41)(2,"mat-form-field",42),e.YNc(3,Nr,2,0,"mat-label",6),e._UZ(4,"input",43),e.TgZ(5,"mat-select",44)(6,"mat-select-trigger")(7,"span",45)(8,"span",46),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",15)(11,"span",45),e._UZ(12,"span",47),e.TgZ(13,"span",48),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",49),e._uU(17),e.qZA()()(),e.YNc(18,Qr,8,3,"ng-container",31),e.qZA(),e.YNc(19,wr,2,0,"mat-error",6),e.YNc(20,Dr,2,0,"mat-error",6),e.YNc(21,Er,2,0,"mat-error",6),e.YNc(22,Lr,2,0,"mat-error",6),e.qZA(),e.TgZ(23,"mat-form-field",50),e.YNc(24,Yr,2,0,"mat-label",6),e._UZ(25,"mat-icon",26)(26,"input",51),e.YNc(27,Mr,2,0,"mat-error",6),e.qZA(),e.YNc(28,Br,4,4,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.index,a=r.first,c=r.last,s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.contactForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,25,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("required")),e.xp6(2),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function Rr(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function Or(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function Pr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio "),e.qZA())}function $r(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function jr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}function Gr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",52)(2,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",33),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Le,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function zr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",54)(2,"mat-form-field",42),e.YNc(3,Rr,2,0,"mat-label",6),e._UZ(4,"mat-icon",26)(5,"input",55),e.YNc(6,Or,2,0,"mat-error",6),e.YNc(7,Pr,2,0,"mat-error",6),e.qZA(),e.TgZ(8,"mat-form-field",50),e.YNc(9,$r,2,0,"mat-label",6),e._UZ(10,"mat-icon",26)(11,"input",51),e.YNc(12,jr,2,0,"mat-error",6),e.qZA(),e.YNc(13,Gr,4,4,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.first,a=r.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("required")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function Hr(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Kr(o,r){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Vr(o,r){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}const Wr=function(o,r){return{"mt-8":o,"mt-4":r}};function Xr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"form",19)(3,"span",20),e._uU(4,"Informaci\xf3n General "),e.qZA(),e.TgZ(5,"div",21)(6,"div",22)(7,"mat-form-field",23)(8,"mat-label"),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",24),e.YNc(11,Cr,2,0,"mat-error",6),e.YNc(12,vr,2,0,"mat-error",6),e.YNc(13,br,2,0,"mat-error",6),e.qZA()(),e.TgZ(14,"div",22)(15,"mat-form-field",23)(16,"mat-label"),e._uU(17,"Primer Apellido"),e.qZA(),e._UZ(18,"input",25),e.YNc(19,Zr,2,0,"mat-error",6),e.YNc(20,Tr,2,0,"mat-error",6),e.YNc(21,yr,2,0,"mat-error",6),e.qZA()(),e.TgZ(22,"div",22)(23,"mat-form-field",23)(24,"mat-label"),e._uU(25,"Segundo Apellido"),e.qZA(),e._UZ(26,"input",25),e.YNc(27,Ir,2,0,"mat-error",6),e.YNc(28,kr,2,0,"mat-error",6),e.YNc(29,Ar,2,0,"mat-error",6),e.qZA()(),e.TgZ(30,"div",22)(31,"mat-form-field",23)(32,"mat-label"),e._uU(33,"Cargo"),e.qZA(),e._UZ(34,"input",25),e.YNc(35,Fr,2,0,"mat-error",6),e.YNc(36,qr,2,0,"mat-error",6),e.qZA()(),e.TgZ(37,"div",22)(38,"mat-form-field",23)(39,"mat-label"),e._uU(40,"N\xfamero de identidad"),e.qZA(),e._UZ(41,"mat-icon",26)(42,"input",27),e.YNc(43,Ur,2,0,"mat-error",6),e.YNc(44,Jr,2,0,"mat-error",6),e.qZA()()(),e.TgZ(45,"span",20),e._uU(46,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(47,"div",28)(48,"div",29)(49,"div",30),e.YNc(50,Sr,29,27,"ng-container",31),e.qZA(),e.TgZ(51,"div",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(52,"mat-icon",33),e.TgZ(53,"span",34),e._uU(54,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(55,"div",29)(56,"div",30),e.YNc(57,zr,14,14,"ng-container",31),e.qZA(),e.TgZ(58,"div",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(59,"mat-icon",33),e.TgZ(60,"span",34),e._uU(61,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(62,"span",20),e._uU(63,"Domicilio"),e.qZA(),e.TgZ(64,"div",21)(65,"div",22)(66,"mat-form-field",23)(67,"mat-label"),e._uU(68,"Direcci\xf3n"),e.qZA(),e._UZ(69,"mat-icon",26)(70,"input",35),e.YNc(71,Hr,2,0,"mat-error",6),e.qZA()(),e.TgZ(72,"div",22)(73,"mat-form-field",23)(74,"mat-label"),e._uU(75,"Provincia"),e.qZA(),e.TgZ(76,"mat-select",36),e.YNc(77,Kr,2,2,"mat-option",37),e.qZA(),e._UZ(78,"mat-icon",38),e.qZA()(),e.TgZ(79,"div",22)(80,"mat-form-field",39)(81,"mat-label"),e._uU(82,"Municipio"),e.qZA(),e.TgZ(83,"mat-select",36),e.YNc(84,Vr,2,2,"mat-option",37),e.qZA(),e._UZ(85,"mat-icon",38),e.qZA()(),e.TgZ(86,"div",22)(87,"mat-form-field",39)(88,"mat-label"),e._uU(89,"Pa\xeds"),e.qZA(),e.TgZ(90,"mat-select",36)(91,"mat-option",40),e._uU(92,"Cuba"),e.qZA()(),e._UZ(93,"mat-icon",38),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(60,Wr,"add"!==t.data.dialogMode,"add"===t.data.dialogMode))("formGroup",t.contactForm)("autocomplete","off"),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("maxlength")||t.contactForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("maxlength")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","charge")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("charge").hasError("charge")||t.contactForm.get("lastname2").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("maxlength")||t.contactForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("idNumber").hasError("pattern")),e.xp6(6),e.Q6J("ngForOf",t.contactForm.get("phoneNumbers").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",t.contactForm.get("emails").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.contactForm.get("address").hasError("maxlength")||t.contactForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",t.states)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",t.cities)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe")}}const Ye=function(o){return{"cursor-not-allowed":o}};function ea(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateContact())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.contactForm.invalid)("ngClass",e.VKq(4,Ye,t.contactForm.invalid))}}function ta(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createContact())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.contactForm.invalid)("ngClass",e.VKq(4,Ye,t.contactForm.invalid))}}function oa(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",57),e.ynx(2),e.TgZ(3,"button",58),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,ea,3,6,"ng-container",6),e.YNc(6,ta,3,6,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let na=(()=>{class o{constructor(t,n,a,c,s,g,p){this.data=t,this._dialogRef=n,this._changeDetectorRef=a,this._formBuilder=c,this._locationService=s,this._contactService=g,this.store=p,this.dialogMode="view",this.cities=[],this.user$=(0,Q.of)(null),this.states=[],this.statesCodes=[],this.searchInputControl=new i.p4,this._unsubscribeAll=new y.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.filteredContacts=this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,Te.b)(300),(0,gr.O)(""),(0,te.w)(t=>t&&t.length>5?this._contactService.searchContacts(t):(0,Q.of)([]))),this.contactForm=this._formBuilder.group({_id:[""],merchantId:["000000000000000000000000",[i.kI.required]],userId:[this.user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),u.L.onlyNumbersPattern()]],charge:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0}],state:[""],city:[""]}),this.contactForm.get("state").valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this.fillForm(this.data.dialogMode,this.data.contact)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}fillContactForm(t){const n=t.option.value;this.contactForm.patchValue(n),this.contactForm.get("merchantId").setValue(n.merchantId._id),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear();const a=[];n.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];n.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[i.kI.required]],phoneNumber:[s.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)}),this._changeDetectorRef.markForCheck()}createContact(){const t=this.contactForm.getRawValue();t.slug=new k.i(t.name).slug,this.closeDialog(t)}updateContact(){const t=this.contactForm.getRawValue();t.slug=new k.i(t.name).slug,this.closeDialog(t)}trackByFn(t,n){return n.id||t}displayFn(t){return(t&&t.name?t.name+" "+(t.lastname1?t.lastname1:"")+" "+(t.lastname2?t.lastname2:""):"").trim()}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t,n){if("add"===t){const a=[];a.push(this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];c.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)})}else{this._getCitiesByState(n.state),this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(n),this.contactForm.get("merchantId").setValue(n.merchantId);const a=[];n.emails.length>0?n.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(s=>{this.contactForm.get("emails").push(s)});const c=[];n.phoneNumbers.length>0?n.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[i.kI.required]],phoneNumber:[s.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):c.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),c.forEach(s=>{this.contactForm.get("phoneNumbers").push(s)}),this._changeDetectorRef.markForCheck()}}closeDialog(t){this._dialogRef.close(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(z.WI),e.Y36(z.so),e.Y36(e.sBO),e.Y36(i.qu),e.Y36(G.a),e.Y36(H),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contact-dialog"]],decls:10,vars:5,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],["class","w-full flex justify-center  mt-4 mb-4 sm:mt-8 sm:mb-8",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","w-full overflow-y-auto",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"w-full","flex","justify-center","mt-4","mb-4","sm:mt-8","sm:mb-8"],[1,"fuse-mat-no-subscript","fuse-mat-rounded","fuse-mat-bold","w-full","max-w-[80%]","sm:max-w-120"],["matInput","",3,"formControl","matAutocomplete","maxlength","placeholder"],["matPrefix","",3,"svgIcon"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"overflow-x-auto"],[1,"w-full","overflow-y-auto"],[1,"flex"],[1,"w-full",3,"ngClass","formGroup","autocomplete"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName","maxlength","minlength"],[1,"grid","sm:grid-cols-2","gap-y-6","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"type","formControlName","minLength","maxlength"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","fuse-mat-no-subscript"],["value","Cuba"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-6","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,dr,2,0,"h2",2),e.YNc(4,hr,2,0,"h2",2),e.qZA(),e.BQk(),e.YNc(5,xr,8,9,"div",3),e.TgZ(6,"div",4),e.ynx(7),e.YNc(8,Xr,94,63,"div",5),e.BQk(),e.qZA(),e.YNc(9,oa,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.oH,i.sg,i.u,Ee.XC,Ee.ZL,C.ey,U.lW,z.ZT,I.Hw,d.TO,d.KE,d.hX,d.qo,J.Nt,q.gD,q.$L,Y.gM,_.Ov,_.rS],encapsulation:2,changeDetection:0}),o})();function ra(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.customer.merchantId.coverUrl,e.LSH)}}function aa(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.customer.logoUrl,e.LSH)}}function ia(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.customer.name.charAt(0)," ")}}const Me=function(){return["../../"]};function ca(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,ra,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,aa,1,1,"img",10),e.YNc(11,ia,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.customer.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,Me)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.customer.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.customer.logoUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.customer.name),e.xp6(3),e.Oqu("Cliente")}}function sa(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.customerForm.get("coverUrl").value,e.LSH)}}function la(o,r){1&o&&e._UZ(0,"div",74)}function ma(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",75,76),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadCustomer(a.files))}),e.qZA(),e.TgZ(3,"label",77),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function _a(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeCustomer())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function ua(o,r){1&o&&e._UZ(0,"div",79)}function pa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",75,76),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",77),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function ga(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function da(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.customer.logoUrl,e.LSH)}}function ha(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.customer.name.charAt(0)," ")}}function fa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio es obligatorio. "),e.qZA())}function xa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio debe contener entre 3 y 255 caracteres. "),e.qZA())}function Ca(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas no deben superar los 10 caracteres. "),e.qZA())}function va(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function ba(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function Za(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Ta(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un sector. "),e.qZA())}function ya(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria debe superar los 15 caracteres. "),e.qZA())}function Ia(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un moneda. "),e.qZA())}function ka(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function Aa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Fa(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function Ua(o,r){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function Ja(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function Na(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function Qa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function wa(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal es obligatorio. "),e.qZA())}function Da(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",84)(2,"div",85)(3,"span",86),e._uU(4,"Nombre:"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div",85)(8,"span",87),e._uU(9,"Cargo:"),e.qZA(),e.TgZ(10,"span",88),e._uU(11),e.qZA()(),e.TgZ(12,"div",85)(13,"span",89),e._uU(14,"Tel\xe9fono:"),e.qZA(),e.TgZ(15,"span",90),e._uU(16),e.qZA()(),e.TgZ(17,"div",85)(18,"span",91),e._uU(19,"Correo electr\xf3nico:"),e.qZA(),e.TgZ(20,"span",92),e._uU(21),e.qZA()()(),e.ynx(22),e.TgZ(23,"div",93)(24,"button",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(3);return e.KtG(c.removeContactField(a))}),e._UZ(25,"mat-icon",14),e.qZA(),e.TgZ(26,"button",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),c=a.$implicit,s=a.index,g=e.oxw(3);return e.KtG(g._openDialog(c.getRawValue(),"edit",s))}),e._UZ(27,"mat-icon",14),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.get("name").value),e.xp6(5),e.Oqu(t.get("charge").value),e.xp6(5),e.Oqu(t.get("phoneNumbers").controls[0].get("phoneNumber").value),e.xp6(5),e.Oqu(t.get("emails").controls[0].get("email").value),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil")}}function Ea(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Da,28,6,"div",82),e.BQk()),2&o){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function La(o,r){if(1&o&&(e.TgZ(0,"div",80),e.YNc(1,Ea,2,1,"ng-container",81),e.qZA()),2&o){const t=r.ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function Ya(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteCustomer())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const Be=function(o){return{"cursor-not-allowed":o}};function Ma(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateCustomer())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.customerForm.invalid)("matTooltip","Salvar")("disabled",t.customerForm.invalid)("ngClass",e.VKq(5,Be,t.customerForm.invalid))}}function Ba(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createCustomer())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.customerForm.invalid)("matTooltip","Salvar")("disabled",t.customerForm.invalid)("ngClass",e.VKq(5,Be,t.customerForm.invalid))}}function Sa(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,sa,2,1,"ng-container",1),e.YNc(3,la,1,0,"div",23),e.TgZ(4,"div",24),e.YNc(5,ma,5,3,"div",1),e.YNc(6,_a,3,1,"div",1),e.qZA(),e.TgZ(7,"div",25)(8,"button",26),e._UZ(9,"mat-icon",5),e.qZA()()(),e.TgZ(10,"div",27)(11,"div",7)(12,"form",28)(13,"div",29)(14,"div",30),e.YNc(15,ua,1,0,"div",31),e.TgZ(16,"div",32),e.YNc(17,pa,5,3,"div",1),e.YNc(18,ga,3,1,"div",1),e.qZA(),e.YNc(19,da,1,1,"img",10),e.YNc(20,ha,2,1,"div",11),e.qZA()(),e.TgZ(21,"span",33),e._uU(22,"Informaci\xf3n General "),e.qZA(),e.TgZ(23,"div",34)(24,"div",35)(25,"mat-form-field",36)(26,"mat-label"),e._uU(27,"Nombre"),e.qZA(),e._UZ(28,"input",37),e.YNc(29,fa,2,0,"mat-error",1),e.YNc(30,xa,2,0,"mat-error",1),e.qZA()(),e.TgZ(31,"div",35)(32,"mat-form-field",36)(33,"mat-label"),e._uU(34,"Siglas"),e.qZA(),e._UZ(35,"input",38),e.YNc(36,Ca,2,0,"mat-error",1),e.qZA()(),e.TgZ(37,"div",35)(38,"mat-form-field",36)(39,"mat-label"),e._uU(40,"Negocio"),e.qZA(),e.TgZ(41,"mat-select",39),e.YNc(42,va,2,2,"mat-option",40),e.ALo(43,"async"),e.qZA(),e.YNc(44,ba,2,0,"mat-error",1),e.TgZ(45,"mat-hint"),e._uU(46,"Negocio al cual pertenece el Cliente"),e.qZA()()(),e.TgZ(47,"div",35)(48,"mat-form-field",36)(49,"mat-label"),e._uU(50,"Sector"),e.qZA(),e.TgZ(51,"mat-select",39),e.YNc(52,Za,2,2,"mat-option",40),e.qZA(),e.TgZ(53,"mat-hint"),e._uU(54,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.qZA(),e.YNc(55,Ta,2,0,"mat-error",1),e.qZA()(),e.TgZ(56,"div",35)(57,"mat-form-field",36)(58,"mat-label"),e._uU(59,"Tipo de Negocio"),e.qZA(),e.TgZ(60,"mat-select",39)(61,"mat-option",41),e._uU(62,"Comercio"),e.qZA()(),e.TgZ(63,"mat-hint"),e._uU(64,"Escoja su tipo de negocio"),e.qZA()()(),e.TgZ(65,"div",35)(66,"mat-form-field",42)(67,"mat-label"),e._uU(68,"Fecha de Constituci\xf3n"),e.qZA(),e._UZ(69,"mat-datepicker-toggle",43)(70,"mat-datepicker",null,44)(72,"input",45),e.qZA()(),e.TgZ(73,"div",35)(74,"mat-form-field",36)(75,"mat-label"),e._uU(76,"NIF"),e.qZA(),e._UZ(77,"input",38),e.TgZ(78,"mat-hint"),e._uU(79,"N\xfamero de Identificaci\xf3n Fiscal"),e.qZA()()(),e.TgZ(80,"div",35)(81,"mat-form-field",36)(82,"mat-label"),e._uU(83,"Cuenta bancaria"),e.qZA(),e._UZ(84,"input",46),e.YNc(85,ya,2,0,"mat-error",1),e.qZA()(),e.TgZ(86,"div",35)(87,"mat-form-field",36)(88,"mat-label"),e._uU(89,"Moneda por defecto"),e.qZA(),e.TgZ(90,"mat-select",47)(91,"mat-option",48),e._uU(92,"CUP"),e.qZA(),e.TgZ(93,"mat-option",49),e._uU(94,"MLC"),e.qZA(),e.TgZ(95,"mat-option",50),e._uU(96,"USD"),e.qZA(),e.TgZ(97,"mat-option",51),e._uU(98,"MXN"),e.qZA()(),e._UZ(99,"mat-icon",52),e.YNc(100,Ia,2,0,"mat-error",1),e.qZA()(),e.TgZ(101,"div",53)(102,"span",54),e._uU(103,"Estado"),e.qZA(),e.TgZ(104,"mat-slide-toggle",55),e._uU(105," Activo "),e.qZA()(),e.TgZ(106,"div",56)(107,"mat-form-field",57)(108,"mat-label"),e._uU(109,"Descripci\xf3n del Negocio"),e.qZA(),e._UZ(110,"mat-icon",58)(111,"textarea",59),e.qZA()()(),e.TgZ(112,"span",33),e._uU(113,"Domicilio del Negocio"),e.qZA(),e.TgZ(114,"div",34)(115,"div",35)(116,"mat-form-field",36)(117,"mat-label"),e._uU(118,"Direcci\xf3n"),e.qZA(),e._UZ(119,"mat-icon",58)(120,"input",60),e.YNc(121,ka,2,0,"mat-error",1),e.YNc(122,Aa,2,0,"mat-error",1),e.qZA()(),e.TgZ(123,"div",35)(124,"mat-form-field",36)(125,"mat-label"),e._uU(126,"Provincia"),e.qZA(),e._UZ(127,"mat-icon",52),e.TgZ(128,"mat-select",39),e.YNc(129,Fa,2,2,"mat-option",40),e.qZA(),e.YNc(130,qa,2,0,"mat-error",1),e.qZA()(),e.TgZ(131,"div",35)(132,"mat-form-field",36)(133,"mat-label"),e._uU(134,"Municipio"),e.qZA(),e._UZ(135,"mat-icon",52),e.TgZ(136,"mat-select",39),e.YNc(137,Ua,2,2,"mat-option",40),e.qZA(),e.YNc(138,Ja,2,0,"mat-error",1),e.qZA()(),e.TgZ(139,"div",35)(140,"mat-form-field",36)(141,"mat-label"),e._uU(142,"Pa\xeds"),e.qZA(),e.TgZ(143,"mat-select",39)(144,"mat-option",61),e._uU(145,"Cuba"),e.qZA()(),e._UZ(146,"mat-icon",52),e.YNc(147,Na,2,0,"mat-error",1),e.qZA()(),e.TgZ(148,"div",35)(149,"mat-form-field",62)(150,"mat-label"),e._uU(151,"C\xf3digo Postal"),e.qZA(),e._UZ(152,"input",63),e.YNc(153,Qa,2,0,"mat-error",1),e.YNc(154,wa,2,0,"mat-error",1),e.qZA()()(),e.TgZ(155,"span",33),e._uU(156,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(157,"div",64),e.YNc(158,La,2,2,"div",65),e.TgZ(159,"div",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a._openDialog(null,"add"))}),e._UZ(160,"mat-icon",14),e.TgZ(161,"span",67),e._uU(162,"Agregar Contacto"),e.qZA()(),e.TgZ(163,"div",68)(164,"mat-form-field",42)(165,"mat-label"),e._uU(166,"P\xe1gina Web"),e.qZA(),e._UZ(167,"mat-icon",58)(168,"input",69),e.qZA()()(),e.TgZ(169,"div",70),e.YNc(170,Ya,2,2,"button",71),e.TgZ(171,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(172," Cancelar "),e.qZA(),e.YNc(173,Ma,2,7,"button",73),e.YNc(174,Ba,2,7,"button",73),e.qZA()()()(),e.BQk()}if(2&o){const t=e.MAs(71),n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",!n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("ngIf",!n.customerForm.get("coverUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("coverUrl").value),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(92,Me)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",n.customerForm)("autocomplete","off"),e.xp6(3),e.Q6J("ngIf",!n.customerForm.get("logoUrl").value),e.xp6(2),e.Q6J("ngIf",!n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("logoUrl").value),e.xp6(1),e.Q6J("ngIf",n.customer&&!n.customer.logoUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("name").hasError("maxlength")||n.customerForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("type","text")("formControlName","abbr")("maxlength",10),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("abbr").hasError("maxlength")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(43,90,n.merchants$))("ngForTrackBy",n.trackByFn),e.xp6(2),e.Q6J("ngIf",n.customerForm.get("merchantId").hasError("required")),e.xp6(7),e.Q6J("formControlName","domain"),e.xp6(1),e.Q6J("ngForOf",n.domains)("ngForTrackBy",n.trackByFn),e.xp6(3),e.Q6J("ngIf",n.customerForm.get("domain").hasError("required")),e.xp6(5),e.Q6J("formControlName","customerType"),e.xp6(1),e.Q6J("value","comercio"),e.xp6(8),e.Q6J("for",t),e.xp6(3),e.Q6J("matDatepicker",t)("formControlName","foundationDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("type","text")("formControlName","nif")("maxlength",255),e.xp6(7),e.Q6J("type","text")("formControlName","bankAccount")("minLength",16)("maxLength",24),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("bankAccount").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("currency").hasError("required")),e.xp6(4),e.Q6J("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("address").hasError("maxlength")||n.customerForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",n.states)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("state").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",n.cities)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("country").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("max",99999),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("min")||n.customerForm.get("postalCode").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.customerForm.get("postalCode").hasError("required")),e.xp6(4),e.Q6J("ngIf",n.customerForm.get("contacts").controls),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(7),e.Q6J("svgIcon","heroicons_solid:globe-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","website"),e.xp6(2),e.Q6J("ngIf","add"!==n.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===n.actionMode),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode)}}let Ra=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T,K){this._activatedRoute=t,this._changeDetectorRef=n,this._customersService=a,this._locationService=c,this._formBuilder=s,this._fuseConfirmationService=g,this._router=p,this._snackBar=x,this._imagesService=Z,this.dialog=T,this.store=K,this.cities=[],this.user$=(0,Q.of)(null),this.merchants$=null,this.states=[],this.statesCodes=[],this.domainCode="",this.domains=[],this.stateCode="",this._unsubscribeAll=new y.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.customer$=this.store.select(Ce),this.customer$.subscribe(t=>{this.customer=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(V.UV),this._customersService.getDomains().pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.domains=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.customerForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[i.kI.required]],merchantId:["",[i.kI.required]],active:[!0],owner:[this.user._id,[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],abbr:["",[i.kI.maxLength(10)]],domain:["",[i.kI.required]],customerType:[{value:"comercio",disabled:!0},[i.kI.required]],foundationDate:[""],nif:["",i.kI.maxLength(255)],bankAccount:["",[i.kI.minLength(16),i.kI.maxLength(24)]],currency:["",[i.kI.required]],address:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],state:["",[i.kI.required]],city:["",[i.kI.required]],country:["",[i.kI.required]],postalCode:["",[i.kI.max(99999)]],contacts:this._formBuilder.array([]),website:["",[i.kI.maxLength(255)]],description:["",[i.kI.maxLength(1e3)]],logoUrl:[""],coverUrl:[""],code:[""]}),this.customerForm.get("state").valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.customerForm.reset(),this.customerForm.get("country").setValue("Cuba"),this.customerForm.get("userId").setValue(this.user._id),this.customerForm.get("owner").setValue(this.user._id),this.customerForm.get("customerType").setValue("comercio"),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeContactField(t){this._fuseConfirmationService.open({title:"Quitar contacto",message:"\xbfEsta seguro que desea quitar este contacto de la lista?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&(this.customerForm.get("contacts").removeAt(t),this._changeDetectorRef.markForCheck())})}createCustomer(){const t=`${this.stateCode}-${this.domainCode}-${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.customerForm.get("code").setValue(t);let n=this.customerForm.getRawValue();n.slug=new k.i(n.name).slug,n=(0,w.omit)(n,"_id"),this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._customersService.createCustomer(n).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigate(["../",s.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()},s=>{console.log(s.error.message)}),this._changeDetectorRef.markForCheck()})}updateCustomer(){const t=this.customerForm.getRawValue();t.slug=new k.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar datos del negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._customersService.updateCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.store.dispatch((0,A.Xg)({customer:c.data})),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)}),this._changeDetectorRef.markForCheck()})}deleteCustomer(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el customero? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._customersService.deleteCustomer(this.customer._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t,n="logoUrl"){if(!t.length)return;const c=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(c.type)||this._imagesService.uploadImage("Customer",c).subscribe(s=>{switch(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===n?" logo ":" cover "} cargada correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.customerForm.get(n).setValue(s.imageUrl),n){case"logoUrl":this.customer.logoUrl=s.imageUrl;break;case"coverUrl":this.customer.coverUrl=s.imageUrl}this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}removeImage(t="logoUrl"){const n=this.customerForm.get(t).value;switch(t){case"logoUrl":this.customer.logoUrl=null;break;case"coverUrl":this.customer.coverUrl=null}this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la imagen del  ${"logoUrl"===t?" logo":" cover"}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{"confirmed"===c&&(this._changeDetectorRef.markForCheck(),this._imagesService.removeImage("Customer",n).subscribe(g=>{this.customerForm.get(t).setValue(null),this._customersService.updateCustomer(this.customer).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Imagen del ${"logoUrl"===t?" logo ":" cover "} actualizada correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()},p=>{console.log(p)})}))})}_openDialog(t,n,a=-1){this.dialog.open(na,{width:"600px",height:"98%",data:{contact:t,dialogMode:n},panelClass:"ath-dialog-panel"}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(s=>{s&&"cancelled"!==s&&("add"===n&&this.addContactField(s),"edit"===n&&this.editContactField(s,a))})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.customer&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){"add"!==t&&(this._getCitiesByState(this.customer.state),this.customerForm.patchValue(this.customer),this.customerForm.get("merchantId").setValue(this.customer.merchantId._id),this.updateContactsFields(this.customer.contacts),this._changeDetectorRef.markForCheck())}updateContactsFields(t){const n=[];t.forEach(a=>{const c=this._formBuilder.group({_id:[a._id],merchantId:[a.merchantId,[i.kI.required]],userId:[a.userId,[i.kI.required]],name:[a.name,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname1:[a.lastname1,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname2:[a.lastname2,[i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],idNumber:[a.idNumber,[i.kI.maxLength(11),i.kI.minLength(11),u.L.onlyNumbersPattern()]],charge:[a.charge,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[a.slug],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:[a.address,[i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:a.country,disabled:!0}],state:[a.state],city:[a.city]}),s=[];a.emails.forEach(p=>{s.push(this._formBuilder.group({email:[p.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[p.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),s.forEach(p=>{c.get("emails").push(p)});const g=[];a.phoneNumbers.forEach(p=>{g.push(this._formBuilder.group({stateCode:[p.stateCode,[i.kI.required]],phoneNumber:[p.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[p.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),g.forEach(p=>{c.get("phoneNumbers").push(p)}),n.push(c)}),this.customerForm.get("contacts").clear(),n.forEach(a=>{this.customerForm.get("contacts").push(a)})}addContactField(t){const n=this._formBuilder.group({_id:[""],merchantId:["",[i.kI.required]],userId:["",[i.kI.required]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),u.L.onlyNumbersPattern()]],charge:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.minLength(3),i.kI.maxLength(255)]],country:["Cuba"],state:[""],city:[""]});n.patchValue(t);const a=[];t.emails.forEach(s=>{a.push(this._formBuilder.group({email:[s.email,[i.kI.required,i.kI.email,i.kI.maxLength(255)]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),a.forEach(s=>{n.get("emails").push(s)});const c=[];t.phoneNumbers.forEach(s=>{c.push(this._formBuilder.group({stateCode:[s.stateCode,[i.kI.required]],phoneNumber:[s.phoneNumber,[i.kI.required,i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[s.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}),c.forEach(s=>{n.get("phoneNumbers").push(s)}),this.customerForm.get("contacts").push(n),this._changeDetectorRef.markForCheck()}editContactField(t,n){const a=this.customerForm.get("contacts").getRawValue();a[n]=t,this.updateContactsFields(a),this._changeDetectorRef.markForCheck()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(D),e.Y36(G.a),e.Y36(i.qu),e.Y36(S.R),e.Y36(h.F0),e.Y36(R.ux),e.Y36(j.C),e.Y36(z.uw),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-customer-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],["class","absolute inset-0 bg-black bg-opacity-50 z-10",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,""],["mat-icon-button","",1,"absolute","top-6","right-8","z-20","bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"z-20","relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","absolute inset-0 bg-black bg-opacity-50 z-20",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","z-40"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","",3,"type","formControlName","maxlength"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"w-full","fuse-mat-no-subscript"],["matPrefix","",3,"for"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName","minLength","maxLength"],[3,"formControlName"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","sm:col-span-1"],[1,"items-start","font-medium"],[1,"mt-1","sm:mt-3",3,"color","formControlName"],[1,"sm:col-span-2"],[1,"w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],["matInput","","required","",3,"type","formControlName","minLength","maxlength"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","text","matInput","",3,"formControlName","max"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],["class","w-full mb-2 flex flex-col gap-y-4",4,"ngIf"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"mt-4","sm:col-span-1"],["matInput","",3,"type","formControlName"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],["id","logoUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["logoUrlFileInput",""],["for","logoUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-20"],[1,"w-full","mb-2","flex","flex-col","gap-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","flex",4,"ngIf"],[1,"flex"],[1,"grid","sm:grid-cols-2","gap-y-1","gap-x-2","w-[90%]","rounded-md","border-2","border-gray-200","p-5","text-secondary"],[1,"flex","flex-col","mt-2"],[1,"font-medium","text-secondary"],[1,"col-start-2","font-medium","text-secondary"],[1,"row-start-2","col-start-2"],[1,"col-start-3","font-medium","text-secondary"],[1,"row-start-2","col-start-3"],[1,"col-start-4","font-medium","text-secondary"],[1,"row-start-2","col-start-4"],[1,"flex","flex-col","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-icon-button","","matTooltip","Editar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ca,23,10,"ng-container",1),e.YNc(2,Sa,175,93,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.customer&&n.customer.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,U.lW,F.Mq,F.hl,F.nW,d.TO,d.KE,d.bx,d.hX,d.qo,I.Hw,J.Nt,C.wG,q.gD,C.ey,Y.gM,_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.sg,i.u,X.Rr,_.Ov],encapsulation:2,changeDetection:0}),o})();var Oa=l(4603),Pa=l(4789),$a=l(9804);function ja(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.employee.merchantId.coverUrl,e.LSH)}}function Ga(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.employee.imageUrl,e.LSH)}}function za(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.employee.name.charAt(0)," ")}}const Se=function(){return["../../"]};function Ha(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,ja,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.YNc(10,Ga,1,1,"img",10),e.YNc(11,za,2,1,"div",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",14),e.TgZ(15,"span",15),e._uU(16,"Editar"),e.qZA()()()(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17)(20,"span",18),e._uU(21),e.qZA()(),e._UZ(22,"div",19),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.employee.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(9,Se)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.employee.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.employee.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.employee.name),e.xp6(3),e.Oqu("Empleado")}}function Ka(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",20),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.employee.merchantId.coverUrl,e.LSH)}}function Va(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",69,70),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",71),e._UZ(4,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function Wa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",5),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function Xa(o,r){if(1&o&&e._UZ(0,"img",21),2&o){const t=e.oxw(2);e.Q6J("src",t.employee.imageUrl,e.LSH)}}function ei(o,r){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.employee.name.charAt(0)," ")}}function ti(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado es obligatorio. "),e.qZA())}function oi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function ni(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function ri(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado es obligatorio. "),e.qZA())}function ai(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function ii(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido del empleado no debe contener n\xfameros. "),e.qZA())}function ci(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado es obligatorio. "),e.qZA())}function si(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function li(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido del empleado no debe contener n\xfameros. "),e.qZA())}function mi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger el g\xe9nero "),e.qZA())}function _i(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n es obligatorio. "),e.qZA())}function ui(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n debe poseer 11 d\xedgitos. "),e.qZA())}function pi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identidad debe poseer solo n\xfameros. "),e.qZA())}function gi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function di(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un negocio "),e.qZA())}function hi(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function fi(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",73)(2,"span",78),e._UZ(3,"span",80),e.TgZ(4,"span",15),e._uU(5),e.qZA(),e.TgZ(6,"span",81),e._uU(7),e.qZA()()(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.code),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code)}}function xi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 y 8 d\xedgitos. "),e.qZA())}function Ci(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function vi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo sebe ser obligatorio. "),e.qZA())}function bi(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Zi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}const Re=function(o){return{"mt-6":o}};function Ti(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"button",85),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removePhoneNumberField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Re,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function yi(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",74)(2,"mat-form-field",75),e.YNc(3,hi,2,0,"mat-label",1),e._UZ(4,"input",76),e.TgZ(5,"mat-select",77)(6,"mat-select-trigger")(7,"span",78)(8,"span",79),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-option",73)(11,"span",78),e._UZ(12,"span",80),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"span",81),e._uU(17),e.qZA()()(),e.YNc(18,fi,8,3,"ng-container",47),e.qZA(),e.YNc(19,xi,2,0,"mat-error",1),e.YNc(20,Ci,2,0,"mat-error",1),e.YNc(21,vi,2,0,"mat-error",1),e.qZA(),e.TgZ(22,"mat-form-field",82),e.YNc(23,bi,2,0,"mat-label",1),e._UZ(24,"mat-icon",38)(25,"input",83),e.YNc(26,Zi,2,0,"mat-error",1),e.qZA(),e.YNc(27,Ti,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.index,a=r.first,c=r.last,s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",8),e.xp6(1),e.Q6J("formControl",t.get("stateCode")),e.xp6(4),e.Oqu(s.employeeForm.get("phoneNumbers").value[n].stateCode),e.xp6(1),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(15,24,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(1),e.Q6J("ngForOf",s.statesCodes)("ngForTrackBy",s.trackByFn),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.get("phoneNumber").hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.get("stateCode").hasError("required")),e.xp6(2),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(a&&c))}}function Ii(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function ki(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function Ai(o,r){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Etiqueta"),e.qZA())}function Fi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.qZA())}function qi(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"button",88),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,c=e.oxw(2);return e.KtG(c.removeEmailField(a))}),e._UZ(3,"mat-icon",14),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,Re,t)),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Ui(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",86)(2,"mat-form-field",75),e.YNc(3,Ii,2,0,"mat-label",1),e._UZ(4,"mat-icon",38)(5,"input",87),e.YNc(6,ki,2,0,"mat-error",1),e.qZA(),e.TgZ(7,"mat-form-field",82),e.YNc(8,Ai,2,0,"mat-label",1),e._UZ(9,"mat-icon",38)(10,"input",83),e.YNc(11,Fi,2,0,"mat-error",1),e.qZA(),e.YNc(12,qi,4,4,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=r.$implicit,n=r.first,a=r.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",t.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("email").hasError("email")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:tag"),e.xp6(1),e.Q6J("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(n&&a))}}function Ji(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function Ni(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Qi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function wi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function Di(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function Ei(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function Li(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function Yi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo n\xfameros. "),e.qZA())}function Mi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function Bi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de contrataci\xf3n es obligatoria. "),e.qZA())}function Si(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un tipo de contrato. "),e.qZA())}function Ri(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El tiempo del contrato debe poseer solo n\xfameros. "),e.qZA())}function Oi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij("",t.name," ")}}function Pi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un departamento "),e.qZA())}function $i(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name,"")}}function ji(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el cargo "),e.qZA())}function Gi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function zi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el nivel de escolaridad. "),e.qZA())}function Hi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function Ki(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar la frecuencia en el que efectuar\xe1 el pago "),e.qZA())}function Vi(o,r){if(1&o&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij("",t," ")}}function Wi(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un modo pago "),e.qZA())}function Xi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteEmployee())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const Oe=function(o){return{"cursor-not-allowed":o}};function ec(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateEmployee())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.employeeForm.invalid)("matTooltip","Salvar")("disabled",t.employeeForm.invalid)("ngClass",e.VKq(5,Oe,t.employeeForm.invalid))}}function tc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createEmployee())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.employeeForm.invalid)("matTooltip","Salvar")("disabled",t.employeeForm.invalid)("ngClass",e.VKq(5,Oe,t.employeeForm.invalid))}}function oc(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,Ka,2,1,"ng-container",1),e.TgZ(3,"div",3)(4,"button",4),e._UZ(5,"mat-icon",5),e.qZA()()(),e.TgZ(6,"div",23)(7,"div",7)(8,"form",24)(9,"div",25)(10,"div",26),e._UZ(11,"div",27),e.TgZ(12,"div",28),e.YNc(13,Va,5,3,"div",1),e.YNc(14,Wa,3,1,"div",1),e.qZA(),e.YNc(15,Xa,1,1,"img",10),e.YNc(16,ei,2,1,"div",11),e.qZA()(),e.TgZ(17,"span",29),e._uU(18,"Informaci\xf3n General"),e.qZA(),e.TgZ(19,"div",30)(20,"div",31)(21,"mat-form-field",32)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",33),e.YNc(25,ti,2,0,"mat-error",1),e.YNc(26,oi,2,0,"mat-error",1),e.YNc(27,ni,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",31)(29,"mat-form-field",32)(30,"mat-label"),e._uU(31,"Primer Apellido"),e.qZA(),e._UZ(32,"input",34),e.YNc(33,ri,2,0,"mat-error",1),e.YNc(34,ai,2,0,"mat-error",1),e.YNc(35,ii,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",31)(37,"mat-form-field",32)(38,"mat-label"),e._uU(39,"Segundo Apellido"),e.qZA(),e._UZ(40,"input",34),e.YNc(41,ci,2,0,"mat-error",1),e.YNc(42,si,2,0,"mat-error",1),e.YNc(43,li,2,0,"mat-error",1),e.qZA()(),e.TgZ(44,"div",31)(45,"mat-form-field",32)(46,"mat-label"),e._uU(47,"G\xe9nero"),e.qZA(),e.TgZ(48,"mat-select",35)(49,"mat-option",36),e._uU(50,"Maculino"),e.qZA(),e.TgZ(51,"mat-option",37),e._uU(52,"Femenino"),e.qZA()(),e.YNc(53,mi,2,0,"mat-error",1),e.qZA()(),e.TgZ(54,"div",31)(55,"mat-form-field",32)(56,"mat-label"),e._uU(57,"N\xfamero de identidad"),e.qZA(),e._UZ(58,"mat-icon",38)(59,"input",39),e.YNc(60,_i,2,0,"mat-error",1),e.YNc(61,ui,2,0,"mat-error",1),e.YNc(62,pi,2,0,"mat-error",1),e.qZA()(),e.TgZ(63,"div",31)(64,"mat-form-field",32)(65,"mat-label"),e._uU(66,"Negocio"),e.qZA(),e.TgZ(67,"mat-select",35),e.YNc(68,gi,2,2,"mat-option",40),e.ALo(69,"async"),e.qZA(),e.YNc(70,di,2,0,"mat-error",1),e.TgZ(71,"mat-hint"),e._uU(72,"Negocio al cual pertenece el empleado"),e.qZA()()(),e.TgZ(73,"div",41)(74,"span",42),e._uU(75,"Estado"),e.qZA(),e.TgZ(76,"mat-slide-toggle",43),e._uU(77," Activo "),e.qZA()()(),e.TgZ(78,"span",29),e._uU(79,"Informaci\xf3n de contacto"),e.qZA(),e.TgZ(80,"div",44)(81,"div",45)(82,"div",46),e.YNc(83,yi,28,26,"ng-container",47),e.qZA(),e.TgZ(84,"div",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addPhoneNumberField())}),e._UZ(85,"mat-icon",14),e.TgZ(86,"span",49),e._uU(87,"Agregar tel\xe9fono"),e.qZA()()(),e.TgZ(88,"div",45)(89,"div",46),e.YNc(90,Ui,13,13,"ng-container",47),e.qZA(),e.TgZ(91,"div",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addEmailField())}),e._UZ(92,"mat-icon",14),e.TgZ(93,"span",49),e._uU(94,"Agregar correo electr\xf3nico"),e.qZA()()()(),e.TgZ(95,"span",29),e._uU(96,"Domicilio"),e.qZA(),e.TgZ(97,"div",50)(98,"div",31)(99,"mat-form-field",32)(100,"mat-label"),e._uU(101,"Direcci\xf3n"),e.qZA(),e._UZ(102,"mat-icon",38)(103,"input",51),e.YNc(104,Ji,2,0,"mat-error",1),e.YNc(105,Ni,2,0,"mat-error",1),e.qZA()(),e.TgZ(106,"div",31)(107,"mat-form-field",32)(108,"mat-label"),e._uU(109,"Provincia"),e.qZA(),e.TgZ(110,"mat-select",35),e.YNc(111,Qi,2,2,"mat-option",40),e.qZA(),e._UZ(112,"mat-icon",52),e.YNc(113,wi,2,0,"mat-error",1),e.qZA()(),e.TgZ(114,"div",31)(115,"mat-form-field",32)(116,"mat-label"),e._uU(117,"Municipio"),e.qZA(),e.TgZ(118,"mat-select",35),e.YNc(119,Di,2,2,"mat-option",40),e.qZA(),e._UZ(120,"mat-icon",52),e.YNc(121,Ei,2,0,"mat-error",1),e.qZA()(),e.TgZ(122,"div",31)(123,"mat-form-field",32)(124,"mat-label"),e._uU(125,"Pa\xeds"),e.qZA(),e.TgZ(126,"mat-select",35)(127,"mat-option",53),e._uU(128,"Cuba"),e.qZA()(),e._UZ(129,"mat-icon",52),e.YNc(130,Li,2,0,"mat-error",1),e.qZA()(),e.TgZ(131,"div",31)(132,"mat-form-field",54)(133,"mat-label"),e._uU(134,"C\xf3digo Postal"),e.qZA(),e._UZ(135,"input",55),e.YNc(136,Yi,2,0,"mat-error",1),e.YNc(137,Mi,2,0,"mat-error",1),e.qZA()()(),e.TgZ(138,"span",29),e._uU(139,"Datos de incorporaci\xf3n"),e.qZA(),e.TgZ(140,"div",50)(141,"div",31)(142,"mat-form-field",32)(143,"mat-label"),e._uU(144,"Fecha de contrataci\xf3n"),e.qZA(),e._UZ(145,"mat-datepicker-toggle",56)(146,"mat-datepicker",null,57)(148,"input",58),e.YNc(149,Bi,2,0,"mat-error",1),e.qZA()(),e.TgZ(150,"div",31)(151,"mat-form-field",32)(152,"mat-label"),e._uU(153,"Tipo de contrato"),e.qZA(),e.TgZ(154,"mat-select",35)(155,"mat-option",59),e._uU(156,"Determinado"),e.qZA(),e.TgZ(157,"mat-option",60),e._uU(158,"Indeterminado"),e.qZA()(),e.YNc(159,Si,2,0,"mat-error",1),e.qZA()(),e.TgZ(160,"div",31)(161,"mat-form-field",32)(162,"mat-label"),e._uU(163,"Fecha de cierre del contrato"),e.qZA(),e._UZ(164,"mat-datepicker-toggle",56)(165,"mat-datepicker",null,61)(167,"input",62),e.qZA()(),e.TgZ(168,"div",31)(169,"mat-form-field",32)(170,"mat-label"),e._uU(171,"Tiempo del contrato"),e.qZA(),e._UZ(172,"mat-icon",38)(173,"input",63),e.YNc(174,Ri,2,0,"mat-error",1),e.qZA()()(),e.TgZ(175,"span",29),e._uU(176,"Departamento, cargo y escolaridad"),e.qZA(),e.TgZ(177,"div",50)(178,"div",31)(179,"mat-form-field",32)(180,"mat-label"),e._uU(181,"Departamento"),e.qZA(),e.TgZ(182,"mat-select",35),e.YNc(183,Oi,2,2,"mat-option",64),e.ALo(184,"async"),e.qZA(),e.YNc(185,Pi,2,0,"mat-error",1),e.qZA()(),e.TgZ(186,"div",31)(187,"mat-form-field",32)(188,"mat-label"),e._uU(189,"Cargo"),e.qZA(),e.TgZ(190,"mat-select",35),e.YNc(191,$i,2,2,"mat-option",64),e.ALo(192,"async"),e.qZA(),e.YNc(193,ji,2,0,"mat-error",1),e.qZA()(),e.TgZ(194,"div",31)(195,"mat-form-field",32)(196,"mat-label"),e._uU(197,"Escolaridad"),e.qZA(),e.TgZ(198,"mat-select",35),e.YNc(199,Gi,2,2,"mat-option",64),e.ALo(200,"async"),e.qZA(),e.YNc(201,zi,2,0,"mat-error",1),e.qZA()()(),e.TgZ(202,"span",29),e._uU(203,"Salario"),e.qZA(),e.TgZ(204,"div",50)(205,"div",31)(206,"mat-form-field",32)(207,"mat-label"),e._uU(208,"Frecuencia"),e.qZA(),e.TgZ(209,"mat-select",35),e.YNc(210,Hi,2,2,"mat-option",64),e.ALo(211,"async"),e.qZA(),e.YNc(212,Ki,2,0,"mat-error",1),e.qZA()(),e.TgZ(213,"div",31)(214,"mat-form-field",32)(215,"mat-label"),e._uU(216,"Modo de pago"),e.qZA(),e.TgZ(217,"mat-select",35),e.YNc(218,Vi,2,2,"mat-option",64),e.ALo(219,"async"),e.qZA(),e.YNc(220,Wi,2,0,"mat-error",1),e.qZA()()(),e.TgZ(221,"div",65),e.YNc(222,Xi,2,2,"button",66),e.TgZ(223,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(224," Cancelar "),e.qZA(),e.YNc(225,ec,2,7,"button",68),e.YNc(226,tc,2,7,"button",68),e.qZA()()()(),e.BQk()}if(2&o){const t=e.MAs(147),n=e.MAs(166),a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.employee&&a.employee.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(124,Se)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",a.employeeForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",a.employee&&!a.employee.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("maxlength")||a.employeeForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname1")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("maxlength")||a.employeeForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname1").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname2")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("maxlength")||a.employeeForm.get("lastname2").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("lastname2").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","gender"),e.xp6(5),e.Q6J("ngIf",a.employeeForm.get("gender").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:identification"),e.xp6(1),e.Q6J("type","text")("formControlName","idNumber")("maxlength",11)("minlength",11),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("maxlength")||a.employeeForm.get("idNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("idNumber").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","merchantId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(69,112,a.merchants$))("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("merchantId").hasError("required")),e.xp6(6),e.Q6J("color","primary")("formControlName","active"),e.xp6(7),e.Q6J("ngForOf",a.employeeForm.get("phoneNumbers").controls)("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("ngForOf",a.employeeForm.get("emails").controls)("ngForTrackBy",a.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(10),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(1),e.Q6J("type","text")("formControlName","address")("minLength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("address").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("address").hasError("maxlength")||a.employeeForm.get("address").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",a.states)("ngForTrackBy",a.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("state").hasError("required")),e.xp6(5),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",a.cities)("ngForTrackBy",a.trackByFn),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("city").hasError("required")),e.xp6(5),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:globe"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("country").hasError("required")),e.xp6(5),e.Q6J("formControlName","postalCode")("max",99999),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("postalCode").hasError("onlyNumber")),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("postalCode").hasError("min")||a.employeeForm.get("postalCode").hasError("max")),e.xp6(8),e.Q6J("for",t),e.xp6(3),e.Q6J("matDatepicker",t)("formControlName","dateOfJoining")("placeholder","Seleccione la fecha"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("dateOfJoining").hasError("required")),e.xp6(5),e.Q6J("formControlName","typeOfContract"),e.xp6(5),e.Q6J("ngIf",a.employeeForm.get("typeOfContract").hasError("required")),e.xp6(5),e.Q6J("for",n),e.xp6(3),e.Q6J("matDatepicker",n)("formControlName","contractEndDate")("placeholder","Seleccione la fecha"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:clock"),e.xp6(1),e.Q6J("type","text")("formControlName","contractTime"),e.xp6(1),e.Q6J("ngIf",a.employeeForm.get("contractTime").hasError("pattern")),e.xp6(8),e.Q6J("formControlName","department"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(184,114,a.departments$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("department").hasError("required")),e.xp6(5),e.Q6J("formControlName","charge"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(192,116,a.charges$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("charge").hasError("required")),e.xp6(5),e.Q6J("formControlName","scholarship"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(200,118,a.scholarships$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("scholarship").hasError("required")),e.xp6(8),e.Q6J("formControlName","salaryFreq"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(211,120,a.salaryFreqs$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("salaryFreq").hasError("required")),e.xp6(5),e.Q6J("formControlName","salaryMethod"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(219,122,a.salaryMethods$)),e.xp6(2),e.Q6J("ngIf",a.employeeForm.get("salaryMethod").hasError("required")),e.xp6(2),e.Q6J("ngIf","add"!==a.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===a.actionMode),e.xp6(1),e.Q6J("ngIf","add"===a.actionMode)}}let nc=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T,K,is,cs){this._activatedRoute=t,this._changeDetectorRef=n,this._employeesService=a,this._hrmService=c,this._locationService=s,this._formBuilder=g,this._fuseConfirmationService=p,this._router=x,this._snackBar=Z,this._imagesService=T,this._departmentService=K,this._chargeService=is,this.store=cs,this.cities=[],this.user$=(0,Q.of)(null),this.merchants$=null,this.states=[],this.statesCodes=[],this._unsubscribeAll=new y.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.employee$=this.store.select(Ae.hf),this.employee$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.employee=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(V.UV),this.charges$=this._chargeService.getActiveCharges().pipe((0,E.U)(t=>t.dataArr)),this.departments$=this._departmentService.getActiveDepartments().pipe((0,E.U)(t=>t.dataArr)),this.salaryFreqs$=this._hrmService.getSalaryFrequency(),this.salaryMethods$=this._hrmService.getSalaryMethods(),this.scholarships$=this._hrmService.getScholarship(),this._locationService.states$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.statesCodes=t,this._changeDetectorRef.markForCheck()}),this.employeeForm=this._formBuilder.group({_id:[""],userId:[this.user._id,[i.kI.required]],merchantId:["",[i.kI.required]],active:[!0],code:[{value:"",disabled:!0}],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],slug:[""],lastname1:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastname2:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],gender:["",[i.kI.required]],idNumber:["",[i.kI.maxLength(11),i.kI.minLength(11),u.L.onlyNumbersPattern()]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),address:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],country:[{value:"Cuba",disabled:!0},[i.kI.required]],state:["",[i.kI.required]],city:["",[i.kI.required]],postalCode:["",[i.kI.max(99999)]],dateOfJoining:["",[i.kI.required]],typeOfContract:["",[i.kI.required]],contractEndDate:[""],contractTime:[0,[u.L.onlyNumbersPattern()]],department:["",[i.kI.required]],charge:["",[i.kI.required]],scholarship:["",[i.kI.required]],salaryFreq:["",[i.kI.required]],salaryMethod:["",[i.kI.required]],salaryLevel:[""],imageUrl:[""]}),this.employeeForm.get("state").valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({id:t})=>{this.employeeForm.reset(),this.employeeForm.get("country").setValue("Cuba"),this.employeeForm.get("userId").setValue(this.user._id),this.employeeForm.get("active").setValue(!1),this.employeeForm.get("postalCode").setValue(0),this.employeeForm.get("contractTime").setValue(0),this.actionMode="new"===t?"add":"view",this.fillForm("view"===this.actionMode?"edit":this.actionMode),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const t=this._formBuilder.group({email:["",[i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.employeeForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.employeeForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]});this.employeeForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.employeeForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createEmployee(){const t=`${(new Date).getDate()}${(new Date).getMonth()}${(new Date).getFullYear()}-${(new Date).getSeconds()}${(new Date).getMilliseconds()}`;this.employeeForm.get("code").setValue(t);let n=this.employeeForm.getRawValue();n=(0,w.omit)(n,"_id"),n.slug=new k.i(n.name).slug,this._fuseConfirmationService.open({title:"Crear empleado",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._employeesService.createEmployee(n).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigate(["../",s.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateEmployee(){const t=this.employeeForm.getRawValue();t.slug=new k.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar empleado",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._employeesService.updateEmployee(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.store.dispatch((0,ge.Y6)({employee:c.data})),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}deleteEmployee(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el empleado? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._employeesService.deleteEmployee(this.employee._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("Employee",a).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.employeeForm.get("imageUrl").setValue(c.imageUrl),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.employeeForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("Employee",t).subscribe(s=>{this.employeeForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}})})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.employee&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}trackByFn(t,n){return n.id||t}_getCitiesByState(t){this._locationService.getCitiesByState(t).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}fillForm(t){if("add"===t){const n=[];n.push(this._formBuilder.group({email:["",[i.kI.email,i.kI.maxLength(255)]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.employeeForm.get("emails").push(c)});const a=[];return a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),void a.forEach(c=>{this.employeeForm.get("phoneNumbers").push(c)})}this.employeeForm.get("emails").clear(),this.employeeForm.get("phoneNumbers").clear(),this._setEmployeeDataOnForm(this.employee),this._changeDetectorRef.markForCheck()}_setEmployeeDataOnForm(t){this.employeeForm.patchValue(t),this.employeeForm.get("charge").setValue(t.charge._id),this.employeeForm.get("department").setValue(t.department._id),this.employeeForm.get("merchantId").setValue(t.merchantId._id),this._getCitiesByState(t.state);const n=[];t.emails.length>0?t.emails.forEach(c=>{n.push(this._formBuilder.group({email:[c.email,[i.kI.email,i.kI.maxLength(255)]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):n.push(this._formBuilder.group({email:["",[i.kI.email]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),n.forEach(c=>{this.employeeForm.get("emails").push(c)});const a=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(c=>{a.push(this._formBuilder.group({stateCode:[c.stateCode,[i.kI.required]],phoneNumber:[c.phoneNumber,[i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:[c.label,[i.kI.minLength(3),i.kI.maxLength(255)]]}))}):a.push(this._formBuilder.group({stateCode:["+535",[i.kI.required]],phoneNumber:["",[i.kI.minLength(7),i.kI.maxLength(8),u.L.onlyNumbersPattern()]],label:["",[i.kI.minLength(3),i.kI.maxLength(255)]]})),a.forEach(c=>{this.employeeForm.get("phoneNumbers").push(c)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(_e.b),e.Y36(Oa.E),e.Y36(G.a),e.Y36(i.qu),e.Y36(S.R),e.Y36(h.F0),e.Y36(R.ux),e.Y36(j.C),e.Y36(Pa.U),e.Y36($a.U),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-employee-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["required","",3,"formControlName"],["value","Masculino"],["value","Femenino"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"type","formControlName","maxlength","minlength"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","sm:col-span-1"],[1,"items-start","font-medium"],[1,"mt-1",3,"color","formControlName"],[1,"grid","sm:grid-cols-2","gap-y-5","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],["matInput","","required","",3,"type","formControlName","minLength","maxlength"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","text","matInput","",3,"formControlName","max"],["matPrefix","",3,"for"],["joinDatepicker",""],["matInput","","required","",3,"matDatepicker","formControlName","placeholder"],["value","Determinado"],["value","Indeterminado"],["birthdayDatepicker",""],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matInput","",3,"type","formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-6","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-col","sm:flex-row"],["matInput","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ha,23,10,"ng-container",1),e.YNc(2,oc,227,125,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.employee&&n.employee.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode))},dependencies:[h.rH,U.lW,F.Mq,F.hl,F.nW,d.TO,d.KE,d.bx,d.hX,d.qo,I.Hw,J.Nt,C.wG,q.gD,q.$L,C.ey,Y.gM,_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.oH,i.sg,i.u,X.Rr,_.Ov,_.rS],encapsulation:2,changeDetection:0}),o})();var rc=l(2729),ac=l(1349);function ic(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",22),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.user.merchantId.coverUrl,e.LSH)}}function cc(o,r){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw(2);e.Q6J("src",t.user.imageUrl,e.LSH)}}function sc(o,r){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.user.name.charAt(0)," ")}}const Pe=function(){return["../../"]};function lc(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,ic,2,1,"ng-container",1),e.TgZ(3,"div",4)(4,"button",5),e._UZ(5,"mat-icon",6),e.qZA()()(),e.TgZ(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e.YNc(10,cc,1,1,"img",11),e.YNc(11,sc,2,1,"div",12),e.qZA(),e.TgZ(12,"div",13)(13,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("edit"))}),e._UZ(14,"mat-icon",15),e.TgZ(15,"span",16),e._uU(16,"Editar"),e.qZA()(),e.TgZ(17,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("editPass"))}),e._UZ(18,"mat-icon",15),e.TgZ(19,"span",16),e._uU(20,"Editar Contrase\xf1a"),e.qZA()()()(),e.TgZ(21,"div",18),e._uU(22),e.qZA(),e.TgZ(23,"div",19)(24,"span",20),e._uU(25),e.qZA()(),e._UZ(26,"div",21),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.user.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(10,Pe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(5),e.Q6J("ngIf",t.user.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.user.imageUrl),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:pencil-alt"),e.xp6(4),e.Oqu(t.user.name),e.xp6(3),e.Oqu("Usuario")}}function mc(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"img",22),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.user.merchantId.coverUrl,e.LSH)}}function _c(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",52,53),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(2),c=e.oxw(2);return e.KtG(c.uploadImage(a.files))}),e.qZA(),e.TgZ(3,"label",54),e._UZ(4,"mat-icon",6),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function uc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeImage())}),e._UZ(2,"mat-icon",6),e.qZA()()}2&o&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function pc(o,r){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw(2);e.Q6J("src",t.user.imageUrl,e.LSH)}}function gc(o,r){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.user.name.charAt(0)," ")}}function dc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function hc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre debe contener entre 3 y 255 caracteres. "),e.qZA())}function fc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre no debe poseer n\xfameros. "),e.qZA())}function xc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos son obligatorios. "),e.qZA())}function Cc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos deben contener entre 3 y 255 caracteres. "),e.qZA())}function vc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," los apellidos no deben poseer n\xfameros. "),e.qZA())}function bc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo electr\xf3nico es obligatorio. "),e.qZA())}function Zc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El correo no posee un formato v\xe1lido. "),e.qZA())}function Tc(o,r){if(1&o&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function yc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un negocio. "),e.qZA())}function Ic(o,r){1&o&&(e.TgZ(0,"span",31),e._uU(1,"Contrase\xf1a"),e.qZA())}function kc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Ac(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Fc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria. "),e.qZA())}function qc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: ! " ? $ % ^ &. '),e.qZA())}function Uc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Jc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Nc(o,r){1&o&&(e.TgZ(0,"mat-error",64),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Qc(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("pwd2").getError("mustMatch")," ")}}function wc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"mat-form-field",34)(3,"mat-label"),e._uU(4,"Contrase\xf1a"),e.qZA(),e._UZ(5,"input",57,58),e.TgZ(7,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(6);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(8,kc,1,1,"mat-icon",60),e.YNc(9,Ac,1,1,"mat-icon",60),e.qZA(),e.YNc(10,Fc,2,0,"mat-error",1),e.YNc(11,qc,2,0,"mat-error",1),e.qZA()(),e.TgZ(12,"div",33)(13,"mat-form-field",34)(14,"mat-label"),e._uU(15,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(16,"input",61,62),e.TgZ(18,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(17);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(19,Uc,1,1,"mat-icon",60),e.YNc(20,Jc,1,1,"mat-icon",60),e.qZA(),e.YNc(21,Nc,2,0,"mat-error",63),e.YNc(22,Qc,2,1,"mat-error",1),e.qZA()()()}if(2&o){const t=e.MAs(6),n=e.MAs(17),a=e.oxw(2);e.xp6(5),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd").hasError("pattern")||a.userForm.get("pwd").hasError("minlength")),e.xp6(5),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userForm.get("pwd2").hasError("mustMatch"))}}function Dc(o,r){1&o&&(e.TgZ(0,"span",31),e._uU(1,"Roles"),e.qZA())}function Ec(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",70)(1,"div",71)(2,"mat-checkbox",72),e.NdJ("change",function(a){const c=e.CHM(t),s=c.$implicit,g=c.index,p=e.oxw(4);return e.KtG(p.manageRoles(s._id,a,g))}),e.qZA()(),e.TgZ(3,"div",73)(4,"span",74),e._uU(5),e.qZA(),e.TgZ(6,"span",75),e._uU(7),e.qZA()()()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw(4);e.xp6(2),e.Q6J("disabled",n!==a.selectedRoleIndex&&-1!==a.selectedRoleIndex)("color","primary")("checked",t.checked),e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," ")}}function Lc(o,r){if(1&o&&(e.TgZ(0,"div",66)(1,"div",67)(2,"div",68),e.YNc(3,Ec,8,5,"div",69),e.qZA()()()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.roles)}}function Yc(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Dc,2,0,"span",45),e.YNc(2,Lc,4,1,"div",65),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}function Mc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteUser())}),e._uU(1," Eliminar "),e.qZA()}2&o&&e.Q6J("color","warn")("matTooltip","Eliminar")}const de=function(o){return{"cursor-not-allowed":o}};function Bc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateUser())}),e._uU(1," Actualizar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.userForm.invalid)("matTooltip","Salvar")("disabled",t.userForm.invalid)("ngClass",e.VKq(5,de,t.userForm.invalid))}}function Sc(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createUser())}),e._uU(1," Guardar "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.userForm.invalid)("matTooltip","Salvar")("disabled",t.userForm.invalid)("ngClass",e.VKq(5,de,t.userForm.invalid))}}function Rc(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,mc,2,1,"ng-container",1),e.TgZ(3,"div",4)(4,"button",5),e._UZ(5,"mat-icon",6),e.qZA()()(),e.TgZ(6,"div",25)(7,"div",8)(8,"form",26)(9,"div",27)(10,"div",28),e._UZ(11,"div",29),e.TgZ(12,"div",30),e.YNc(13,_c,5,3,"div",1),e.YNc(14,uc,3,1,"div",1),e.qZA(),e.YNc(15,pc,1,1,"img",11),e.YNc(16,gc,2,1,"div",12),e.qZA()(),e.TgZ(17,"span",31),e._uU(18,"Informaci\xf3n General "),e.qZA(),e.TgZ(19,"div",32)(20,"div",33)(21,"mat-form-field",34)(22,"mat-label"),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",35),e.YNc(25,dc,2,0,"mat-error",1),e.YNc(26,hc,2,0,"mat-error",1),e.YNc(27,fc,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",33)(29,"mat-form-field",34)(30,"mat-label"),e._uU(31,"Apellidos"),e.qZA(),e._UZ(32,"input",36),e.YNc(33,xc,2,0,"mat-error",1),e.YNc(34,Cc,2,0,"mat-error",1),e.YNc(35,vc,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",33)(37,"mat-form-field",34)(38,"mat-label"),e._uU(39,"Correo electr\xf3nico"),e.qZA(),e._UZ(40,"input",37),e.YNc(41,bc,2,0,"mat-error",1),e.YNc(42,Zc,2,0,"mat-error",1),e.qZA()(),e.TgZ(43,"div",33)(44,"mat-form-field",34)(45,"mat-label"),e._uU(46,"Asignar negocio"),e.qZA(),e.TgZ(47,"mat-select",38)(48,"mat-option",39),e._uU(49,"Seleccione el negocio"),e.qZA(),e.YNc(50,Tc,2,2,"mat-option",40),e.ALo(51,"async"),e.qZA(),e.YNc(52,yc,2,0,"mat-error",1),e.qZA()(),e.TgZ(53,"div",41)(54,"div",42)(55,"span",43),e._uU(56,"Estado"),e.qZA(),e.TgZ(57,"mat-slide-toggle",44),e._uU(58),e.qZA()()()(),e.YNc(59,Ic,2,0,"span",45),e.YNc(60,wc,23,12,"div",46),e.YNc(61,Yc,3,2,"div",47),e.TgZ(62,"div",48),e.YNc(63,Mc,2,2,"button",49),e.TgZ(64,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(65," Cancelar "),e.qZA(),e.YNc(66,Bc,2,7,"button",51),e.YNc(67,Sc,2,7,"button",51),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.user&&t.user.merchantId.coverUrl),e.xp6(2),e.Q6J("matTooltip","Cerrar")("routerLink",e.DdM(46,Pe)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(3),e.Q6J("formGroup",t.userForm)("autocomplete","off"),e.xp6(5),e.Q6J("ngIf",!t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.userForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",t.user&&!t.user.imageUrl),e.xp6(8),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("maxlength")||t.userForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastName")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastName").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastName").hasError("maxlength")||t.userForm.get("lastName").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("lastName").hasError("pattern")),e.xp6(5),e.Q6J("type","email")("formControlName","email")("placeholder","Correo electr\xf3nico"),e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("email")),e.xp6(5),e.Q6J("formControlName","merchantId")("placeholder","Seleccione el negocio"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(51,44,t.merchants$)),e.xp6(2),e.Q6J("ngIf",t.userForm.get("merchantId").hasError("required")),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.userForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode),e.xp6(1),e.Q6J("ngxPermissionsOnly","Super Administrador"),e.xp6(2),e.Q6J("ngIf","add"!==t.actionMode),e.xp6(1),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("ngIf","edit"===t.actionMode),e.xp6(1),e.Q6J("ngIf","add"===t.actionMode)}}function Oc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function Pc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function $c(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function jc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,' La contrase\xf1a deber\xe1 tener entre 8 y 20 caracteres e incluir may\xfasculas, min\xfasculas n\xfameros y s\xedmbolos como: !" ? $ % ^ &. '),e.qZA())}function Gc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye")}function zc(o,r){1&o&&e._UZ(0,"mat-icon",15),2&o&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function Hc(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La contrase\xf1a es obligatoria "),e.qZA())}function Kc(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userPasswordForm.get("pwd2").getError("mustMatch")," ")}}function Vc(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",78)(2,"div",79)(3,"h1"),e._uU(4,"Actualizar contrase\xf1a"),e.qZA()(),e.TgZ(5,"div",80)(6,"mat-form-field",34)(7,"mat-label"),e._uU(8,"Contrase\xf1a"),e.qZA(),e._UZ(9,"input",81,82),e.TgZ(11,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(10);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(12,Oc,1,1,"mat-icon",60),e.YNc(13,Pc,1,1,"mat-icon",60),e.qZA(),e.YNc(14,$c,2,0,"mat-error",1),e.YNc(15,jc,2,0,"mat-error",1),e.qZA(),e.TgZ(16,"mat-form-field",34)(17,"mat-label"),e._uU(18,"Confirmar contrase\xf1a "),e.qZA(),e._UZ(19,"input",61,83),e.TgZ(21,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(20);return e.KtG(a.type="password"===a.type?"text":"password")}),e.YNc(22,Gc,1,1,"mat-icon",60),e.YNc(23,zc,1,1,"mat-icon",60),e.qZA(),e.YNc(24,Hc,2,0,"mat-error",1),e.YNc(25,Kc,2,1,"mat-error",1),e.qZA()(),e.TgZ(26,"div",48)(27,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleEditMode("view"))}),e._uU(28," Cancelar "),e.qZA(),e.TgZ(29,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateUserPassword())}),e._uU(30," Actualizar "),e.qZA()()(),e.BQk()}if(2&o){const t=e.MAs(10),n=e.MAs(20),a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.userPasswordForm)("autocomplete","off"),e.xp6(8),e.Q6J("formControlName","pwd")("minlength",8)("maxlength",20),e.xp6(3),e.Q6J("ngIf","password"===t.type),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd").hasError("pattern")||a.userPasswordForm.get("pwd").hasError("minlength")),e.xp6(4),e.Q6J("formControlName","pwd2"),e.xp6(3),e.Q6J("ngIf","password"===n.type),e.xp6(1),e.Q6J("ngIf","text"===n.type),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd2").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.userPasswordForm.get("pwd2").hasError("mustMatch")),e.xp6(2),e.Q6J("matTooltip","Cancelar"),e.xp6(2),e.Q6J("color","primary")("disabled",a.userPasswordForm.invalid)("matTooltip","Actualizar Contrase\xf1a")("disabled",a.userPasswordForm.invalid)("ngClass",e.VKq(20,de,a.userPasswordForm.invalid))}}let Wc=(()=>{class o{constructor(t,n,a,c,s,g,p,x,Z,T){this._activatedRoute=t,this._changeDetectorRef=n,this._usersService=a,this._formBuilder=c,this._fuseConfirmationService=s,this._router=g,this._snackBar=p,this._imagesService=x,this._rolesService=Z,this.store=T,this.cities=[],this.selectedRoleIndex=-1,this.roles=[],this._unsubscribeAll=new y.x}ngOnInit(){this.store.select(M.rk).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.authUser=t,this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(Fe.dy),this.user$.subscribe(t=>{this.user=t,this.actionMode="view",this._changeDetectorRef.markForCheck()}),this.merchants$=this.store.select(V.UV),this.userForm=this._formBuilder.group({_id:[null],active:[!0],userId:[this.authUser._id,[i.kI.required]],merchantId:["",[i.kI.required]],name:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],lastName:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255),u.L.onlyAlphabetsWithAccentPattern()]],email:[null,[i.kI.email,i.kI.required]],pwd:["",[i.kI.minLength(8),i.kI.maxLength(20),u.L.strongPasWordPattern()]],pwd2:[""],role:[null],imageUrl:[""]},{validators:u.L.mustMatch("pwd","pwd2")}),this.store.select(rc.g).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{if("Due\xf1o"===this.authUser.role.name){const n=t.find(a=>"Ejecutivo"===a.name);n&&this.userForm.get("role").setValue(n._id)}}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({id:t})=>{"new"!==t&&(this.userPasswordForm=this._formBuilder.group({userId:[this.user._id,[i.kI.required]],pwd:[null,[i.kI.required,i.kI.minLength(8),i.kI.maxLength(20),u.L.strongPasWordPattern()]],pwd2:[null,[i.kI.required]]},{validators:u.L.mustMatch("pwd","pwd2")}),this.userPasswordForm.reset(),this.userPasswordForm.get("userId").setValue(this.user._id)),this.userForm.reset(),"Super Administrador"===this.authUser.role.name&&this.userForm.get("role").setValidators([i.kI.required]),this.userForm.get("userId").setValue(this.authUser._id),this.actionMode="new"===t?"add":"view",this.userForm.patchValue(this.user),this._changeDetectorRef.markForCheck()}),"add"===this.actionMode&&this._rolesService.getRoles().pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.roles=t.roles,this._changeDetectorRef.markForCheck()}),"add"===this.actionMode?(this.userForm.get("pwd").setValidators([i.kI.required]),this.userForm.get("pwd2").setValidators([i.kI.required])):(this.userForm.get("pwd").removeValidators([i.kI.required]),this.userForm.get("pwd").removeValidators([i.kI.required]))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUser(){let t=this.userForm.getRawValue();t.username=t.email.split("@",2)[0]+Date.now(),t=(0,w.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._usersService.createUser(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.data.name} ${c.data.lastName} creado correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._router.navigate(["../",c.data._id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateUser(){let t=this.userForm.getRawValue();t=(0,w.omit)(t,["pwd, pwd2"]),this._fuseConfirmationService.open({title:"Actualizar datos del usuario",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._usersService.update(t).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Usuario ${c.data.name} ${c.data.lastName} actualizado correctamente`,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.store.dispatch((0,pe.av)({user:c.data})),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}deleteUser(){this._fuseConfirmationService.open({title:"Eliminar Cargo",message:"\xbfEsta seguro que desea Eliminar el usero? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._usersService.deleteUser(this.user._id).subscribe(a=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",appearance:"fill",type:"success"}}),this._router.navigate(["../../"],{relativeTo:this._activatedRoute})})})}uploadImage(t){if(!t.length)return;const a=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(a.type)||this._imagesService.uploadImage("User",a).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.userForm.get("imageUrl").setValue(c.imageUrl),this._changeDetectorRef.markForCheck()},c=>{console.warn(c)})}removeImage(){const t=this.userForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._imagesService.removeImage("User",t).subscribe(s=>{this.userForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}})})})}toggleEditMode(t){this.actionMode=t,this._changeDetectorRef.markForCheck(),"view"===t&&!this.user&&this._router.navigate(["../../"],{relativeTo:this._activatedRoute})}updateUserPassword(){let t=this.userPasswordForm.getRawValue();t=(0,w.omit)(t,"pwd2"),this._fuseConfirmationService.open({title:"Actualizar contrase\xf1a",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._usersService.resetUserPassword({userId:t.userId,newPwd:t.pwd}).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}manageRoles(t,n,a){this.selectedRoleIndex=a,n.checked?(this.userForm.get("role").setValue(t),this._changeDetectorRef.markForCheck()):(this.selectedRoleIndex=-1,this.userForm.get("role").setValue(""),this._changeDetectorRef.markForCheck())}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(ue.K),e.Y36(i.qu),e.Y36(S.R),e.Y36(h.F0),e.Y36(R.ux),e.Y36(j.C),e.Y36(ac.N),e.Y36(v.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-user-details"]],decls:5,vars:3,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"h-full","w-full","px-6","sm:px-12"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",1,"bg-gray-300","bg-opacity-50","hover:bg-gray-400",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","flex-wrap","justify-around","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"sm:ml-2",3,"click"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"w-20","flex","items-center","justify-center","py-1","mt-2","mb-8","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup","autocomplete"],[1,"flex","flex-auto","items-end","-mt-16","mb-8"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],[1,"text-gray-400"],[1,"grid","sm:grid-cols-2","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","placeholder","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matInput","","required","",3,"type","formControlName","placeholder"],[3,"formControlName","placeholder"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","sm:col-span-2"],[1,"flex","flex-col","w-1/4"],[1,"items-start","font-medium"],[3,"formControlName","color"],["class","text-gray-400",4,"ngIf"],["class","grid sm:grid-cols-2 gap-y-3  gap-x-4 border-t-2 sm:col-span-2 pt-8 pb-8 pl-4 pr-4",4,"ngIf"],[4,"ngxPermissionsOnly"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["class","ml-2","mat-flat-button","",3,"color","disabled","matTooltip","ngClass","click",4,"ngIf"],["id","imageUrl-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageUrlFileInput",""],["for","imageUrl-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[3,"value"],["type","password","matInput","","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordField1",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["type","password","matInput","","placeholder","Repita la contrase\xf1a","required","",3,"formControlName"],["passwordField2",""],["class","pb-5",4,"ngIf"],[1,"pb-5"],["class","grid sm:grid-cols-1 gap-y-3  gap-x-4 border-t-2 sm:col-span-2 pt-8 pb-4 pl-4 pr-4",4,"ngIf"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-4","pl-4","pr-4"],[1,"flex","flex-col","mb-10"],[1,"w-full","flex","flex-wrap","gap-4","sm:grid","sm:grid-cols-2"],["class","w-full sm:w-auto rounded-sm border border-dashed border-primary-700 p-3 ",4,"ngFor","ngForOf"],[1,"w-full","sm:w-auto","rounded-sm","border","border-dashed","border-primary-700","p-3"],[1,"h-6"],[3,"disabled","color","checked","change"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-md","text-hint"],["mat-button","",3,"color","matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","ngClass","click"],[1,"h-full","w-full","flex","flex-col","justify-between","min-h-160",3,"formGroup","autocomplete"],[1,"mt-20","font-medium","text-2xl","text-center"],[1,"grid","sm:grid-cols-1","gap-y-3","gap-x-4","border-t-2","sm:col-span-2","pt-8","pb-8","pl-4","pr-4"],["id","pwd","matInput","","type","password","placeholder","Contrase\xf1a","required","",3,"formControlName","minlength","maxlength"],["passwordUpdateField1",""],["passwordUpdateField2",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,lc,27,11,"ng-container",1),e.YNc(2,Rc,68,47,"ng-container",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Vc,31,22,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","view"===n.actionMode&&n.user&&n.user.merchantId),e.xp6(1),e.Q6J("ngIf","add"===n.actionMode||"edit"===n.actionMode),e.xp6(2),e.Q6J("ngIf","editPass"===n.actionMode))},dependencies:[h.rH,U.lW,Ie.oG,d.TO,d.KE,d.hX,d.R9,I.Hw,J.Nt,C.wG,q.gD,C.ey,Y.gM,_.mk,_.sg,_.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.sg,i.u,X.Rr,se.gE,_.Ov],encapsulation:2,changeDetection:0}),o})();function Xc(o,r){1&o&&(e.ynx(0),e._UZ(1,"contact-details",2),e.BQk())}function es(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-customer-details",2),e.BQk())}function ts(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-employee-details",2),e.BQk())}function os(o,r){1&o&&(e.ynx(0),e._UZ(1,"contacts-user-details",2),e.BQk())}const ns=[{path:"contacts",component:io,children:[{path:"",component:Ne,resolve:{contacts:mo},children:[{path:":entity/:id",component:(()=>{class o{constructor(t,n,a){this._activatedRoute=t,this._changeDetectorRef=n,this._contactsListComponent=a,this._unsubscribeAll=new y.x}ngOnInit(){this._contactsListComponent.matDrawer.open(),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({entity:t})=>{this.selectedEntity=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._contactsListComponent.matDrawer.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(Ne))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contacts-details"]],decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"w-full","h-full"]],template:function(t,n){1&t&&(e.ynx(0,0),e.YNc(1,Xc,2,0,"ng-container",1),e.YNc(2,es,2,0,"ng-container",1),e.YNc(3,ts,2,0,"ng-container",1),e.YNc(4,os,2,0,"ng-container",1),e.BQk()),2&t&&(e.Q6J("ngSwitch",n.selectedEntity),e.xp6(1),e.Q6J("ngSwitchCase","contact"),e.xp6(1),e.Q6J("ngSwitchCase","customer"),e.xp6(1),e.Q6J("ngSwitchCase","employee"),e.xp6(1),e.Q6J("ngSwitchCase","user"))},dependencies:[_.RF,_.n9,pr,Ra,nc,Wc],encapsulation:2,changeDetection:0}),o})(),resolve:{contact:_o},canDeactivate:[co]}]}]}];let rs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:C.sG,useValue:{parse:{dateInput:me.ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[h.Bz.forChild(ns),U.ot,Ie.p9,F.FA,Gt.t,d.lN,I.Ps,J.c,zt.Tx,to,oo.Cv,no.Fk,C.si,q.LD,oe.SJ,ro.p0,Y.AV,ao,fe.m,Je.Rq]}),o})(),as=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(jt),fe.m,rs]}),o})()}}]);