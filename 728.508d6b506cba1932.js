"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[728],{4062:(N,U,a)=>{a.d(U,{i:()=>h});class h{constructor(e){this.slug=this._slugGenerator(e)}_slugGenerator(e){return e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace("  "," ").replace(" ","-")}}},9784:(N,U,a)=>{a.d(U,{h:()=>v});var h=a(7261),_=a(5e3),e=a(9808),d=a(2494),g=a(5245);function l(p,f){if(1&p&&_._UZ(0,"mat-icon",3),2&p){const u=_.oxw();_.Q6J("svgIcon",u.svgIcon)}}let v=(()=>{class p{constructor(u){this.data=u,this.message="",this.title="",this.svgIcon="",this.type="success",this.appearance="fill",this.message=u.message,this.title=u.title,this.svgIcon=u.svgIcon,this.type=u.type,u.appearance&&(this.appearance=u.appearance)}}return p.\u0275fac=function(u){return new(u||p)(_.Y36(h.qD))},p.\u0275cmp=_.Xpm({type:p,selectors:[["ath-snackbar"]],decls:5,vars:5,consts:[[3,"type","appearance"],["class","icon-size-5","fuseAlertIcon","",3,"svgIcon",4,"ngIf"],["fuseAlertTitle",""],["fuseAlertIcon","",1,"icon-size-5",3,"svgIcon"]],template:function(u,x){1&u&&(_.TgZ(0,"fuse-alert",0),_.YNc(1,l,1,1,"mat-icon",1),_.TgZ(2,"span",2),_._uU(3),_.qZA(),_._uU(4),_.qZA()),2&u&&(_.Q6J("type",x.type)("appearance",x.appearance),_.xp6(1),_.Q6J("ngIf",x.svgIcon),_.xp6(2),_.Oqu(x.title),_.xp6(1),_.hij(" ",x.message,"\n"))},dependencies:[e.O5,d.W,g.Hw],styles:[".snack-alert-success[_ngcontent-%COMP%]{background-color:#39b54a!important;color:#fff}.snack-alert-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important;color:#fff}.snack-alert-error[_ngcontent-%COMP%]{background-color:#ff2828!important;color:#fff}"]}),p})()},2491:(N,U,a)=>{a.d(U,{L:()=>_});var h=a(3075);class _{static isEmptyInputValue(d){return null==d||0===d.length}static mustMatch(d,g){return l=>{const v=l.get(d),p=l.get(g);if(!v||!p||(p.hasError("mustMatch")&&(delete p.errors.mustMatch,p.updateValueAndValidity()),this.isEmptyInputValue(p.value)||v.value===p.value))return null;const f={mustMatch:"Las contrase\xf1a no coinciden."};return p.setErrors(f),f}}static strongPassWord(d,g,l,v,p){return f=>{const u=f.value;if(!u)return null;const x=!d||/[A-Z]+/.test(u),P=!g||/[a-z]+/.test(u),i=!l||/[0-9]+/.test(u),I=!v||!/^[a-zA-Z0-9]+$/.test(u);return x&&P&&i&&I&&u.length>=p?null:{password:"La contrase\xf1a no cumple con los est\xe1ndares de seguridad requeridos"}}}static onlyNumber(d){return g=>{const l=g.get(d);if(!l||!l.value||(l.hasError("onlyNumber")&&(delete l.errors.mustMatch,l.updateValueAndValidity()),/^[a-zA-Z0-9]+$/.test(l.value.toString())))return null;const p={onlyNumber:"Solo se admiten n\xfameros."};return l.setErrors(p),p}}static strongPasWordPattern(){return h.kI.pattern(/((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)}static emailPattern(){return h.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")}static onlyNumbersPattern(){return h.kI.pattern("^[0-9]*$")}static onlyAlphabetsWithAccentPattern(){return h.kI.pattern("^[a-zA-Z \xe1\xe9\xed\xf3\xfa\xf1\xfc]*$")}static onlyAlphabetsPattern(){return h.kI.pattern("^[a-zA-Z ]*$")}static validateIdNumber(){return d=>{if(!d)return null;let g=d.value;if(!g)return null;void 0!==d.value.idNumber&&(g=d.value.idNumber);const l=parseInt(g.substring(0,2),10),v=parseInt(g.substring(2,4),10)-1,p=parseInt(g.substring(4,6),10),f=new Date(l,v,p);if(f.getFullYear().toString().substring(2,4)===l.toString()&&f.getMonth()===v&&f.getDate()===p)return null;const x={validateIdNumber:"El n\xfamero de identidad introducido es incorrecto"};return d.setErrors(x),x}}static validFullName(d){return g=>{const l=g.get(d);if(!l||!d||(l.hasError("validFullName")&&(delete l.errors.validFullName,l.updateValueAndValidity()),this._isEmptyInputValue(l.value))||l.value.trim().split(" ").length>1)return null;const v={validFullName:"El nombre completo deber\xe1 tener al menos un nombre y un apellido"};return l.setErrors(v),v}}static _isEmptyInputValue(d){return null==d||0===d.length}}},5728:(N,U,a)=>{a.r(U),a.d(U,{CommercialModule:()=>ht});var h=a(5357),_=a(6338),e=a(5e3),d=a(520),g=a(8505),l=a(2114),v=a(5714),p=a(2340),f=a(5620);const u=p.N.API_URL;let x=(()=>{class o{constructor(t,r){this._httpClient=t,this.store=r}getUoms(t=0,r=10,c="name",m="asc",s=""){const A=(new d.LE).append("page",t.toString()).append("size",r.toString()).append("sort",c).append("order",m).append("search",s);return this._httpClient.get(`${u}/uoms/`,{params:A}).pipe((0,g.b)(S=>{this.store.dispatch((0,v.Jr)({pagination:S.pagination})),this.store.dispatch((0,l.u8)({uoms:S.dataArr}))}))}getUomById(t){return this._httpClient.get(`${u}/uoms/${t}`).pipe((0,g.b)(r=>{this.store.dispatch((0,l.sh)({uom:r.uom}))}))}createUom(t){return this._httpClient.post(`${u}/uoms/`,t).pipe((0,g.b)(r=>{this.store.dispatch((0,l.N9)({uom:r.data}))}))}updateUom(t){return this._httpClient.patch(`${u}/uoms/${t._id}`,t).pipe((0,g.b)(r=>{this.store.dispatch((0,l.zM)({uom:r.data}))}))}deleteUom(t){return this._httpClient.delete(`${u}/uoms/${t}`).pipe((0,g.b)(()=>{this.store.dispatch((0,l.X5)({id:t}))}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN),e.LFG(f.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),P=(()=>{class o{constructor(t){this._uomService=t}resolve(t,r){return this._uomService.getUoms()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(x))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var i=a(3075),I=a(6087),y=a(4847),k=a(7579),O=a(6451),b=a(2722),E=a(3900),M=a(4004),z=a(3844);class ne{}const $=o=>o.productServices,ie=((0,f.P1)($,o=>o.productService),(0,f.P1)($,o=>o.productServices));var Y=a(9784),V=a(6428),T=a(8966),R=a(9646),G=a(5119),j=a(4787),ae=a(1910),w=a(4062),ce=a(2491);const W=o=>o.uoms,K=((0,f.P1)(W,o=>o.uom),(0,f.P1)(W,o=>o.uoms));var J=a(1683),q=a(5057),se=a(1235);const Q=p.N.API_URL;let L=(()=>{class o{constructor(t,r,c){this._httpClient=t,this.rolesService=r,this.store=c}getProductServices(t=0,r=20,c="active",m="desc",s=""){const A=(new d.LE).append("page",t).append("size",r).append("sort",c).append("order",m).append("search",s);return this._httpClient.get(`${Q}/products-services/`,{params:A}).pipe((0,g.b)(S=>{this.store.dispatch((0,v.Jr)({pagination:S.pagination})),this.store.dispatch((0,q.C5)({productServices:S.dataArr}))}))}getActiveProductServices(){return this._httpClient.get(`${Q}/products-services/active`).pipe((0,g.b)(t=>{this.store.dispatch((0,q.C5)({productServices:t.dataArr}))}))}createProductService(t){return this._httpClient.post(`${Q}/products-services`,t).pipe((0,g.b)(r=>{this.store.dispatch((0,q.QI)({productService:r.data}))}))}updateProductService(t){return this._httpClient.patch(`${Q}/products-services/${t._id}`,t).pipe((0,g.b)(r=>{this.store.dispatch((0,q.pF)({productService:r.data}))}))}deleteProductService(t){return this._httpClient.delete(`${Q}/products-services/${t}`).pipe((0,g.b)(()=>{this.store.dispatch((0,q.dY)({id:t}))}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN),e.LFG(se.cM),e.LFG(f.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var H=a(7261),Z=a(9808),X=a(508),D=a(7423),F=a(5245),C=a(7322),B=a(7531),ee=a(4107),te=a(2368);function le(o,n){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar producto o servicio"),e.qZA())}function me(o,n){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Editar producto o servicio"),e.qZA())}function ue(o,n){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del producto o servicio"),e.qZA())}function de(o,n){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e.ynx(4),e.TgZ(5,"div",12)(6,"mat-label",13),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.BQk(),e.ynx(10),e.TgZ(11,"div",12)(12,"mat-label",13),e._uU(13,"Descripci\xf3n"),e.qZA(),e.TgZ(14,"div",14),e._uU(15),e.qZA()(),e.BQk(),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(9),e.Oqu(t.data.productService.name),e.xp6(6),e.Oqu(t.data.productService.description)}}function pe(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el tipo. "),e.qZA())}function ge(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio es obligatorio. "),e.qZA())}function _e(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio debe contener entre 3 y 255 caracteres. "),e.qZA())}function fe(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",21),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.abbr," ")}}function he(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El la unidad de medida es obligatoria. "),e.qZA())}function ve(o,n){if(1&o&&(e.TgZ(0,"mat-form-field",18)(1,"mat-label"),e._uU(2,"Unidad de Medida"),e.qZA(),e.TgZ(3,"mat-select",45),e.YNc(4,fe,3,2,"ng-container",46),e.qZA(),e.YNc(5,he,2,0,"mat-error",6),e.qZA()),2&o){const t=n.ngIf,r=e.oxw(2);e.xp6(3),e.Q6J("formControlName","uomId"),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",r.productServiceForm.get("uomId").hasError("required"))}}function xe(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la moneda. "),e.qZA())}function Ze(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del producto es obligatorio. "),e.qZA())}function be(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe de ser mayor que 0. "),e.qZA())}function Ce(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe contener solo n\xfameros. "),e.qZA())}function Ae(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El margen comercial del producto es obligatorio "),e.qZA())}function Se(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 1000 "),e.qZA())}function Ue(o,n){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo debe estar entre 0 y 1000"),e.qZA())}function ye(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El impuesto del producto es obligatorio "),e.qZA())}function Te(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 15 "),e.qZA())}function Ie(o,n){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor debe este campo de estar entre 0 y 15"),e.qZA())}function ke(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El descuento del producto es obligatorio "),e.qZA())}function qe(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 50 "),e.qZA())}function Qe(o,n){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 50"),e.qZA())}function Pe(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del producto es obligatorio "),e.qZA())}function we(o,n){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Tipo"),e.qZA(),e.TgZ(7,"mat-select",20)(8,"mat-option",21),e._uU(9," Producto "),e.qZA(),e.TgZ(10,"mat-option",21),e._uU(11," Servicio "),e.qZA()(),e.YNc(12,pe,2,0,"mat-error",6),e.TgZ(13,"mat-hint"),e._uU(14,"Especifique si es producto o servicio"),e.qZA()()(),e.TgZ(15,"div",18)(16,"mat-form-field",19)(17,"mat-label"),e._uU(18,"Nombre"),e.qZA(),e._UZ(19,"input",22),e.YNc(20,ge,2,0,"mat-error",6),e.YNc(21,_e,2,0,"mat-error",6),e.qZA()(),e.YNc(22,ve,6,3,"mat-form-field",23),e.ALo(23,"async"),e.TgZ(24,"div",18)(25,"mat-form-field",19)(26,"mat-label"),e._uU(27,"Moneda por defecto"),e.qZA(),e.TgZ(28,"mat-select",20)(29,"mat-option",24),e._uU(30,"CUP"),e.qZA(),e.TgZ(31,"mat-option",25),e._uU(32,"MLC"),e.qZA(),e.TgZ(33,"mat-option",26),e._uU(34,"USD"),e.qZA(),e.TgZ(35,"mat-option",27),e._uU(36,"MXN"),e.qZA()(),e._UZ(37,"mat-icon",28),e.YNc(38,xe,2,0,"mat-error",6),e.qZA()(),e.TgZ(39,"mat-form-field",18)(40,"mat-label"),e._uU(41,"Costo"),e.qZA(),e.TgZ(42,"span",29),e._uU(43,"$"),e.qZA(),e._UZ(44,"input",30,31),e.YNc(46,Ze,2,0,"mat-error",6),e.YNc(47,be,2,0,"mat-error",6),e.YNc(48,Ce,2,0,"mat-error",6),e.qZA(),e.TgZ(49,"mat-form-field",18)(50,"mat-label"),e._uU(51,"Margen comercial"),e.qZA(),e.TgZ(52,"span",29),e._uU(53,"%"),e.qZA(),e._UZ(54,"input",32,33),e.YNc(56,Ae,2,0,"mat-error",6),e.YNc(57,Se,2,0,"mat-error",6),e.YNc(58,Ue,2,0,"mat-hint",6),e.qZA(),e.TgZ(59,"mat-form-field",18)(60,"mat-label"),e._uU(61,"Impuesto"),e.qZA(),e.TgZ(62,"span",29),e._uU(63,"%"),e.qZA(),e._UZ(64,"input",34,35),e.YNc(66,ye,2,0,"mat-error",6),e.YNc(67,Te,2,0,"mat-error",6),e.YNc(68,Ie,2,0,"mat-hint",6),e.qZA(),e.TgZ(69,"mat-form-field",18)(70,"mat-label"),e._uU(71,"Descuento"),e.qZA(),e.TgZ(72,"span",29),e._uU(73,"%"),e.qZA(),e._UZ(74,"input",36,37),e.YNc(76,ke,2,0,"mat-error",6),e.YNc(77,qe,2,0,"mat-error",6),e.YNc(78,Qe,2,0,"mat-hint",6),e.qZA(),e.TgZ(79,"mat-form-field",18)(80,"mat-label"),e._uU(81,"Precio"),e.qZA(),e.TgZ(82,"span",29),e._uU(83,"$"),e.qZA(),e._UZ(84,"input",38),e.YNc(85,Pe,2,0,"mat-error",6),e.qZA(),e.TgZ(86,"div",39)(87,"mat-label"),e._uU(88,"Estado"),e.qZA(),e.TgZ(89,"mat-slide-toggle",40),e._uU(90," Activo "),e.qZA()(),e.TgZ(91,"div",41)(92,"mat-form-field",42)(93,"mat-label"),e._uU(94,"Descripci\xf3n"),e.qZA(),e._UZ(95,"mat-icon",43)(96,"textarea",44),e.qZA()()()()()),2&o){const t=e.MAs(45),r=e.MAs(55),c=e.MAs(65),m=e.MAs(75),s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.productServiceForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","Producto"),e.xp6(2),e.Q6J("value","Servicio"),e.xp6(2),e.Q6J("ngIf",s.productServiceForm.get("type").hasError("required")),e.xp6(7),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del producto o servicio"),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("name").hasError("maxlength")||s.productServiceForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",e.lcZ(23,46,s.uoms$)),e.xp6(6),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("currency").hasError("required")),e.xp6(6),e.Q6J("formControlName","cost")("min",1)("placeholder","Costo del producto o servicio"),e.xp6(2),e.Q6J("ngIf",s.productServiceForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("cost").hasError("min")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("cost").hasError("pattern")),e.xp6(6),e.Q6J("formControlName","margin"),e.xp6(2),e.Q6J("ngIf",s.productServiceForm.get("margin").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("margin").hasError("min")||s.productServiceForm.get("margin").hasError("max")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("margin").valid),e.xp6(6),e.Q6J("formControlName","taxPercent"),e.xp6(2),e.Q6J("ngIf",s.productServiceForm.get("taxPercent").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("taxPercent").hasError("min")||s.productServiceForm.get("taxPercent").hasError("max")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("taxPercent").valid),e.xp6(6),e.Q6J("formControlName","discount"),e.xp6(2),e.Q6J("ngIf",s.productServiceForm.get("discount").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("discount").hasError("min")||s.productServiceForm.get("discount").hasError("max")),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("discount").valid),e.xp6(6),e.Q6J("formControlName","price")("value",c.value/100*t.value-m.value/100*t.value+r.value/100*t.value+ +t.value),e.xp6(1),e.Q6J("ngIf",s.productServiceForm.get("price").hasError("required")),e.xp6(4),e.Q6J("value",!0)("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3)}}const oe=function(o){return{"cursor-not-allowed":o}};function Je(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.updateProductService())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,oe,t.productServiceForm.invalid))}}function De(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.createProductService())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,oe,t.productServiceForm.invalid))}}function Fe(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e.ynx(2),e.TgZ(3,"button",48),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Je,3,6,"ng-container",6),e.YNc(6,De,3,6,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ne=(()=>{class o{constructor(t,r,c,m,s,A,S,vt){this.data=t,this._activatedRoute=r,this._changeDetectorRef=c,this._formBuilder=m,this._fuseConfirmationService=s,this._hrmProductServicesService=A,this._snackBar=S,this.store=vt,this.dialogMode="view",this.user$=(0,R.of)(null),this.uoms$=null,this._unsubscribeAll=new k.x}ngOnInit(){this.user$=this.store.select(j.rk),this.user$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.uoms$=this.store.select(K),this.store.select(ae.Qs).pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.currentMerchant=t}),this.productServiceForm=this._formBuilder.group({_id:[""],active:[!0],uomId:["",[i.kI.required]],merchantId:[this.currentMerchant._id,[i.kI.required]],userId:[this.user._id,[i.kI.required]],type:["",[i.kI.required]],currency:[{value:"CUP",disabled:!0},[i.kI.required]],cost:[0,[i.kI.required,i.kI.min(1),ce.L.onlyNumbersPattern()]],margin:[0,[i.kI.min(0),i.kI.max(1e3)]],taxPercent:[0,[i.kI.min(0),i.kI.max(15)]],discount:[0,[i.kI.min(0),i.kI.max(50)]],price:[{disabled:!0,value:0},[i.kI.required,i.kI.min(0),i.kI.max(999999999),i.kI.maxLength(9)]],name:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],slug:[""],description:["",[i.kI.maxLength(1e3)]]}),"edit"===this.data.dialogMode&&(this.productServiceForm.patchValue(this.data.productService),this.productServiceForm.get("merchantId").setValue(this.data.productService.merchantId._id),void 0!==this.data.productService.uomId&&this.productServiceForm.get("uomId").setValue(this.data.productService.uomId._id))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){let t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t=(0,G.Z)(t,"_id"),t.slug=new w.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._hrmProductServicesService.createProductService(t).subscribe(m=>{this._snackBar.openFromComponent(Y.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateProductService(){const t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t.slug=new w.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._hrmProductServicesService.updateProductService(t).subscribe(m=>{this._snackBar.openFromComponent(Y.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,r){return r.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.WI),e.Y36(h.gz),e.Y36(e.sBO),e.Y36(i.qu),e.Y36(J.R),e.Y36(L),e.Y36(H.ux),e.Y36(f.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ser-detail"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"flex","sm:items-center"],[1,"min-w-56","font-semibold"],[1,"leading-6"],[1,"w-full","overflow-hidden"],[1,"pt-5"],[1,"grid","grid-cols-2","gap-y-3","gap-x-4","w-full","mt-1",3,"formGroup","autocomplete"],[1,"col-span-2","sm:col-span-1"],[1,"w-full"],["required","",3,"formControlName"],[3,"value"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["class","col-span-2 sm:col-span-1",4,"ngIf"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","min","placeholder"],["costoField",""],["matInput","","type","number","step","1","min","0","max","1000","maxlength","9","required","",3,"formControlName"],["margenField",""],["type","number","matInput","","step","1","min","0","max","15","maxlength","9","required","",3,"formControlName"],["impuestoField",""],["type","number","matInput","","step","1","min","0","max","50","maxlength","9","required","",3,"formControlName"],["descuentoField",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","value"],[1,"col-span-2","sm:col-span-1","flex","flex-col"],[1,"pt-4","mb-2",3,"value","color","formControlName"],[1,"col-span-2","pt-4","sm:col-span-2"],[1,"w-full","fuse-mat-textarea","flex-auto"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","maxlength"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,le,2,0,"h2",2),e.YNc(4,me,2,0,"h2",2),e.YNc(5,ue,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,de,16,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,we,97,48,"div",5),e.BQk(),e.qZA(),e.YNc(11,Fe,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===r.data.productService._id&&"add"===r.data.dialogMode),e.xp6(1),e.Q6J("ngIf",r.data.productService._id&&"edit"===r.data.dialogMode),e.xp6(1),e.Q6J("ngIf",r.data.productService._id&&"view"===r.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===r.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===r.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==r.data.dialogMode))},dependencies:[Z.mk,Z.sg,Z.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.qQ,i.Fd,i.sg,i.u,X.ey,D.lW,T.ZT,F.Hw,C.TO,C.KE,C.bx,C.hX,C.qo,B.Nt,ee.gD,te.Rr,Z.Ov],encapsulation:2,changeDetection:0}),o})();var re=a(393);function Ee(o,n){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Me(o,n){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const Ye=function(o){return[o]};function Re(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",31),e._uU(5),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.qZA(),e.TgZ(8,"div",32),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",33),e.YNc(12,Ee,2,1,"ng-container",20),e.YNc(13,Me,2,1,"ng-container",20),e.qZA(),e.TgZ(14,"div",34)(15,"button",35),e.NdJ("click",function(){const m=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.editProductService(m))}),e._UZ(16,"mat-icon",36),e.qZA(),e.TgZ(17,"button",35),e.NdJ("click",function(){const m=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.deleteProductService(m))}),e._UZ(18,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(3),e.hij(" ",t.merchantId.name," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.type," "),e.xp6(2),e.hij(" ",e.xi3(10,8,t.cost,e.VKq(11,Ye,t.currency+" "))," "),e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Le(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Re,19,13,"ng-container",29),e.BQk()),2&o){const t=n.ngIf,r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",r.trackByFn)}}const Be=function(o){return{"pointer-events-none":o}},Oe=function(){return[10,25,50,100]};function ze(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div"),e._uU(4," Negocio "),e.qZA(),e.TgZ(5,"div",25),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",25),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",25),e._uU(10," Costo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",27),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,Le,2,2,"ng-container",20),e.ALo(16,"async"),e._UZ(17,"mat-paginator",28),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","type"),e.xp6(2),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,11,t.productServices$)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Be,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,Oe))("showFirstLastButtons",!0)}}function $e(o,n){if(1&o&&(e.ynx(0),e.YNc(1,ze,18,16,"ng-container",22),e.BQk()),2&o){const t=n.ngIf;e.oxw();const r=e.MAs(34);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",r)}}function Ve(o,n){1&o&&(e.TgZ(0,"div",39),e._uU(1,"No ha creado ning\xfan producto o servicio a\xfan!"),e.qZA())}const Ge=[{path:"goods",component:(()=>{class o{constructor(t,r,c,m,s,A){this._changeDetectorRef=t,this._fuseConfirmationService=r,this._productServiceService=c,this._snackBar=m,this.dialog=s,this.store=A,this.merchantId="",this.productService=new ne,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new i.NI,this._unsubscribeAll=new k.x}ngOnInit(){this.productServices$=this.store.select(ie),this.store.select(V.B).pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,b.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,E.w)(()=>(this.isLoading=!0,this._productServiceService.getProductServices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,M.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){this._openDialog(this.productService,"add")}editProductService(t){this._openDialog(t,"edit")}deleteProductService(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar el departamento ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._productServiceService.deleteProductService(t._id).subscribe(m=>{this._snackBar.openFromComponent(Y.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",fappearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,r){return r.id||t}_openDialog(t,r){this.dialog.open(Ne,{width:"600px",height:"98%",data:{productService:t,dialogMode:r},panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(J.R),e.Y36(L),e.Y36(H.ux),e.Y36(T.uw),e.Y36(f.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["hrm-productServices"]],viewQuery:function(t,r){if(1&t&&(e.Gf(I.NW,5),e.Gf(y.YE,5)),2&t){let c;e.iGM(c=e.CRH())&&(r._paginator=c.first),e.iGM(c=e.CRH())&&(r._sort=c.first)}},decls:35,vars:8,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent","overflow-hidden","sm:overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noProductServices",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","productServices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","text-center","md:block",3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","productServices-table","md:px-8"],[1,"truncate"],[1,""],[1,"hidden","text-center","md:block"],[1,"flex","flex-col","justify-center","gap-2","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Productos y Servicios"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Productos y Servicios "),e.qZA()()(),e.TgZ(24,"div",14)(25,"button",15),e.NdJ("click",function(){return r.createProductService()}),e._UZ(26,"mat-icon",16),e.TgZ(27,"span",17),e._uU(28,"Nuevo"),e.qZA()()()(),e.TgZ(29,"div",18)(30,"div",19),e.YNc(31,$e,2,2,"ng-container",20),e.ALo(32,"async"),e.YNc(33,Ve,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(32,6,r.productServices$)))},dependencies:[h.yS,Z.mk,Z.sg,Z.O5,re.PQ,D.lW,F.Hw,I.NW,y.YE,y.nU,Z.Ov,Z.H9],encapsulation:2,data:{animation:z.L},changeDetection:0}),o})(),resolve:{prodS:(()=>{class o{constructor(t){this._productServicesService=t}resolve(t,r){return this._productServicesService.getProductServices()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(L))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),uoms:P}}];let je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(Ge),_.m]}),o})();var We=a(9602);let Ke=(()=>{class o{constructor(t,r,c){this._activatedRoute=t,this._changeDetectorRef=r,this._router=c,this.merchantId="",this._unsubscribeAll=new k.x}ngOnInit(){this._activatedRoute.params.pipe((0,b.R)(this._unsubscribeAll)).subscribe(({merchantId:t})=>{void 0!==t&&(this.merchantId=t,this._changeDetectorRef.markForCheck())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(e.sBO),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-commercial"]],decls:38,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-2","lg:grid-cols-4","gap-y-12","sm:gap-x-4"],["routerLink","/modules/commercial/goods",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["routerLink","/modules/commercial/uoms",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Comercial"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Comercial "),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",12),e._uU(24," M\xf3dulos "),e.qZA(),e.TgZ(25,"div",16)(26,"fuse-card",17)(27,"div",18)(28,"div",19),e._uU(29,"Productos y Servicios"),e.qZA(),e.TgZ(30,"div",20),e._uU(31,"listado productos y servicios "),e.qZA()()(),e.TgZ(32,"fuse-card",21)(33,"div",18)(34,"div",19),e._uU(35,"Unidades de medida"),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"listado de unidades de medida"),e.qZA()()()()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"))},dependencies:[h.rH,h.yS,We.y,re.PQ,F.Hw],encapsulation:2,changeDetection:0}),o})();var He=a(8372);function Xe(o,n){1&o&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Unidad de Medida "),e.qZA())}function et(o,n){1&o&&(e.TgZ(0,"h2",7),e._uU(1," Editar Unidad de Medida "),e.qZA())}function tt(o,n){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(8),e.Oqu(t.data.uom.name||"Sin nombre")}}function ot(o,n){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Sigla"),e.qZA(),e._UZ(12,"input",20),e.qZA()(),e.TgZ(13,"div",18)(14,"mat-form-field",19)(15,"mat-label"),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"mat-select",21)(18,"mat-option",22),e._uU(19,"\xc1rea"),e.qZA(),e.TgZ(20,"mat-option",22),e._uU(21,"Conteo"),e.qZA(),e.TgZ(22,"mat-option",22),e._uU(23,"Energ\xeda"),e.qZA(),e.TgZ(24,"mat-option",22),e._uU(25,"Longitud"),e.qZA(),e.TgZ(26,"mat-option",22),e._uU(27,"Peso"),e.qZA(),e.TgZ(28,"mat-option",22),e._uU(29,"Volumen"),e.qZA(),e.TgZ(30,"mat-option",22),e._uU(31,"Tiempo"),e.qZA()()()(),e.TgZ(32,"div",23)(33,"span",24),e._uU(34,"Estado"),e.qZA(),e.TgZ(35,"mat-slide-toggle",25),e._uU(36),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.uomForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.xp6(5),e.Q6J("formControlName","abbr")("placeholder","Siglas"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","area"),e.xp6(2),e.Q6J("value","conteo"),e.xp6(2),e.Q6J("value","energ\xeda"),e.xp6(2),e.Q6J("value","longitud"),e.xp6(2),e.Q6J("value","peso"),e.xp6(2),e.Q6J("value","volumen"),e.xp6(2),e.Q6J("value","tiempo"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.uomForm.get("active").value?"Activo":"Inactivo"," ")}}function rt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.updateUom())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function nt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.createUom())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function it(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",26),e.ynx(2),e.TgZ(3,"button",27),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,rt,3,3,"ng-container",6),e.YNc(6,nt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let at=(()=>{class o{constructor(t,r,c,m,s,A,S){this.data=t,this._changeDetectorRef=r,this._formBuilder=c,this._fuseConfirmationService=m,this._dialogRef=s,this._uomService=A,this.store=S,this.dialogMode="view",this.user$=(0,R.of)(null),this.user=null,this._unsubscribeAll=new k.x,this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.user$=this.store.select(j.rk),this.user$.subscribe(t=>this.user=t),this.uomForm=this._formBuilder.group({_id:[null],user:[this.user._id,[i.kI.required]],active:[!0,[i.kI.required]],name:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]],abbr:[null,[i.kI.required,i.kI.maxLength(255)]],type:[null,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(255)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();t.slug=new w.i(t.name).slug,t=(0,G.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._uomService.createUom(t).pipe((0,b.R)(this._unsubscribeAll)).subscribe(m=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:m.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();t.slug=new w.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(c=>{"confirmed"===c&&this._uomService.updateUom(t).pipe((0,b.R)(this._unsubscribeAll)).subscribe(m=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:m.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.WI),e.Y36(e.sBO),e.Y36(i.QS),e.Y36(J.R),e.Y36(T.so),e.Y36(x),e.Y36(f.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["stock-uom-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Xe,2,0,"h2",2),e.YNc(4,et,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,tt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,ot,37,17,"div",5),e.BQk(),e.qZA(),e.YNc(10,it,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===r.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===r.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===r.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===r.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==r.data.dialogMode))},dependencies:[Z.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,X.ey,D.lW,T.ZT,C.KE,C.hX,B.Nt,ee.gD,te.Rr],encapsulation:2}),o})();const ct={_id:null,active:null,userId:null,name:null,slug:null,abbr:null,type:null};function st(o,n){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function lt(o,n){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function mt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e._uU(6),e.qZA()(),e.TgZ(7,"div",32)(8,"div",33),e._uU(9),e.qZA()(),e.TgZ(10,"div",34),e.YNc(11,st,2,1,"ng-container",20),e.YNc(12,lt,2,1,"ng-container",20),e.qZA(),e.TgZ(13,"div")(14,"button",35),e.NdJ("click",function(){const m=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.updateUom(m))}),e._UZ(15,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.abbr),e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function ut(o,n){if(1&o&&(e.ynx(0),e.YNc(1,mt,16,6,"ng-container",29),e.BQk()),2&o){const t=n.ngIf,r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",r.trackByFn)}}const dt=function(){return[5,10,25,100]};function pt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Siglas "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",27),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12,"Detalles"),e.qZA()(),e.YNc(13,ut,2,2,"ng-container",20),e.ALo(14,"async"),e.qZA(),e._UZ(15,"mat-paginator",28),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","value"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,9,t.uoms$)),e.xp6(2),e.Q6J("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,dt))("showFirstLastButtons",!0)}}function gt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,pt,16,12,"ng-container",22),e.BQk()),2&o){const t=n.ngIf;e.oxw();const r=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",r)}}function _t(o,n){1&o&&(e.TgZ(0,"div",39),e._uU(1,"\xa1No se ha creado ninguna unidad de medida!"),e.qZA())}const ft=[{path:"",component:Ke},{path:"uoms",component:(()=>{class o{constructor(t,r,c,m,s){this._changeDetectorRef=t,this._dialog=r,this._fuseConfirmationService=c,this._uomService=m,this.store=s,this.flashMessage=null,this.uoms$=(0,R.of)([]),this.searchInputControl=new i.p4,this.isLoading=!1,this._unsubscribeAll=new k.x}ngOnInit(){this.uoms$=this.store.select(K),this.store.select(V.B).pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,b.R)(this._unsubscribeAll),(0,He.b)(300),(0,E.w)(t=>(this.isLoading=!0,this._uomService.getUoms(0,10,"name","asc",t))),(0,M.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,b.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,E.w)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,M.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(ct,"add")}updateUom(t){this._openDialog(t,"edit")}trackByFn(t,r){return t||r.id}_openDialog(t,r){this._dialog.open(at,{data:{uom:t,dialogMode:r},panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(T.uw),e.Y36(J.R),e.Y36(x),e.Y36(f.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["stock-uom"]],viewQuery:function(t,r){if(1&t&&(e.Gf(I.NW,5),e.Gf(y.YE,5)),2&t){let c;e.iGM(c=e.CRH())&&(r._paginator=c.first),e.iGM(c=e.CRH())&&(r._sort=c.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noUoms",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Comercial"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Unidades de Medida"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Unidades de Medida "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return r.createUom()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,gt,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,_t,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",r.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,r.uoms$)))},dependencies:[h.yS,Z.sg,Z.O5,i.Fj,i.JJ,i.oH,D.lW,F.Hw,C.KE,C.qo,B.Nt,I.NW,y.YE,y.nU,Z.Ov],styles:[".uom-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.uom-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.uom-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.uom-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:z.L},changeDetection:0}),o})(),resolve:{uoms:P}}];let ht=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(ft),je,_.m]}),o})()}}]);