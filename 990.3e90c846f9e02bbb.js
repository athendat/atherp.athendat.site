"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[990],{7231:(be,O,l)=>{l.d(O,{C:()=>F});var p=l(520),G=l(2340),e=l(5e3);const P=G.N.API_URL;let F=(()=>{class v{constructor(A){this._httpClient=A}uploadImage(A,g){const T=new FormData;return T.append("image",g,g.name),this._httpClient.post(`${P}/cloudinary/upload/${A}`,T)}removeImage(A,g){const T=g.slice(g.indexOf(A),g.length).split(".")[0],N=(new p.LE).set("public_id",T);return this._httpClient.delete(`${P}/cloudinary/remove`,{params:N})}}return v.\u0275fac=function(A){return new(A||v)(e.LFG(p.eN))},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},9990:(be,O,l)=>{l.r(O),l.d(O,{CommercialModule:()=>ei});var p=l(5357),G=l(6338),e=l(5e3),P=l(520),F=l(8505),v=l(2114),j=l(5714),A=l(2340),g=l(5620);const T=A.N.API_URL;let N=(()=>{class o{constructor(t,n){this._httpClient=t,this.store=n}getUoms(t=0,n=10,r="name",s="asc",c=""){const u=(new P.LE).append("page",t.toString()).append("size",n.toString()).append("sort",r).append("order",s).append("search",c);return this._httpClient.get(`${T}/uoms/`,{params:u}).pipe((0,F.b)(Z=>{this.store.dispatch((0,j.Jr)({pagination:Z.pagination})),this.store.dispatch((0,v.u8)({uoms:Z.dataArr}))}))}getUomById(t){return this._httpClient.get(`${T}/uoms/${t}`).pipe((0,F.b)(n=>{this.store.dispatch((0,v.sh)({uom:n.uom}))}))}createUom(t){return this._httpClient.post(`${T}/uoms/`,t).pipe((0,F.b)(n=>{this.store.dispatch((0,j.W4)()),this.store.dispatch((0,v.N9)({uom:n.data}))}))}updateUom(t){return this._httpClient.patch(`${T}/uoms/${t._id}`,t).pipe((0,F.b)(n=>{this.store.dispatch((0,v.zM)({uom:n.data}))}))}deleteUom(t){return this._httpClient.delete(`${T}/uoms/${t}`).pipe((0,F.b)(()=>{this.store.dispatch((0,v.X5)({id:t}))}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN),e.LFG(g.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),re=(()=>{class o{constructor(t){this._uomService=t}resolve(t,n){return this._uomService.getUoms()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(N))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var a=l(3075),Q=l(9646),b=l(7579),d=l(2722),M=l(4787),V=l(1910),f=l(9784),R=l(2491);const ae=o=>o.uoms,W=((0,g.P1)(ae,o=>o.uom),(0,g.P1)(ae,o=>o.uoms));var se=l(7489),U=l(4062),ce=l(3005),q=l(1683),Y=l(2834),w=l(7261),Ce=l(7231),m=l(9808),S=l(393),$=l(508),k=l(7423),H=l(288),C=l(5245),_=l(7322),E=l(7531),X=l(4107),ee=l(2368);function ye(o,i){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-icon",6),e.TgZ(2,"a",62),e._uU(3,"Nuevo"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-right"))}function Te(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Nuevo Producto o Servicio"),e.qZA())}function qe(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("Informaci\xf3n de ",t.selectedProductService.name,"")}}const K=function(o){return{"cursor-not-allowed":o}};function Ie(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createProductService())}),e._UZ(1,"mat-icon",64),e.TgZ(2,"span",65),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(3,K,t.productServiceForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateProductService())}),e._UZ(1,"mat-icon",64),e.TgZ(2,"span",65),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(3,K,t.productServiceForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function ke(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el tipo. "),e.qZA())}function Qe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio es obligatorio. "),e.qZA())}function Ue(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio debe contener entre 3 y 255 caracteres. "),e.qZA())}function we(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",30),e._uU(2),e.qZA(),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.abbr," ")}}function Se(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El la unidad de medida es obligatoria. "),e.qZA())}function Fe(o,i){if(1&o&&(e.TgZ(0,"mat-form-field",27)(1,"mat-label"),e._uU(2,"Unidad de Medida"),e.qZA(),e.TgZ(3,"mat-select",66),e.YNc(4,we,3,2,"ng-container",67),e.qZA(),e.YNc(5,Se,2,0,"mat-error",15),e.qZA()),2&o){const t=i.ngIf,n=e.oxw();e.xp6(3),e.Q6J("formControlName","uomId"),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("uomId").hasError("required"))}}function De(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la moneda. "),e.qZA())}function Je(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del producto es obligatorio. "),e.qZA())}function Pe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe de ser mayor que 0. "),e.qZA())}function Ne(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe contener solo n\xfameros. "),e.qZA())}function Me(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El margen Gesti\xf3n Comercial del producto es obligatorio "),e.qZA())}function Re(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 1000 "),e.qZA())}function Ye(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo debe estar entre 0 y 1000"),e.qZA())}function Ee(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El impuesto del producto es obligatorio "),e.qZA())}function Le(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 100 "),e.qZA())}function Be(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor debe este campo de estar entre 0 y 100"),e.qZA())}function ze(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El descuento del producto es obligatorio "),e.qZA())}function Oe(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 100 "),e.qZA())}function Ge(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 100"),e.qZA())}function je(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del producto es obligatorio "),e.qZA())}function $e(o,i){if(1&o&&e._UZ(0,"img",68),2&o){const t=e.oxw();e.Q6J("alt","Product thumbnail image")("src",t.productServiceForm.get("imageUrl").value,e.LSH)}}function He(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeImage())}),e._UZ(1,"mat-icon",70),e.qZA()}}function Ke(o,i){1&o&&(e.TgZ(0,"div",71),e._uU(1," SIN IMAGEN "),e.qZA())}function Ve(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",72,73),e.NdJ("change",function(){e.CHM(t);const r=e.MAs(2),s=e.oxw();return e.KtG(s.uploadImage(r.files))}),e.qZA(),e.TgZ(3,"label",74)(4,"div",75),e._UZ(5,"mat-icon",76),e.TgZ(6,"span",77),e._uU(7," Agregar imagen "),e.qZA()()()()}2&o&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle"))}function We(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createProductService())}),e._UZ(1,"mat-icon",64),e.TgZ(2,"span",65),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(3,K,t.productServiceForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Xe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateProductService())}),e._UZ(1,"mat-icon",64),e.TgZ(2,"span",65),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(3,K,t.productServiceForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}let et=(()=>{class o{constructor(t,n,r,s,c,u,Z,ie,ti){this._activatedRoute=t,this._changeDetectorRef=n,this._router=r,this._formBuilder=s,this._fuseConfirmationService=c,this._productServicesService=u,this._snackBar=Z,this._imagesService=ie,this.store=ti,this.user$=(0,Q.of)(null),this.uoms$=null,this._unsubscribeAll=new b.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.uoms$=this.store.select(W),this.store.select(V.Qs).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.currentMerchant=t}),this.store.select(ce.YP).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.selectedProductService=t}),this.productServiceForm=this._formBuilder.group({_id:[""],active:[!0],uomId:["",[a.kI.required]],merchantId:[this.currentMerchant._id,[a.kI.required]],userId:[this.user._id,[a.kI.required]],type:["",[a.kI.required]],currency:[{value:"CUP",disabled:!0},[a.kI.required]],cost:[0,[a.kI.required,a.kI.min(1),R.L.numbersAndDecimalsPattern()]],margin:[0,[a.kI.min(0),a.kI.max(1e3),R.L.numbersAndDecimalsPattern()]],taxPercent:[0,[a.kI.min(0),a.kI.max(100),R.L.numbersAndDecimalsPattern()]],discount:[0,[a.kI.min(0),a.kI.max(100),R.L.numbersAndDecimalsPattern()]],price:[{disabled:!0,value:0},[a.kI.required,a.kI.min(0),a.kI.max(999999999),a.kI.maxLength(9)]],name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],slug:[""],imageUrl:[""],description:["",[a.kI.maxLength(1e3)]]}),this._activatedRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(({goodsId:t})=>{this.windowsMode="new"===t?"new":"edit",this._fillProductServiceData(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){let t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t=(0,se.omit)(t,"_id"),t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productServicesService.createProductService(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/modules/commercial/goods"),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateProductService(){const t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productServicesService.updateProductService(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/modules/commercial/goods"),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}uploadImage(t){if(!t.length)return;const r=t[0];!["image/jpeg","image/jpg","image/webp","image/png"].includes(r.type)||this._imagesService.uploadImage("Comercial",r).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.productServiceForm.get("imageUrl").setValue(s.imageUrl),this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}removeImage(){const t=this.productServiceForm.get("imageUrl").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._imagesService.removeImage("Comercial",t).subscribe(c=>{this.productServiceForm.get("imageUrl").setValue(null),this._changeDetectorRef.markForCheck(),this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}})})})}trackByFn(t,n){return n.id||t}_fillProductServiceData(){"edit"===this.windowsMode&&(this.productServiceForm.patchValue(this.selectedProductService),this.productServiceForm.get("merchantId").setValue(this.selectedProductService.merchantId._id),void 0!==this.selectedProductService&&this.productServiceForm.get("uomId").setValue(this.selectedProductService.uomId._id))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(e.sBO),e.Y36(p.F0),e.Y36(a.qu),e.Y36(q.R),e.Y36(Y.z),e.Y36(w.ux),e.Y36(Ce.C),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["goods-detail"]],decls:150,vars:69,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/commercial/goods",1,"ml-1","text-primary-500","hover:underline"],["class","flex items-center ml-1 whitespace-nowrap",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[4,"ngIf"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","ngClass","click",4,"ngIf"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pb-8","pt-8","pr-4","pl-4","border-t-2","sm:grid-cols-2","gap-y-3","gap-x-6"],[1,"sm:col-span-1"],[1,"w-full"],["required","",3,"formControlName"],[3,"value"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["class","sm:col-span-1",4,"ngIf"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","min","placeholder"],["costoField",""],["matInput","","type","number","step","1","min","0","max","1000","maxlength","9","required","",3,"formControlName"],["margenField",""],["type","number","matInput","","step","1","required","",3,"formControlName","min","max"],["impuestoField",""],["descuentoField",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","value"],[1,"flex","flex-col","sm:col-span-1"],["value","true",1,"pt-4","mb-2",3,"color","formControlName"],[1,"pt-4","sm:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","maxlength"],[1,"grid","w-full","gap-y-3","gap-x-6","pb-8","pt-8","pr-4","pl-4","border-t-2","sm:grid-cols-4"],[1,"flex","flex-col"],[1,"flex","items-center","mt-3"],[1,"relative","flex","items-center","justify-center","mr-6","overflow-hidden","border","rounded","w-26","h-26","flex-0"],[3,"alt","src",4,"ngIf"],["mat-mini-fab","","class","absolute p-5 transition-opacity ease-linear delay-200 rounded-full opacity-50 bg-primary-700 hover:opacity-100",3,"click",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"ml-1","text-primary-500"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[3,"formControlName"],[4,"ngFor","ngForOf"],[3,"alt","src"],["mat-mini-fab","",1,"absolute","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-50","bg-primary-700","hover:opacity-100",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white","icon-size-5"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["id","image-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple",""],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Productos y Servicios"),e.qZA()(),e.YNc(16,ye,4,1,"div",9),e.qZA(),e.TgZ(17,"div",10)(18,"a",11),e._UZ(19,"mat-icon",6),e.TgZ(20,"span",12),e._uU(21,"Regresar"),e.qZA()()()(),e.TgZ(22,"div",13)(23,"div",14),e.YNc(24,Te,2,0,"span",15),e.YNc(25,qe,2,1,"span",15),e.qZA()()(),e.TgZ(26,"div",16),e.YNc(27,Ie,4,5,"button",17),e.YNc(28,Ae,4,5,"button",17),e.qZA()(),e.TgZ(29,"div",18)(30,"div",19)(31,"form",20)(32,"mat-accordion",21)(33,"mat-expansion-panel",22)(34,"mat-expansion-panel-header",23)(35,"mat-panel-title",24)(36,"div",25),e._uU(37," Informaci\xf3n General "),e.qZA()()(),e.TgZ(38,"div",26)(39,"div",27)(40,"mat-form-field",28)(41,"mat-label"),e._uU(42,"Tipo"),e.qZA(),e.TgZ(43,"mat-select",29)(44,"mat-option",30),e._uU(45," Producto "),e.qZA(),e.TgZ(46,"mat-option",30),e._uU(47," Servicio "),e.qZA()(),e.YNc(48,ke,2,0,"mat-error",15),e.TgZ(49,"mat-hint"),e._uU(50,"Especifique si es producto o servicio"),e.qZA()()(),e.TgZ(51,"div",27)(52,"mat-form-field",28)(53,"mat-label"),e._uU(54,"Nombre"),e.qZA(),e._UZ(55,"input",31),e.YNc(56,Qe,2,0,"mat-error",15),e.YNc(57,Ue,2,0,"mat-error",15),e.qZA()(),e.YNc(58,Fe,6,3,"mat-form-field",32),e.ALo(59,"async"),e.TgZ(60,"div",27)(61,"mat-form-field",28)(62,"mat-label"),e._uU(63,"Moneda por defecto"),e.qZA(),e.TgZ(64,"mat-select",29)(65,"mat-option",33),e._uU(66,"CUP"),e.qZA(),e.TgZ(67,"mat-option",34),e._uU(68,"MLC"),e.qZA(),e.TgZ(69,"mat-option",35),e._uU(70,"USD"),e.qZA(),e.TgZ(71,"mat-option",36),e._uU(72,"MXN"),e.qZA()(),e._UZ(73,"mat-icon",37),e.YNc(74,De,2,0,"mat-error",15),e.qZA()(),e.TgZ(75,"mat-form-field",27)(76,"mat-label"),e._uU(77,"Costo"),e.qZA(),e.TgZ(78,"span",38),e._uU(79,"$"),e.qZA(),e._UZ(80,"input",39,40),e.YNc(82,Je,2,0,"mat-error",15),e.YNc(83,Pe,2,0,"mat-error",15),e.YNc(84,Ne,2,0,"mat-error",15),e.qZA(),e.TgZ(85,"mat-form-field",27)(86,"mat-label"),e._uU(87,"Margen Gesti\xf3n Comercial"),e.qZA(),e.TgZ(88,"span",38),e._uU(89,"%"),e.qZA(),e._UZ(90,"input",41,42),e.YNc(92,Me,2,0,"mat-error",15),e.YNc(93,Re,2,0,"mat-error",15),e.YNc(94,Ye,2,0,"mat-hint",15),e.qZA(),e.TgZ(95,"mat-form-field",27)(96,"mat-label"),e._uU(97,"Impuesto"),e.qZA(),e.TgZ(98,"span",38),e._uU(99,"%"),e.qZA(),e._UZ(100,"input",43,44),e.YNc(102,Ee,2,0,"mat-error",15),e.YNc(103,Le,2,0,"mat-error",15),e.YNc(104,Be,2,0,"mat-hint",15),e.qZA(),e.TgZ(105,"mat-form-field",27)(106,"mat-label"),e._uU(107,"Descuento"),e.qZA(),e.TgZ(108,"span",38),e._uU(109,"%"),e.qZA(),e._UZ(110,"input",43,45),e.YNc(112,ze,2,0,"mat-error",15),e.YNc(113,Oe,2,0,"mat-error",15),e.YNc(114,Ge,2,0,"mat-hint",15),e.qZA(),e.TgZ(115,"mat-form-field",27)(116,"mat-label"),e._uU(117,"Precio"),e.qZA(),e.TgZ(118,"span",38),e._uU(119,"$"),e.qZA(),e._UZ(120,"input",46),e.YNc(121,je,2,0,"mat-error",15),e.qZA(),e.TgZ(122,"div",47)(123,"mat-label"),e._uU(124,"Estado"),e.qZA(),e.TgZ(125,"mat-slide-toggle",48),e._uU(126," Activo "),e.qZA()(),e.TgZ(127,"div",49)(128,"mat-form-field",50)(129,"mat-label"),e._uU(130,"Descripci\xf3n"),e.qZA(),e._UZ(131,"mat-icon",51)(132,"textarea",52),e.qZA()()()(),e.TgZ(133,"mat-expansion-panel")(134,"mat-expansion-panel-header",23)(135,"mat-panel-title",24)(136,"div",25),e._uU(137," Imagen "),e.qZA()()(),e.TgZ(138,"div",53)(139,"div",54)(140,"div",55)(141,"div",56),e.YNc(142,$e,1,2,"img",57),e.YNc(143,He,2,0,"button",58),e.YNc(144,Ke,2,0,"div",59),e.qZA()(),e.YNc(145,Ve,8,3,"div",15),e.qZA()()()()()()(),e.TgZ(146,"div",60)(147,"div",61),e.YNc(148,We,4,5,"button",17),e.YNc(149,Xe,4,5,"button",17),e.qZA()()()),2&t){const r=e.MAs(81),s=e.MAs(91),c=e.MAs(101),u=e.MAs(111);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(3),e.Q6J("ngIf","new"===n.windowsMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(5),e.Q6J("ngIf","new"===n.windowsMode),e.xp6(1),e.Q6J("ngIf","edit"===n.windowsMode&&n.selectedProductService),e.xp6(2),e.Q6J("ngIf","new"===n.windowsMode),e.xp6(1),e.Q6J("ngIf","new"!==n.windowsMode),e.xp6(3),e.Q6J("formGroup",n.productServiceForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","Producto"),e.xp6(2),e.Q6J("value","Servicio"),e.xp6(2),e.Q6J("ngIf",n.productServiceForm.get("type").hasError("required")),e.xp6(7),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del producto o servicio"),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("name").hasError("maxlength")||n.productServiceForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",e.lcZ(59,67,n.uoms$)),e.xp6(6),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("currency").hasError("required")),e.xp6(6),e.Q6J("formControlName","cost")("min",1)("placeholder","Costo del producto o servicio"),e.xp6(2),e.Q6J("ngIf",n.productServiceForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("cost").hasError("min")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("cost").hasError("pattern")),e.xp6(6),e.Q6J("formControlName","margin"),e.xp6(2),e.Q6J("ngIf",n.productServiceForm.get("margin").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("margin").hasError("min")||n.productServiceForm.get("margin").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("margin").valid),e.xp6(6),e.Q6J("formControlName","taxPercent")("min",0)("max",100),e.xp6(2),e.Q6J("ngIf",n.productServiceForm.get("taxPercent").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("taxPercent").hasError("min")||n.productServiceForm.get("taxPercent").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("taxPercent").valid),e.xp6(6),e.Q6J("formControlName","discount")("min",0)("max",100),e.xp6(2),e.Q6J("ngIf",n.productServiceForm.get("discount").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("discount").hasError("min")||n.productServiceForm.get("discount").hasError("max")),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("discount").valid),e.xp6(6),e.Q6J("formControlName","price")("value",c.value/100*r.value-u.value/100*r.value+s.value/100*r.value+ +r.value),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("price").hasError("required")),e.xp6(4),e.Q6J("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(8),e.Q6J("ngIf",n.productServiceForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",!n.productServiceForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",!n.productServiceForm.get("imageUrl").value),e.xp6(3),e.Q6J("ngIf","new"===n.windowsMode),e.xp6(1),e.Q6J("ngIf","new"!==n.windowsMode)}},dependencies:[p.yS,m.mk,m.sg,m.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.qQ,a.Fd,a.sg,a.u,S.PQ,$.ey,k.lW,H.pp,H.ib,H.yz,H.yK,C.Hw,_.TO,_.KE,_.bx,_.hX,_.qo,E.Nt,$.wG,X.gD,ee.Rr,m.Ov],encapsulation:2,changeDetection:0}),o})();var I=l(6087),h=l(4847),L=l(6451),D=l(3900),J=l(4004),B=l(3844);class tt{}var z=l(6428),y=l(8966),te=l(5119);function ot(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar producto o servicio"),e.qZA())}function nt(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Editar producto o servicio"),e.qZA())}function it(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del producto o servicio"),e.qZA())}function rt(o,i){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e.ynx(4),e.TgZ(5,"div",12)(6,"mat-label",13),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA()(),e.BQk(),e.ynx(10),e.TgZ(11,"div",12)(12,"mat-label",13),e._uU(13,"Descripci\xf3n"),e.qZA(),e.TgZ(14,"div",14),e._uU(15),e.qZA()(),e.BQk(),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(9),e.Oqu(t.data.productService.name),e.xp6(6),e.Oqu(t.data.productService.description)}}function at(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el tipo. "),e.qZA())}function st(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio es obligatorio. "),e.qZA())}function ct(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto o servicio debe contener entre 3 y 255 caracteres. "),e.qZA())}function lt(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",21),e._uU(2),e.qZA(),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.abbr," ")}}function mt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El la unidad de medida es obligatoria. "),e.qZA())}function dt(o,i){if(1&o&&(e.TgZ(0,"mat-form-field",18)(1,"mat-label"),e._uU(2,"Unidad de Medida"),e.qZA(),e.TgZ(3,"mat-select",45),e.YNc(4,lt,3,2,"ng-container",46),e.qZA(),e.YNc(5,mt,2,0,"mat-error",6),e.qZA()),2&o){const t=i.ngIf,n=e.oxw(2);e.xp6(3),e.Q6J("formControlName","uomId"),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",n.productServiceForm.get("uomId").hasError("required"))}}function ut(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la moneda. "),e.qZA())}function pt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del producto es obligatorio. "),e.qZA())}function gt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe de ser mayor que 0. "),e.qZA())}function _t(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El costo debe contener solo n\xfameros. "),e.qZA())}function ft(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El margen Gesti\xf3n Comercial del producto es obligatorio "),e.qZA())}function ht(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 1000 "),e.qZA())}function xt(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo debe estar entre 0 y 1000"),e.qZA())}function vt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El impuesto del producto es obligatorio "),e.qZA())}function Zt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 15 "),e.qZA())}function bt(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor debe este campo de estar entre 0 y 15"),e.qZA())}function Ct(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El descuento del producto es obligatorio "),e.qZA())}function yt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 50 "),e.qZA())}function Tt(o,i){1&o&&(e.TgZ(0,"mat-hint"),e._uU(1,"El valor de este campo de estar entre 0 y 50"),e.qZA())}function qt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del producto es obligatorio "),e.qZA())}function It(o,i){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Tipo"),e.qZA(),e.TgZ(7,"mat-select",20)(8,"mat-option",21),e._uU(9," Producto "),e.qZA(),e.TgZ(10,"mat-option",21),e._uU(11," Servicio "),e.qZA()(),e.YNc(12,at,2,0,"mat-error",6),e.TgZ(13,"mat-hint"),e._uU(14,"Especifique si es producto o servicio"),e.qZA()()(),e.TgZ(15,"div",18)(16,"mat-form-field",19)(17,"mat-label"),e._uU(18,"Nombre"),e.qZA(),e._UZ(19,"input",22),e.YNc(20,st,2,0,"mat-error",6),e.YNc(21,ct,2,0,"mat-error",6),e.qZA()(),e.YNc(22,dt,6,3,"mat-form-field",23),e.ALo(23,"async"),e.TgZ(24,"div",18)(25,"mat-form-field",19)(26,"mat-label"),e._uU(27,"Moneda por defecto"),e.qZA(),e.TgZ(28,"mat-select",20)(29,"mat-option",24),e._uU(30,"CUP"),e.qZA(),e.TgZ(31,"mat-option",25),e._uU(32,"MLC"),e.qZA(),e.TgZ(33,"mat-option",26),e._uU(34,"USD"),e.qZA(),e.TgZ(35,"mat-option",27),e._uU(36,"MXN"),e.qZA()(),e._UZ(37,"mat-icon",28),e.YNc(38,ut,2,0,"mat-error",6),e.qZA()(),e.TgZ(39,"mat-form-field",18)(40,"mat-label"),e._uU(41,"Costo"),e.qZA(),e.TgZ(42,"span",29),e._uU(43,"$"),e.qZA(),e._UZ(44,"input",30,31),e.YNc(46,pt,2,0,"mat-error",6),e.YNc(47,gt,2,0,"mat-error",6),e.YNc(48,_t,2,0,"mat-error",6),e.qZA(),e.TgZ(49,"mat-form-field",18)(50,"mat-label"),e._uU(51,"Margen Gesti\xf3n Comercial"),e.qZA(),e.TgZ(52,"span",29),e._uU(53,"%"),e.qZA(),e._UZ(54,"input",32,33),e.YNc(56,ft,2,0,"mat-error",6),e.YNc(57,ht,2,0,"mat-error",6),e.YNc(58,xt,2,0,"mat-hint",6),e.qZA(),e.TgZ(59,"mat-form-field",18)(60,"mat-label"),e._uU(61,"Impuesto"),e.qZA(),e.TgZ(62,"span",29),e._uU(63,"%"),e.qZA(),e._UZ(64,"input",34,35),e.YNc(66,vt,2,0,"mat-error",6),e.YNc(67,Zt,2,0,"mat-error",6),e.YNc(68,bt,2,0,"mat-hint",6),e.qZA(),e.TgZ(69,"mat-form-field",18)(70,"mat-label"),e._uU(71,"Descuento"),e.qZA(),e.TgZ(72,"span",29),e._uU(73,"%"),e.qZA(),e._UZ(74,"input",36,37),e.YNc(76,Ct,2,0,"mat-error",6),e.YNc(77,yt,2,0,"mat-error",6),e.YNc(78,Tt,2,0,"mat-hint",6),e.qZA(),e.TgZ(79,"mat-form-field",18)(80,"mat-label"),e._uU(81,"Precio"),e.qZA(),e.TgZ(82,"span",29),e._uU(83,"$"),e.qZA(),e._UZ(84,"input",38),e.YNc(85,qt,2,0,"mat-error",6),e.qZA(),e.TgZ(86,"div",39)(87,"mat-label"),e._uU(88,"Estado"),e.qZA(),e.TgZ(89,"mat-slide-toggle",40),e._uU(90," Activo "),e.qZA()(),e.TgZ(91,"div",41)(92,"mat-form-field",42)(93,"mat-label"),e._uU(94,"Descripci\xf3n"),e.qZA(),e._UZ(95,"mat-icon",43)(96,"textarea",44),e.qZA()()()()()),2&o){const t=e.MAs(45),n=e.MAs(55),r=e.MAs(65),s=e.MAs(75),c=e.oxw();e.xp6(2),e.Q6J("formGroup",c.productServiceForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","Producto"),e.xp6(2),e.Q6J("value","Servicio"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("type").hasError("required")),e.xp6(7),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del producto o servicio"),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("name").hasError("maxlength")||c.productServiceForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",e.lcZ(23,46,c.uoms$)),e.xp6(6),e.Q6J("formControlName","currency"),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:cash"),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("currency").hasError("required")),e.xp6(6),e.Q6J("formControlName","cost")("min",1)("placeholder","Costo del producto o servicio"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("min")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("cost").hasError("pattern")),e.xp6(6),e.Q6J("formControlName","margin"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("margin").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("margin").hasError("min")||c.productServiceForm.get("margin").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("margin").valid),e.xp6(6),e.Q6J("formControlName","taxPercent"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").hasError("min")||c.productServiceForm.get("taxPercent").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("taxPercent").valid),e.xp6(6),e.Q6J("formControlName","discount"),e.xp6(2),e.Q6J("ngIf",c.productServiceForm.get("discount").hasError("required")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("discount").hasError("min")||c.productServiceForm.get("discount").hasError("max")),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("discount").valid),e.xp6(6),e.Q6J("formControlName","price")("value",r.value/100*t.value-s.value/100*t.value+n.value/100*t.value+ +t.value),e.xp6(1),e.Q6J("ngIf",c.productServiceForm.get("price").hasError("required")),e.xp6(4),e.Q6J("value",!0)("color","primary")("formControlName","active"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3)}}const le=function(o){return{"cursor-not-allowed":o}};function At(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateProductService())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,le,t.productServiceForm.invalid))}}function kt(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createProductService())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.productServiceForm.invalid)("ngClass",e.VKq(4,le,t.productServiceForm.invalid))}}function Qt(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",47),e.ynx(2),e.TgZ(3,"button",48),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,At,3,6,"ng-container",6),e.YNc(6,kt,3,6,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ut=(()=>{class o{constructor(t,n,r,s,c,u,Z,ie){this.data=t,this._activatedRoute=n,this._changeDetectorRef=r,this._formBuilder=s,this._fuseConfirmationService=c,this._productServicesService=u,this._snackBar=Z,this.store=ie,this.dialogMode="view",this.user$=(0,Q.of)(null),this.uoms$=null,this._unsubscribeAll=new b.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.uoms$=this.store.select(W),this.store.select(V.Qs).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.currentMerchant=t}),this.productServiceForm=this._formBuilder.group({_id:[""],active:[!0],uomId:["",[a.kI.required]],merchantId:[this.currentMerchant._id,[a.kI.required]],userId:[this.user._id,[a.kI.required]],type:["",[a.kI.required]],currency:[{value:"CUP",disabled:!0},[a.kI.required]],cost:[0,[a.kI.required,a.kI.min(1),R.L.onlyNumbersPattern()]],margin:[0,[a.kI.min(0),a.kI.max(1e3)]],taxPercent:[0,[a.kI.min(0),a.kI.max(15)]],discount:[0,[a.kI.min(0),a.kI.max(50)]],price:[{disabled:!0,value:0},[a.kI.required,a.kI.min(0),a.kI.max(999999999),a.kI.maxLength(9)]],name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],slug:[""],description:["",[a.kI.maxLength(1e3)]]}),"edit"===this.data.dialogMode&&(this.productServiceForm.patchValue(this.data.productService),this.productServiceForm.get("merchantId").setValue(this.data.productService.merchantId._id),void 0!==this.data.productService.uomId&&this.productServiceForm.get("uomId").setValue(this.data.productService.uomId._id))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){let t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t=(0,te.Z)(t,"_id"),t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productServicesService.createProductService(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updateProductService(){const t=this.productServiceForm.getRawValue();t.price=t.cost+(t.taxPercent/100*t.cost-t.discount/100*t.cost+t.margin/100*t.cost),t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Departamento",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productServicesService.updateProductService(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.WI),e.Y36(p.gz),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(q.R),e.Y36(Y.z),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["goods-dialog"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"flex","sm:items-center"],[1,"min-w-56","font-semibold"],[1,"leading-6"],[1,"w-full","overflow-hidden"],[1,"pt-5"],[1,"grid","grid-cols-2","gap-y-3","gap-x-4","w-full","mt-1",3,"formGroup","autocomplete"],[1,"col-span-2","sm:col-span-1"],[1,"w-full"],["required","",3,"formControlName"],[3,"value"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["class","col-span-2 sm:col-span-1",4,"ngIf"],["value","CUP"],["value","MLC"],["value","USD"],["value","MXN"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","min","placeholder"],["costoField",""],["matInput","","type","number","step","1","min","0","max","1000","maxlength","9","required","",3,"formControlName"],["margenField",""],["type","number","matInput","","step","1","min","0","max","15","maxlength","9","required","",3,"formControlName"],["impuestoField",""],["type","number","matInput","","step","1","min","0","max","50","maxlength","9","required","",3,"formControlName"],["descuentoField",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName","value"],[1,"col-span-2","sm:col-span-1","flex","flex-col"],[1,"pt-4","mb-2",3,"value","color","formControlName"],[1,"col-span-2","pt-4","sm:col-span-2"],[1,"w-full","fuse-mat-textarea","flex-auto"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","maxlength"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ot,2,0,"h2",2),e.YNc(4,nt,2,0,"h2",2),e.YNc(5,it,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,rt,16,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,It,97,48,"div",5),e.BQk(),e.qZA(),e.YNc(11,Qt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===n.data.productService._id&&"add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.productService._id&&"edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.productService._id&&"view"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===n.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},encapsulation:2,changeDetection:0}),o})();function wt(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function St(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",39),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const me=function(o){return[o]};function Ft(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",31),e._uU(5),e.qZA(),e.TgZ(6,"div",32),e._uU(7),e.qZA(),e.TgZ(8,"div",33),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",26),e.YNc(12,wt,2,1,"ng-container",20),e.YNc(13,St,2,1,"ng-container",20),e.qZA(),e.TgZ(14,"div",34)(15,"button",35),e._UZ(16,"mat-icon",36),e.qZA(),e.TgZ(17,"button",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteProductService(s))}),e._UZ(18,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.type," "),e.xp6(2),e.hij(" ",t.uomId.abbr," "),e.xp6(2),e.hij(" ",e.xi3(10,9,t.cost,e.VKq(12,me,t.currency+" "))," "),e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink",e.VKq(14,me,t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Dt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ft,19,16,"ng-container",29),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const Jt=function(o){return{"pointer-events-none":o}},Pt=function(){return[10,25,50,100]};function Nt(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",25),e._uU(6," Tipo "),e.qZA(),e.TgZ(7,"div",26),e._uU(8," U.Medida "),e.qZA(),e.TgZ(9,"div",25),e._uU(10," Costo "),e.qZA(),e.TgZ(11,"div",27),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",26),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,Dt,2,2,"ng-container",20),e.ALo(16,"async"),e._UZ(17,"mat-paginator",28),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","type"),e.xp6(4),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,11,t.productServices$)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Jt,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,Pt))("showFirstLastButtons",!0)}}function Mt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Nt,18,16,"ng-container",22),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(34);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Rt(o,i){1&o&&(e.TgZ(0,"div",40),e._uU(1,"No ha creado ning\xfan producto o servicio a\xfan!"),e.qZA())}const Yt=function(){return["new"]},Et=[{path:"goods",component:(()=>{class o{constructor(t,n,r,s,c,u){this._changeDetectorRef=t,this._fuseConfirmationService=n,this._productServiceService=r,this._snackBar=s,this.dialog=c,this.store=u,this.merchantId="",this.productService=new tt,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new a.NI,this._unsubscribeAll=new b.x}ngOnInit(){this.productServices$=this.store.select(ce.ZQ),this.store.select(z.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._productServiceService.getProductServices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,J.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createProductService(){this._openDialog(this.productService,"add")}editProductService(t){this._openDialog(t,"edit")}deleteProductService(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar el departamento ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._productServiceService.deleteProductService(t._id,this.pagination.page,this.pagination.size,"active","desc").subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,n){return n.id||t}_openDialog(t,n){this.dialog.open(Ut,{width:"600px",height:"98%",data:{productService:t,dialogMode:n},panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(q.R),e.Y36(Y.z),e.Y36(w.ux),e.Y36(y.uw),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["commercial-productServices"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.NW,5),e.Gf(h.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:35,vars:10,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto","overflow-x-auto","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"routerLink"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","overflow-x-auto"],[4,"ngIf"],["noProductServices",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","productServices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","productServices-table","md:px-8"],[1,"truncate"],[1,"truncate","text-center"],[1,""],[1,"flex","flex-col","justify-center","gap-2","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Productos y Servicios"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Productos y Servicios "),e.qZA()()(),e.TgZ(24,"div",14)(25,"button",15),e._UZ(26,"mat-icon",16),e.TgZ(27,"span",17),e._uU(28,"Nuevo"),e.qZA()()()(),e.TgZ(29,"div",18)(30,"div",19),e.YNc(31,Mt,2,2,"ng-container",20),e.ALo(32,"async"),e.YNc(33,Rt,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(7),e.Q6J("routerLink",e.DdM(9,Yt)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(32,7,n.productServices$)))},dependencies:[p.rH,p.yS,m.mk,m.sg,m.O5,S.PQ,k.lW,C.Hw,I.NW,h.YE,h.nU,m.Ov,m.H9],encapsulation:2,data:{animation:B.L},changeDetection:0}),o})(),resolve:{prodS:(()=>{class o{constructor(t){this._productServicesService=t}resolve(t,n){return this._productServicesService.getProductServices()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Y.z))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}},{path:"goods/:goodsId",component:et,resolve:{uoms:re,prod:(()=>{class o{constructor(t){this._productServicesService=t}resolve(t,n){const r=t.params.goodsId;if("new"!==r)return this._productServicesService.getProductServiceById(r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Y.z))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];let Lt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(Et),G.m]}),o})();var Bt=l(9602);let zt=(()=>{class o{constructor(t,n,r){this._activatedRoute=t,this._changeDetectorRef=n,this._router=r,this.merchantId="",this._unsubscribeAll=new b.x}ngOnInit(){this._activatedRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(({merchantId:t})=>{void 0!==t&&(this.merchantId=t,this._changeDetectorRef.markForCheck())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(e.sBO),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-commercial"]],decls:38,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-2","lg:grid-cols-4","gap-y-12","sm:gap-x-4"],["routerLink","/modules/commercial/goods",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["routerLink","/modules/commercial/uoms",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Gesti\xf3n Gesti\xf3n Comercial "),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",12),e._uU(24," M\xf3dulos "),e.qZA(),e.TgZ(25,"div",16)(26,"fuse-card",17)(27,"div",18)(28,"div",19),e._uU(29,"Productos y Servicios"),e.qZA(),e.TgZ(30,"div",20),e._uU(31,"listado productos y servicios "),e.qZA()()(),e.TgZ(32,"fuse-card",21)(33,"div",18)(34,"div",19),e._uU(35,"Unidades de medida"),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"listado de unidades de medida"),e.qZA()()()()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"))},dependencies:[p.rH,p.yS,Bt.y,S.PQ,C.Hw],encapsulation:2,changeDetection:0}),o})();const de=o=>o.paymentMethods,ue=((0,g.P1)(de,o=>o.paymentMethod),(0,g.P1)(de,o=>o.paymentMethods));class pe{}var oe=l(8721),ne=l(7238);function Ot(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1," Agregar forma de pago"),e.qZA())}function Gt(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Editar forma de pago "),e.qZA())}function jt(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del forma de pago"),e.qZA())}function $t(o,i){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(8),e.Oqu(t.data.paymentMethod.name||"Sin nombre")}}function Ht(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function Kt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre debe contener entre 3 y 255 caracteres. "),e.qZA())}function Vt(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Porciento"),e.qZA())}function Wt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El porciento es obligatorio "),e.qZA())}function Xt(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de este campo debe estar entre 0 y 100 "),e.qZA())}function eo(o,i){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.get("percent").getError("outOfRange")," ")}}function to(o,i){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Descripci\xf3n"),e.qZA())}function oo(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n es obligatoria "),e.qZA())}function no(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n debe contener entre 3 y 1000 caracteres. "),e.qZA())}function io(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35)(2,"button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,s=e.oxw(2);return e.KtG(s.removeTermField(r))}),e._UZ(3,"mat-icon",23),e.qZA()(),e.BQk()}2&o&&(e.xp6(3),e.Q6J("svgIcon","heroicons_solid:trash"))}function ro(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28)(2,"mat-form-field",29),e.YNc(3,Vt,2,0,"mat-label",6),e.TgZ(4,"span",30),e._uU(5,"%"),e.qZA(),e.TgZ(6,"input",31),e.NdJ("blur",function(r){const c=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.checkOutOfRange(r.target.value,c))}),e.qZA(),e.YNc(7,Wt,2,0,"mat-error",6),e.YNc(8,Xt,2,0,"mat-error",6),e.YNc(9,eo,2,1,"mat-error",6),e.qZA(),e.TgZ(10,"mat-form-field",32),e.YNc(11,to,2,0,"mat-label",6),e._UZ(12,"mat-icon",33)(13,"textarea",34),e.YNc(14,oo,2,0,"mat-error",6),e.YNc(15,no,2,0,"mat-error",6),e.qZA(),e.YNc(16,io,4,1,"ng-container",6),e.qZA(),e.BQk()}if(2&o){const t=i.$implicit,n=i.first,r=i.last;e.xp6(3),e.Q6J("ngIf",n),e.xp6(3),e.Q6J("formControl",t.get("percent"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.get("percent").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("percent").hasError("min")||t.get("percent").hasError("max")),e.xp6(1),e.Q6J("ngIf",t.get("percent").hasError("outOfRange")),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControl",t.get("description"))("placeholder","Descripci\xf3n")("minLength",3)("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",t.get("description").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("description").hasError("maxlength")||t.get("description").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!(n&&r))}}function ao(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",9)(2,"form",16)(3,"div",17)(4,"mat-form-field",18)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",19),e.YNc(8,Ht,2,0,"mat-error",6),e.YNc(9,Kt,2,0,"mat-error",6),e.qZA()(),e.TgZ(10,"div",20)(11,"div",20),e.YNc(12,ro,17,15,"ng-container",21),e.qZA(),e.TgZ(13,"div",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addTermField())}),e._UZ(14,"mat-icon",23),e.TgZ(15,"span",24),e._uU(16,"Agregar t\xe9rmino"),e.qZA()()(),e.TgZ(17,"div",25)(18,"span",26),e._uU(19,"Estado"),e.qZA(),e.TgZ(20,"mat-slide-toggle",27),e._uU(21),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.paymentMethodForm)("autocomplete","off"),e.xp6(5),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del forma de pago"),e.xp6(1),e.Q6J("ngIf",t.paymentMethodForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.paymentMethodForm.get("name").hasError("maxlength")||t.paymentMethodForm.get("name").hasError("minlength")),e.xp6(3),e.Q6J("ngForOf",t.paymentMethodForm.get("terms").controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(6),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.paymentMethodForm.get("active").value?"Activo":"Inactivo"," ")}}const ge=function(o){return{"cursor-not-allowed":o}};function so(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updatePaymentMethod())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.paymentMethodForm.invalid||100!==t.totalPercent)("ngClass",e.VKq(4,ge,t.paymentMethodForm.invalid||100!==t.totalPercent))}}function co(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createPaymentMethod())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("matDialogClose","confirmed")("disabled",t.paymentMethodForm.invalid||100!==t.totalPercent)("ngClass",e.VKq(4,ge,t.paymentMethodForm.invalid||100!==t.totalPercent))}}function lo(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",37),e.ynx(2),e.TgZ(3,"button",38),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,so,3,6,"ng-container",6),e.YNc(6,co,3,6,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let mo=(()=>{class o{constructor(t,n,r,s,c,u,Z){this.data=t,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=s,this._paymentMethodsService=c,this._snackBar=u,this.store=Z,this.paymentMethod=new pe,this.dialogMode="view",this.merchants=[],this.selectedMerchant$=null,this.user=null,this.user$=(0,Q.of)(null),this.totalPercent=0,this._unsubscribeAll=new b.x}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(V.Qs).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.currentMerchant=t}),this.paymentMethodForm=this._formBuilder.group({_id:[""],active:[!0,[a.kI.required]],userId:[this.user._id,[a.kI.required]],merchantId:[this.currentMerchant._id,[a.kI.required]],name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],terms:this._formBuilder.array([])}),"edit"===this.data.dialogMode&&(this.paymentMethodForm.patchValue(this.data.paymentMethod),this.paymentMethodForm.get("merchantId").setValue(this.data.paymentMethod.merchantId._id)),this.setTermsDataOnForm()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addTermField(){const t=this._formBuilder.group({percent:[0,[a.kI.required,a.kI.min(0),a.kI.max(100)]],description:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(1e3)]]}),n=this.paymentMethodForm.get("terms");n.length<=6&&n.push(t),this._changeDetectorRef.markForCheck()}removeTermField(t){this.paymentMethodForm.get("terms").removeAt(t),this.totalPercent=this.paymentMethodForm.get("terms").getRawValue().map(r=>r.percent).reduce((r,s)=>r+s,0),this._changeDetectorRef.markForCheck()}createPaymentMethod(){if(100!==this.totalPercent||this.paymentMethodForm.invalid)return;let t=this.paymentMethodForm.getRawValue();t=(0,te.Z)(t,"_id"),t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Crear Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._paymentMethodsService.createPaymentMethod(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updatePaymentMethod(){if(100!==this.totalPercent||this.paymentMethodForm.invalid)return;const t=this.paymentMethodForm.getRawValue();t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._paymentMethodsService.updatePaymentMethod(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}checkOutOfRange(t,n){if(+t<=100){const r=this.paymentMethodForm.get("terms").getRawValue().map(c=>c.percent).reduce((c,u)=>c+u,0),s=this.paymentMethodForm.get("terms").controls;r<=100&&s.forEach(c=>{c.get("percent").hasError("outOfRange")&&c.get("percent").setErrors(null)}),r>100&&s.at(n).get("percent").setErrors({outOfRange:"La suma del % de todos los t\xe9rminos no debe superar a 100"}),this.totalPercent=r}}trackByFn(t,n){return n.id||t}setTermsDataOnForm(){if("add"===this.data.dialogMode)return void this.addTermField();const t=[];this.data.paymentMethod.terms.length>0?this.data.paymentMethod.terms.forEach(n=>{t.push(this._formBuilder.group({percent:[n.percent,[a.kI.required,a.kI.min(0),a.kI.max(100)]],description:[n.description,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]]}))}):t.push(this._formBuilder.group({percent:[0,[a.kI.required,a.kI.min(0),a.kI.max(100)]],description:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]]})),t.forEach(n=>{this.paymentMethodForm.get("terms").push(n)}),this.totalPercent=this.paymentMethodForm.get("terms").getRawValue().map(n=>n.percent).reduce((n,r)=>n+r,0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.WI),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(q.R),e.Y36(oe.o),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["paymentMethods-detail"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"pt-5"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","-ml-4","mt-2","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","flex-col","mt-6"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"flex","flex-col","mt-3","sm:flex-row"],[1,"flex-auto","mt-2","sm:max-w-[20%]"],["matPrefix",""],["matInput","","type","number","min","0","max","100","required","",3,"formControl","spellcheck","blur"],[1,"flex-auto","w-full","mt-2","sm:ml-4","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","sm:items-center","mb-2","self-end","w-10","sm:pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Ot,2,0,"h2",2),e.YNc(4,Gt,2,0,"h2",2),e.YNc(5,jt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,$t,9,1,"div",4),e.BQk(),e.ynx(9),e.YNc(10,ao,22,15,"div",5),e.BQk(),e.qZA(),e.YNc(11,lo,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===n.data.paymentMethod._id&&"add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.paymentMethod._id&&"edit"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.paymentMethod._id&&"view"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===n.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[m.mk,m.sg,m.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.wO,a.nD,a.qQ,a.Fd,a.oH,a.sg,a.u,k.lW,y.ZT,C.Hw,_.TO,_.KE,_.hX,_.qo,E.Nt,ee.Rr,ne.gM],encapsulation:2,changeDetection:0}),o})();function uo(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",35),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function po(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",36),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function go(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",26),e.YNc(5,uo,2,1,"ng-container",27),e.YNc(6,po,2,1,"ng-container",27),e.qZA(),e.TgZ(7,"div",32)(8,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.editPaymentMethod(s))}),e._UZ(9,"mat-icon",34),e.qZA(),e.TgZ(10,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deletePaymentMethod(s._id))}),e._UZ(11,"mat-icon",34),e.qZA()()(),e.BQk()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function _o(o,i){if(1&o&&(e.ynx(0),e.YNc(1,go,12,5,"ng-container",29),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const fo=function(o){return{"pointer-events-none":o}},ho=function(){return[10,25,50,100]};function xo(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div",24),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",25),e._uU(6," Activo "),e.qZA(),e.TgZ(7,"div",26),e._uU(8," Acciones "),e.qZA()(),e.YNc(9,_o,2,2,"ng-container",27),e.ALo(10,"async"),e._UZ(11,"mat-paginator",28),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name")("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(10,10,t.paymentMethods$)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,fo,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(14,ho))("showFirstLastButtons",!0)}}function vo(o,i){if(1&o&&(e.ynx(0),e.YNc(1,xo,12,15,"ng-container",20),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(34);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Zo(o,i){1&o&&(e.TgZ(0,"div",37),e._uU(1,"No ha creado ninguna forma de pago a\xfan!"),e.qZA())}let bo=(()=>{class o{constructor(t,n,r,s,c,u){this._changeDetectorRef=t,this._paymentMethodService=n,this._dialog=r,this._fuseConfirmationService=s,this._snackBar=c,this.store=u,this.merchantId="",this.paymentMethods$=(0,Q.of)([]),this.paymentMethod=new pe,this.isLoading=!1,this._unsubscribeAll=new b.x}ngOnInit(){this.paymentMethods$=this.store.select(ue),this.store.select(z.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._paymentMethodService.getPaymentMethods(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,J.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createPaymentMethod(){this._openDialog(this.paymentMethod,"add")}editPaymentMethod(t){this._openDialog(t,"edit")}deletePaymentMethod(t){this._fuseConfirmationService.open({title:"Eliminar Forma de pago",message:"\xbfEsta seguro que desea Eliminar el Forma de pago? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._paymentMethodService.deletePaymentMethod(t,this.pagination.page,this.pagination.size,"active","desc").subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(t,n){return n.id||t}_openDialog(t,n){this._dialog.open(mo,{data:{paymentMethod:t,dialogMode:n},panelClass:"ath-payment-method-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(oe.o),e.Y36(y.uw),e.Y36(q.R),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["commercial-paymentMethods"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.NW,5),e.Gf(h.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:35,vars:9,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto","overflow-x-auto","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[4,"ngIf","ngIfElse"],["noPaymentMethods",""],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","payment-methods-table"],[3,"mat-sort-header"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"text-center"],[4,"ngIf"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","payment-methods-table"],[1,"truncate"],[1,"flex","flex-col","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Formas de pago"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Listado de Formas de Pago "),e.qZA()()(),e.TgZ(24,"div",14)(25,"button",15),e.NdJ("click",function(){return n.createPaymentMethod()}),e._UZ(26,"mat-icon",16),e.TgZ(27,"span",17),e._uU(28,"Nuevo"),e.qZA()()()(),e.TgZ(29,"div",18)(30,"div",19),e.YNc(31,vo,2,2,"ng-container",20),e.ALo(32,"async"),e.YNc(33,Zo,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t){const r=e.MAs(34);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(32,7,n.paymentMethods$))("ngIfElse",r)}},dependencies:[p.yS,m.mk,m.sg,m.O5,S.PQ,k.lW,C.Hw,I.NW,h.YE,h.nU,m.Ov],encapsulation:2,data:{animation:B.L},changeDetection:0}),o})(),Co=(()=>{class o{constructor(t){this._paymentMethodsService=t}resolve(t,n){return this._paymentMethodsService.getPaymentMethods(0,20,"name","asc","")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(oe.o))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var yo=l(5453);const To=function(){return["../"]};let qo=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["quotation-details-header"]],decls:28,vars:6,consts:[["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Ofertas"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13)(23,"span"),e._uU(24,"Detalles de la oferta"),e.qZA()()()(),e._UZ(25,"div",14),e.qZA(),e.TgZ(26,"div",15),e._UZ(27,"quotation-details"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("routerLink",e.DdM(5,To)),e.xp6(3),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"))},dependencies:[p.yS,S.PQ,C.Hw,yo.i],encapsulation:2,changeDetection:0}),o})();var Io=l(6861),_e=l(3294),fe=l(7871);const Ao=function(){return["CUP "]},ko=function(o){return[o]};function Qo(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",27)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div",28),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"div",28),e._uU(10),e.qZA(),e.TgZ(11,"div",29),e._uU(12),e.qZA(),e.TgZ(13,"div",30)(14,"button",31),e._UZ(15,"mat-icon",32),e.qZA(),e.TgZ(16,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteQuotation(s))}),e._UZ(17,"mat-icon",32),e.qZA()()(),e.BQk()}if(2&o){const t=i.$implicit,n=e.oxw(4);e.xp6(3),e.hij(" ",t.no," "),e.xp6(2),e.hij(" ",t.requestNo," "),e.xp6(2),e.hij(" ",e.xi3(8,10,n.getTotalAmount(t),e.DdM(13,Ao))," "),e.xp6(3),e.hij(" ",t.goodsData.length," "),e.xp6(1),e.Q6J("matTooltip","Rechazada"===t.status?"Motivo: "+t.rejectedReason:""),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("routerLink",e.VKq(14,ko,t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:eye"),e.xp6(1),e.Q6J("matTooltip","Eliminar"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash")}}function Uo(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Qo,18,16,"ng-container",26),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const wo=function(o){return{"pointer-events-none":o}},So=function(){return[10,25,50,100]};function Fo(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",20)(2,"div",21)(3,"div",22),e._uU(4," N\xfamero "),e.qZA(),e.TgZ(5,"div",22),e._uU(6," N.Solicitud "),e.qZA(),e.TgZ(7,"div",23),e._uU(8," Importe "),e.qZA(),e.TgZ(9,"div",23),e._uU(10," Cantidad "),e.qZA(),e.TgZ(11,"div",24),e._uU(12," Estado "),e.qZA(),e.TgZ(13,"div",23),e._uU(14," Accion "),e.qZA()(),e.YNc(15,Uo,2,2,"ng-container",17),e.ALo(16,"async"),e._UZ(17,"mat-paginator",25),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","no"),e.xp6(2),e.Q6J("mat-sort-header","requestNo"),e.xp6(6),e.Q6J("mat-sort-header","status"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,10,t.quotations$)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,wo,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(14,So))("showFirstLastButtons",!0)}}function Do(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Fo,18,15,"ng-container",19),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Jo(o,i){1&o&&(e.TgZ(0,"div",34),e._uU(1,"No ha creado ninguna oferta a\xfan!"),e.qZA())}let Po=(()=>{class o{constructor(t,n,r,s,c,u){this._changeDetectorRef=t,this._dialog=n,this._fuseConfirmationService=r,this._quotationService=s,this._snackBar=c,this.store=u,this.isLoading=!1,this.searchInputControl=new a.NI,this._unsubscribeAll=new b.x}ngOnInit(){this.quotations$=this.store.select(Io.uy),this.store.select(z.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._quotationService.getQuotations(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,J.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteQuotation(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar la solicitud # ${t.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._quotationService.deleteQuotation(t._id,this.pagination.page,this.pagination.size,"createdAt","desc").subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectQuotation(t){this._dialog.open(_e.g,{data:{title:"Rechazar Solicitud",message:`\xbfEst\xe1 seguro desea Rechazar la solicitud # ${t.no}?`,rejectedReason:t.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{void 0!==r&&this._quotationService.rejectQuotation(t._id,r.reason).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})}getTotalAmount(t){return t.goodsData.map(n=>n.quantity).reduce((n,r)=>n+r,0)}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(y.uw),e.Y36(q.R),e.Y36(fe.D),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["commercial-quotations"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.NW,5),e.Gf(h.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:31,vars:7,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto","overflow-x-auto","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","overflow-x-auto"],[4,"ngIf"],["noQuotations",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","quotations-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","quotations-table","md:px-8"],[1,"truncate","text-center"],[1,"text-center","mr-4",3,"matTooltip"],[1,"flex","flex-col","justify-center","gap-2","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Ofertas"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Ofertas "),e.qZA()()(),e._UZ(24,"div",14),e.qZA(),e.TgZ(25,"div",15)(26,"div",16),e.YNc(27,Do,2,2,"ng-container",17),e.ALo(28,"async"),e.YNc(29,Jo,2,0,"ng-template",null,18,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(9),e.Q6J("ngIf",e.lcZ(28,5,n.quotations$)))},dependencies:[m.mk,m.sg,m.O5,p.rH,p.yS,S.PQ,k.lW,C.Hw,I.NW,h.YE,h.nU,ne.gM,m.Ov,m.H9],encapsulation:2,data:{animation:B.L},changeDetection:0}),o})();var he=l(9641),No=l(2627);let Mo=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["request-details-header"]],decls:28,vars:4,consts:[["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/commercial/request",1,"ml-1","text-primary-500","hover:underline"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Solicitudes"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13)(23,"span"),e._uU(24,"Detalles de la solicitud"),e.qZA()()()(),e._UZ(25,"div",14),e.qZA(),e.TgZ(26,"div",15),e._UZ(27,"request-details"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"))},dependencies:[p.yS,S.PQ,C.Hw,No.d],encapsulation:2,changeDetection:0}),o})();var Ro=l(4899),xe=l(2440),Yo=l(2454),ve=l(7205),x=l(8279);function Eo(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",28),e._uU(2),e.qZA(),e.BQk()),2&o){const t=i.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("value",n.transformPaymentMethod(t)),e.xp6(1),e.hij(" ",t.name," ")}}function Lo(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El m\xe9todo de pago es obligatoria. "),e.qZA())}function Bo(o,i){if(1&o&&(e.TgZ(0,"mat-form-field",25)(1,"mat-label"),e._uU(2,"M\xe9todo de pago"),e.qZA(),e.TgZ(3,"mat-select",26),e.YNc(4,Eo,3,2,"ng-container",27),e.qZA(),e.YNc(5,Lo,2,0,"mat-error",8),e.qZA()),2&o){const t=i.ngIf,n=e.oxw();e.xp6(3),e.Q6J("formControlName","paymentMethodData"),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",n.quotationForm.get("paymentMethodData").hasError("required"))}}function zo(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria es obligatoria. Debe registrar la cuenta bancaria en su negocio. "),e.qZA())}function Oo(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cuenta bancaria debe superar los 15 caracteres. "),e.qZA())}function Go(o,i){1&o&&(e.TgZ(0,"mat-error",29),e._uU(1," La cuenta bancaria es obligatoria. Debe registrar la cuenta bancaria en su negocio. "),e.qZA())}const jo=function(o){return{"text-center pl-8  md:pl-0":o}};function $o(o,i){if(1&o&&(e.TgZ(0,"th",34),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,jo,"name"!==t)),e.xp6(1),e.hij(" ",n.getFieldsTableHeaderNames(t)," ")}}const Ho=function(o){return{"text-center":o}};function Ko(o,i){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=i.$implicit,n=e.oxw(2).$implicit;e.Q6J("ngClass",e.VKq(2,Ho,"name"!==n)),e.xp6(1),e.hij(" ",t[n]," ")}}function Vo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"Total"),e.qZA())}const Wo=function(o,i){return{"text-center":o,truncate:i}};function Xo(o,i){if(1&o&&(e.TgZ(0,"td",36),e.YNc(1,Vo,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.Q6J("ngClass",e.WLB(2,Wo,"name"!==t,"name"===t)),e.xp6(1),e.Q6J("ngIf","name"===t)}}function en(o,i){1&o&&(e.TgZ(0,"div"),e.YNc(1,$o,2,4,"th",31),e.YNc(2,Ko,2,4,"td",32),e.YNc(3,Xo,2,5,"td",33),e.qZA())}function tn(o,i){if(1&o&&(e.TgZ(0,"th",40),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getFieldsTableHeaderNames(t)," ")}}function on(o,i){if(1&o&&(e.TgZ(0,"span",45),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t[n],"")}}function nn(o,i){if(1&o&&(e.TgZ(0,"div",46)(1,"mat-form-field",6),e._UZ(2,"input",47),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("formControl",n.amountFormControl)("min",0)("max",n.getOldGoodsAmountById(t.goodsId))}}function rn(o,i){if(1&o&&(e.TgZ(0,"td",41)(1,"div",42),e.YNc(2,on,2,1,"span",43),e.YNc(3,nn,3,3,"div",44),e.qZA()()),2&o){const t=i.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!n.selectedGoodDataToEdit||t.goodsId!==(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)),e.xp6(1),e.Q6J("ngIf",n.selectedGoodDataToEdit&&t.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId))}}function an(o,i){1&o&&e._UZ(0,"td",48)}function sn(o,i){1&o&&(e.TgZ(0,"div"),e.YNc(1,tn,2,1,"th",37),e.YNc(2,rn,4,2,"td",38),e.YNc(3,an,1,0,"td",39),e.qZA())}function cn(o,i){1&o&&(e.TgZ(0,"th",51),e._uU(1," Acciones "),e.qZA())}function ln(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.operation(r.goodsId,-1))}),e._UZ(1,"mat-icon",57),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("disabled",0===t.amount),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:minus-sm")}}function mn(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.operation(r.goodsId,1))}),e._UZ(1,"mat-icon",57),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("disabled",t.amount===n.getOldGoodsAmountById(t.goodsId)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-sm")}}function dn(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.toggleToEditGoods(r))}),e._UZ(1,"mat-icon",57),e.qZA()}2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil-alt"))}function un(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.toggleToEditGoods(r))}),e._UZ(1,"mat-icon",57),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("color","primary")("disabled",n.selectedGoodDataToEdit&&t.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)&&n.amountFormControl.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil-alt")}}function pn(o,i){if(1&o&&(e.TgZ(0,"td",41)(1,"div",52),e.YNc(2,ln,2,2,"button",53),e.YNc(3,mn,2,2,"button",53),e.YNc(4,dn,2,1,"button",54),e.YNc(5,un,2,3,"button",55),e.qZA()()),2&o){const t=i.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!n.selectedGoodDataToEdit||t.goodsId!==(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)),e.xp6(1),e.Q6J("ngIf",!n.selectedGoodDataToEdit||t.goodsId!==(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)),e.xp6(1),e.Q6J("ngIf",!n.selectedGoodDataToEdit||t.goodsId!==(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)),e.xp6(1),e.Q6J("ngIf",n.selectedGoodDataToEdit&&t.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId))}}const gn=function(){return["CUP "]};function _n(o,i){if(1&o&&(e.TgZ(0,"td",60),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,t.getTotalQuantity(),e.DdM(4,gn))," ")}}function fn(o,i){1&o&&(e.TgZ(0,"div"),e.YNc(1,cn,2,0,"th",49),e.YNc(2,pn,6,4,"td",38),e.YNc(3,_n,3,5,"td",50),e.qZA())}function hn(o,i){if(1&o&&(e.ynx(0,30),e.YNc(1,en,4,0,"div",8),e.YNc(2,sn,4,0,"div",8),e.YNc(3,fn,4,0,"div",8),e.BQk()),2&o){const t=i.$implicit;e.s9C("matColumnDef",t),e.xp6(1),e.Q6J("ngIf","actions"!==t&&"amount"!==t),e.xp6(1),e.Q6J("ngIf","amount"===t),e.xp6(1),e.Q6J("ngIf","actions"===t)}}function xn(o,i){1&o&&e._UZ(0,"tr",61)}function vn(o,i){1&o&&e._UZ(0,"tr",62)}function Zn(o,i){1&o&&e._UZ(0,"tr",63)}const bn=function(o){return{"cursor-not-allowed":o}};let Cn=(()=>{class o{constructor(t,n,r,s,c,u,Z){this._changeDetectorRef=t,this._router=n,this._formBuilder=r,this._fuseConfirmationService=s,this._quotationsService=c,this._snackBar=u,this.store=Z,this.selectedRequest=null,this.reject=new e.vpe,this.isQuotationCreated=new e.vpe,this.user$=(0,Q.of)(null),this.selectedGoodDataToEdit=null,this.amountFormControl=new a.NI(0),this.paymentMethods$=(0,Q.of)(null),this.displayedColumns=["name","type","uom","amount","price","quantity","actions"],this._unsubscribeAll=new b.x,this.amountFormControl.setValidators([a.kI.required])}ngOnInit(){this.goodsData=(0,se.cloneDeep)(this.selectedRequest.goodsData),this.user$=this.store.select(M.rk),this.user$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.paymentMethods$=this.store.select(ue),this.quotationForm=this._formBuilder.group({merchantId:[this.selectedRequest.merchantId._id,[a.kI.required]],userId:[this.user._id,[a.kI.required]],requestId:[this.selectedRequest._id,[a.kI.required]],requestNo:[{disabled:!0,value:this.selectedRequest.no},[a.kI.required]],bankAccount:[{disabled:!0,value:this.selectedRequest.merchantId.bankAccount},[a.kI.required,a.kI.minLength(16),a.kI.maxLength(24)]],status:[ve.qm.Nueva,[a.kI.required]],description:["",[a.kI.maxLength(1e3)]],paymentMethodData:[null,[a.kI.required]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createQuotation(){let t=this.quotationForm.getRawValue();t=Object.assign(Object.assign({},t),{goodsData:this.goodsData}),this._fuseConfirmationService.open({title:"Crear Oferta",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._quotationsService.createQuotation(t).subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.isQuotationCreated.next(this.selectedRequest)}),this._changeDetectorRef.markForCheck()})}transformPaymentMethod(t){return new ve.R8(t)}getTotalQuantity(){return this.goodsData.map(t=>t.quantity).reduce((t,n)=>t+n,0)}getFieldsTableHeaderNames(t){switch(t){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}operation(t,n){const r=this.goodsData.find(s=>s.goodsId===t);r.amount=r.amount+n,r.quantity=r.amount*r.price}getOldGoodsAmountById(t){return this.selectedRequest.goodsData.find(n=>n.goodsId===t).amount}toggleToEditGoods(t){if(this.selectedGoodDataToEdit&&this.selectedGoodDataToEdit.goodsId===t.goodsId){const r=this.amountFormControl.value;this.amountFormControl.clearValidators();const s=this.goodsData.find(c=>c.goodsId===t.goodsId);return s.amount=r,s.quantity=s.amount*s.price,this.amountFormControl.clearValidators(),void(this.selectedGoodDataToEdit=null)}const n=this.selectedRequest.goodsData.find(r=>r.goodsId===t.goodsId);this.amountFormControl.setValidators([a.kI.required,a.kI.min(0),a.kI.max(n.amount)]),this.amountFormControl.setValue(t.amount),this.selectedGoodDataToEdit=t}triggerReject(){this.reject.next(this.selectedRequest)}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.F0),e.Y36(a.qu),e.Y36(q.R),e.Y36(fe.D),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["quotation-conform"]],inputs:{selectedRequest:"selectedRequest"},outputs:{reject:"reject",isQuotationCreated:"isQuotationCreated"},decls:35,vars:27,consts:[[1,"shadow-lg","overflow-hidden"],[1,"flex","flex-col","justify-between","order-b"],[1,"p-4","sm:p-10","flex","flex-col","space-y-1","w-full"],[1,"grid","w-full","sm:grid-cols-4","gap-y-1","gap-x-6",3,"formGroup"],[1,"sm:col-span-1"],["class","w-full",4,"ngIf"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","required","",3,"type","formControlName","minLength","maxLength"],[4,"ngIf"],["class","text-sm mb-2",4,"ngIf"],[1,"sm:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",1,"h-4","min-h-4","max-h-20",3,"formControlName","rows","spellcheck","maxlength"],[1,"flex","flex-col","sm:col-span-4"],[1,"font-medium"],["tabindex","0",1,"mt-2","overflow-auto","max-h-80","rounded-md",2,"box-shadow","0 0 3px 0 rgb(0 0 0 / 10%), 0 1px 2px -1px rgb(0 0 0 / 10%) !important"],["mat-table","",1,"w-full",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium",4,"matFooterRowDef"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],["mat-flat-button","",3,"color","disabled","ngClass","click"],[1,"w-full"],["required","",3,"formControlName"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-sm","mb-2"],[3,"matColumnDef"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-footer-cell","",3,"ngClass",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0",3,"ngClass"],["mat-cell","",3,"ngClass"],["mat-footer-cell","",3,"ngClass"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0 text-center pl-8  md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0","text-center","pl-8","md:pl-0"],["mat-cell","",1,"text-center"],[1,"flex","justify-center"],["class","w-26",4,"ngIf"],["class","w-24",4,"ngIf"],[1,"w-26"],[1,"w-24"],["type","number","matInput","","required","",3,"formControl","min","max"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","text-center pr-8 pl-8 md:pr-6 md:pl-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"text-center","pr-8","pl-8","md:pr-6","md:pl-0"],[1,"flex","justify-center","space-x-2"],["class","min-w-10 min-h-7 h-7 px-2 leading-6","mat-button","",3,"disabled","click",4,"ngIf"],["class","min-w-10 min-h-7 h-7 px-2 leading-6","mat-button","",3,"click",4,"ngIf"],["class","min-h-7 h-7 px-2 leading-6","mat-flat-button","",3,"color","disabled","click",4,"ngIf"],["mat-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],["mat-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["mat-flat-button","",1,"min-h-7","h-7","px-2","leading-6",3,"color","disabled","click"],["mat-footer-cell","",1,"text-end"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",1,"font-medium"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),e.YNc(5,Bo,6,3,"mat-form-field",5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"div",4)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Cuenta bancaria"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,zo,2,0,"mat-error",8),e.YNc(13,Oo,2,0,"mat-error",8),e.qZA(),e.YNc(14,Go,2,0,"mat-error",9),e.qZA(),e.TgZ(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),e._uU(18,"Descripci\xf3n"),e.qZA(),e._UZ(19,"mat-icon",12)(20,"textarea",13),e.qZA()()(),e.TgZ(21,"div",14)(22,"mat-label",15),e._uU(23,"Productos y servicios"),e.qZA(),e.TgZ(24,"div",16)(25,"table",17),e.YNc(26,hn,4,4,"ng-container",18),e.YNc(27,xn,1,0,"tr",19),e.YNc(28,vn,1,0,"tr",20),e.YNc(29,Zn,1,0,"tr",21),e.qZA()()()(),e.TgZ(30,"div",22)(31,"button",23),e.NdJ("click",function(){return n.triggerReject()}),e._uU(32," Rechazar Solicitud "),e.qZA(),e.TgZ(33,"button",24),e.NdJ("click",function(){return n.createQuotation()}),e._uU(34," Conformar Oferta "),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.quotationForm),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,23,n.paymentMethods$)),e.xp6(6),e.Q6J("type","text")("formControlName","bankAccount")("minLength",16)("maxLength",24),e.xp6(1),e.Q6J("ngIf",n.quotationForm.get("bankAccount").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.quotationForm.get("bankAccount").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",!n.selectedRequest.merchantId.bankAccount),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3),e.xp6(5),e.Q6J("dataSource",n.goodsData),e.xp6(1),e.Q6J("ngForOf",n.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matFooterRowDef",n.displayedColumns),e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("color","primary")("disabled",n.quotationForm.invalid||n.amountFormControl.invalid||0===n.getTotalQuantity())("ngClass",e.VKq(25,bn,n.quotationForm.invalid||n.amountFormControl.invalid||0===n.getTotalQuantity())))},dependencies:[m.mk,m.sg,m.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.nD,a.qQ,a.Fd,a.oH,a.sg,a.u,$.ey,k.lW,C.Hw,_.TO,_.KE,_.hX,_.qo,E.Nt,X.gD,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.mD,x.Ke,x.ge,x.ev,x.yh,x.XQ,x.Gk,x.Q2,m.Ov,m.H9],encapsulation:2,changeDetection:0}),o})();function yn(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"quotation-conform",36),e.NdJ("reject",function(r){e.CHM(t);const s=e.oxw(5);return e.KtG(s.rejectRequest(r))})("isQuotationCreated",function(r){e.CHM(t);const s=e.oxw(5);return e.KtG(s.getRequestById(r))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("selectedRequest",t)}}const Tn=function(){return["CUP "]},qn=function(o){return[o]};function In(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",27)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",28),e._uU(5),e.qZA(),e.TgZ(6,"div",29),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"div",29),e._uU(10),e.qZA(),e.TgZ(11,"div",30),e._uU(12),e.qZA(),e.TgZ(13,"div",31)(14,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.toggleDetails(s))}),e._UZ(15,"mat-icon",33),e.qZA(),e.TgZ(16,"button",34),e._UZ(17,"mat-icon",33),e.qZA(),e.TgZ(18,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteRequest(s))}),e._UZ(19,"mat-icon",33),e.qZA()()(),e.TgZ(20,"div",20),e.YNc(21,yn,2,1,"ng-container",17),e.qZA(),e.BQk()}if(2&o){const t=i.$implicit,n=e.oxw(4);e.xp6(3),e.hij(" ",t.no," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.xi3(8,13,n.getTotalAmount(t),e.DdM(16,Tn))," "),e.xp6(3),e.hij(" ",t.goodsData.length," "),e.xp6(1),e.Q6J("matTooltip","Rechazada"===t.status?"Motivo: "+t.rejectedReason:""),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("disabled","Nueva"!==t.status),e.xp6(1),e.Q6J("svgIcon",(null==n.selectedRequest?null:n.selectedRequest._id)===t._id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(1),e.Q6J("routerLink",e.VKq(17,qn,t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:eye"),e.xp6(1),e.Q6J("matTooltip","Eliminar"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash"),e.xp6(2),e.Q6J("ngIf",(null==n.selectedRequest?null:n.selectedRequest._id)===t._id)}}function An(o,i){if(1&o&&(e.ynx(0),e.YNc(1,In,22,19,"ng-container",26),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const kn=function(o){return{"pointer-events-none":o}},Qn=function(){return[10,25,50,100]};function Un(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",20)(2,"div",21)(3,"div",22),e._uU(4," N\xfamero "),e.qZA(),e.TgZ(5,"div",22),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",23),e._uU(8," Importe "),e.qZA(),e.TgZ(9,"div",23),e._uU(10," Cantidad "),e.qZA(),e.TgZ(11,"div",24),e._uU(12," Estado "),e.qZA(),e.TgZ(13,"div",23),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,An,2,2,"ng-container",17),e.ALo(16,"async"),e._UZ(17,"mat-paginator",25),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","no"),e.xp6(2),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("mat-sort-header","status"),e.xp6(4),e.Q6J("ngIf",e.lcZ(16,10,t.requests$)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,kn,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(14,Qn))("showFirstLastButtons",!0)}}function wn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Un,18,15,"ng-container",19),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Sn(o,i){1&o&&(e.TgZ(0,"div",37),e._uU(1,"No ha creado ning\xfan producto o servicio a\xfan!"),e.qZA())}let Fn=(()=>{class o{constructor(t,n,r,s,c,u){this._changeDetectorRef=t,this._dialog=n,this._fuseConfirmationService=r,this._requestService=s,this._snackBar=c,this.store=u,this.isLoading=!1,this.searchInputControl=new a.NI,this._unsubscribeAll=new b.x}ngOnInit(){this.requests$=this.store.select(Ro.Mu),this.store.select(z.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._requestService.getRequests(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,J.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteRequest(t){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar la solicitud # ${t.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._requestService.deleteRequest(t._id,this.pagination.page,this.pagination.size,"createdAt","desc").subscribe(s=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectRequest(t){this._dialog.open(_e.g,{data:{title:"Rechazar Solicitud",message:`\xbfEst\xe1 seguro desea Rechazar la solicitud # ${t.no}?`,rejectedReason:t.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,d.R)(this._unsubscribeAll)).subscribe(r=>{void 0!==r&&this._requestService.rejectRequest(t._id,r.reason).subscribe(c=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this.closeDetails(),this._changeDetectorRef.markForCheck()})})}getRequestById(t){this._requestService.getRequestById(t._id).subscribe(n=>{this.store.dispatch((0,xe.WN)({request:n.request})),this.store.dispatch((0,xe._P)()),this.closeDetails(),this._changeDetectorRef.markForCheck()})}getTotalAmount(t){return t.goodsData.map(n=>n.quantity).reduce((n,r)=>n+r,0)}toggleDetails(t){this.selectedRequest&&this.selectedRequest._id===t._id?this.closeDetails():this.selectedRequest=t}closeDetails(){this.selectedRequest=null}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(y.uw),e.Y36(q.R),e.Y36(Yo.r),e.Y36(w.ux),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["hrm-requests"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.NW,5),e.Gf(h.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:31,vars:7,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto","overflow-x-auto","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","overflow-x-auto"],[4,"ngIf"],["noRequests",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","requests-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","requests-table","md:px-8"],[1,"truncate"],[1,"truncate","text-center"],[1,"text-center","mr-4",3,"matTooltip"],[1,"flex","justify-center","gap-2","flex-row"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","click"],[3,"selectedRequest","reject","isQuotationCreated"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Solicitudes"),e.qZA()()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12)(22,"div",13),e._uU(23," Solicitudes "),e.qZA()()(),e._UZ(24,"div",14),e.qZA(),e.TgZ(25,"div",15)(26,"div",16),e.YNc(27,wn,2,2,"ng-container",17),e.ALo(28,"async"),e.YNc(29,Sn,2,0,"ng-template",null,18,e.W1O),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(9),e.Q6J("ngIf",e.lcZ(28,5,n.requests$)))},dependencies:[p.rH,p.yS,m.mk,m.sg,m.O5,S.PQ,k.lW,C.Hw,I.NW,h.YE,h.nU,ne.gM,Cn,m.Ov,m.H9],encapsulation:2,data:{animation:B.L},changeDetection:0}),o})();var Ze=l(4290),Dn=l(8372);function Jn(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Unidad de Medida "),e.qZA())}function Pn(o,i){1&o&&(e.TgZ(0,"h2",7),e._uU(1," Editar Unidad de Medida "),e.qZA())}function Nn(o,i){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(8),e.Oqu(t.data.uom.name||"Sin nombre")}}function Mn(o,i){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Sigla"),e.qZA(),e._UZ(12,"input",20),e.qZA()(),e.TgZ(13,"div",18)(14,"mat-form-field",19)(15,"mat-label"),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"mat-select",21)(18,"mat-option",22),e._uU(19,"\xc1rea"),e.qZA(),e.TgZ(20,"mat-option",22),e._uU(21,"Conteo"),e.qZA(),e.TgZ(22,"mat-option",22),e._uU(23,"Energ\xeda"),e.qZA(),e.TgZ(24,"mat-option",22),e._uU(25,"Longitud"),e.qZA(),e.TgZ(26,"mat-option",22),e._uU(27,"Peso"),e.qZA(),e.TgZ(28,"mat-option",22),e._uU(29,"Volumen"),e.qZA(),e.TgZ(30,"mat-option",22),e._uU(31,"Tiempo"),e.qZA()()()(),e.TgZ(32,"div",23)(33,"span",24),e._uU(34,"Estado"),e.qZA(),e.TgZ(35,"mat-slide-toggle",25),e._uU(36),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.uomForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.xp6(5),e.Q6J("formControlName","abbr")("placeholder","Siglas"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","area"),e.xp6(2),e.Q6J("value","conteo"),e.xp6(2),e.Q6J("value","energ\xeda"),e.xp6(2),e.Q6J("value","longitud"),e.xp6(2),e.Q6J("value","peso"),e.xp6(2),e.Q6J("value","volumen"),e.xp6(2),e.Q6J("value","tiempo"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.uomForm.get("active").value?"Activo":"Inactivo"," ")}}function Rn(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateUom())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function Yn(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createUom())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function En(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",26),e.ynx(2),e.TgZ(3,"button",27),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Rn,3,3,"ng-container",6),e.YNc(6,Yn,3,3,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ln=(()=>{class o{constructor(t,n,r,s,c,u,Z){this.data=t,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=s,this._dialogRef=c,this._uomService=u,this.store=Z,this.dialogMode="view",this.user$=(0,Q.of)(null),this.user=null,this._unsubscribeAll=new b.x,this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.user$=this.store.select(M.rk),this.user$.subscribe(t=>this.user=t),this.uomForm=this._formBuilder.group({_id:[null],user:[this.user._id,[a.kI.required]],active:[!0,[a.kI.required]],name:[null,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],abbr:[null,[a.kI.required,a.kI.maxLength(255)]],type:[null,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();t.slug=new U.i(t.name).slug,t=(0,te.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._uomService.createUom(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();t.slug=new U.i(t.name).slug,this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._uomService.updateUom(t).pipe((0,d.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.WI),e.Y36(e.sBO),e.Y36(a.QS),e.Y36(q.R),e.Y36(y.so),e.Y36(N),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["stock-uom-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Jn,2,0,"h2",2),e.YNc(4,Pn,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Nn,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Mn,37,17,"div",5),e.BQk(),e.qZA(),e.YNc(10,En,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===n.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===n.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===n.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===n.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[m.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,$.ey,k.lW,y.ZT,_.KE,_.hX,E.Nt,X.gD,ee.Rr],encapsulation:2}),o})();const Bn={_id:null,active:null,userId:null,name:null,slug:null,abbr:null,type:null};function zn(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function On(o,i){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",39),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Gn(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",31)(2,"div",32),e._uU(3),e.qZA(),e.TgZ(4,"div",33)(5,"div",34),e._uU(6),e.qZA()(),e.TgZ(7,"div",33)(8,"div",34),e._uU(9),e.qZA()(),e.TgZ(10,"div",35),e.YNc(11,zn,2,1,"ng-container",20),e.YNc(12,On,2,1,"ng-container",20),e.qZA(),e.TgZ(13,"div")(14,"button",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.updateUom(s))}),e._UZ(15,"mat-icon",37),e.qZA()()(),e.BQk()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.abbr),e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function jn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Gn,16,6,"ng-container",30),e.BQk()),2&o){const t=i.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}const $n=function(){return[5,10,25,100]};function Hn(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Siglas "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",28),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12,"Detalles"),e.qZA()(),e.YNc(13,jn,2,2,"ng-container",20),e.ALo(14,"async"),e.qZA(),e._UZ(15,"mat-paginator",29),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","value"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,9,t.uoms$)),e.xp6(2),e.Q6J("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,$n))("showFirstLastButtons",!0)}}function Kn(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Hn,16,12,"ng-container",22),e.BQk()),2&o){const t=i.ngIf;e.oxw();const n=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",n)}}function Vn(o,i){1&o&&(e.TgZ(0,"div",40),e._uU(1,"\xa1No se ha creado ninguna unidad de medida!"),e.qZA())}const Wn=[{path:"",component:zt},{path:"uoms",component:(()=>{class o{constructor(t,n,r,s,c){this._changeDetectorRef=t,this._dialog=n,this._fuseConfirmationService=r,this._uomService=s,this.store=c,this.flashMessage=null,this.uoms$=(0,Q.of)([]),this.searchInputControl=new a.p4,this.isLoading=!1,this._unsubscribeAll=new b.x}ngOnInit(){this.uoms$=this.store.select(W),this.store.select(z.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,d.R)(this._unsubscribeAll),(0,Dn.b)(300),(0,D.w)(t=>(this.isLoading=!0,this._uomService.getUoms(0,10,"name","asc",t))),(0,J.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,J.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(Bn,"add")}updateUom(t){this._openDialog(t,"edit")}trackByFn(t,n){return t||n.id}_openDialog(t,n){this._dialog.open(Ln,{data:{uom:t,dialogMode:n},panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(y.uw),e.Y36(q.R),e.Y36(N),e.Y36(g.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["stock-uom"]],viewQuery:function(t,n){if(1&t&&(e.Gf(I.NW,5),e.Gf(h.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._paginator=r.first),e.iGM(r=e.CRH())&&(n._sort=r.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent","sm:overflow-x-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-x-auto"],[4,"ngIf"],["noUoms",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,""],[1,"",3,"mat-sort-header"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"items-center","flex"],[1,"min-w-4"],[1,"text-center"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Gesti\xf3n Comercial"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Unidades de Medida"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Unidades de Medida "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return n.createUom()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,Kn,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,Vn,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,n.uoms$)))},dependencies:[p.yS,m.sg,m.O5,a.Fj,a.JJ,a.oH,k.lW,C.Hw,_.KE,_.qo,E.Nt,I.NW,h.YE,h.nU,m.Ov],styles:[".uom-grid{grid-template-columns:112px 70px 100px 72px 72px}@media (min-width: 960px){.uom-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:B.L},changeDetection:0}),o})(),resolve:{uoms:re}},{path:"request",component:Fn,resolve:{requests:Ze.r}},{path:"request/:requestId",component:Mo,resolve:{request:Ze.N}},{path:"payment-methods",component:bo,resolve:{paymentMethod:Co}},{path:"quotations",component:Po,resolve:{quotations:he.S}},{path:"quotations/:quotationId",component:qo,resolve:{quotation:he.x}}];var Xn=l(6863);let ei=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(Wn),Lt,Xn.K,G.m]}),o})()}}]);